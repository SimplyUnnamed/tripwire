{"version":3,"sources":["helpers.js","eve-scout.js","init.js","options.js","layout.js","tripwire.js","global-hooks.js","wormholeRendering.js","widget-inlinecomplete.js","systemAnalysis.js","favourite.js","invasions.js","guidance.js","systemRendering.js","chain-map-renderer-base.js","chain-map-renderer-orgchart-side.js","chain-map-renderer-orgchart-top.js","chain-map-renderer-orgchart.js","chain-map-renderer-radial.js","chain-map.js","guidance_profiles.js","systemPanel.js","active.js","addSignature.js","api.js","automapper.js","comments.js","deleteSignature.js","editSignature.js","esi.js","eve.js","genericSystemTypes.js","parse.js","paste.js","redo.js","serverStatus.js","sync.js","systemChange.js","tutorials.js","undo.js","activity-graph.js","ckeditor.js","firefox-jquery-css-zoom.js","fw.js","maskRendering.js","mass.js","tracking.js","wormholeAnalysis.js","dialogs/admin-dialog.js","dialogs/base-dialog.js","dialogs/mask-dialog.js","dialogs/mass-dialog.js","dialogs/options-dialog.js","dialogs/ping-dialog.js","dialogs/signature-delete-dialog.js","dialogs/signature-dialog.js"],"names":["Object","sort","obj","prop","swapped","prev","i","Number","tmp","index","val","cs","key","toLowerCase","find","$","fn","serializeObject","self","this","json","push_counters","patterns","validate","push","fixed","named","build","base","value","push_counter","undefined","each","serializeArray","test","name","k","keys","match","merge","reverse_key","pop","replace","RegExp","extend","jQuery","letterToNumbers","string","toUpperCase","letters","sum","length","Math","pow","indexOf","substr","positionRelativeTo","elem","ancestor","elemPos","getBoundingClientRect","ancestorPos","ancestorZoom","window","getComputedStyle","getPropertyValue","left","scrollLeft","top","scrollTop","lookupMultiple","map","propertyName","lookupString","suppress","values","split","results","v","r","join","originalAddClassMethod","addClass","originalRemoveClassMethod","removeClass","className","result","apply","arguments","trigger","eveScout","_EveScoutSignatureConnection","_this","links","active","options","chain","tabs","evescout","nodeNameSuffix","findLinks","systemID","ids","ti","eveScoutLink","eveScoutID","id","nodeDefaults","life","remaining_hours","mass","out_system_id","assign","parent","parentID","signatureID","in_signature","type","wh_exits_outward","wh_type","child","nextChildID","in_system_id","out_signature","refresh","ajax","url","dataType","done","data","status","xhr","_","isEqual","console","info","redraw","fail","error","warn","setInterval","setTimeout","findSystemID","systemName","appData","systems","viewingSystem","attr","viewingSystemID","server","app_name","version","stop","location","init","masks","tripwire","maskRendering","update","saveTimer","localOverrides","localOptions","JSON","parse","localStorage","getItem","userID","character","characterID","characterName","background","uiscale","favorites","grid","tracking","characterOptions","corporationID","gridlines","aura","lineWeight","scrollWithoutCtrl","node-reference","zoom","sigNameLocation","routingLimit","routeSecurity","routeIgnore","enabled","renderer","nodeSpacing","x","y","signatures","editType","copySeparator","pasteLife","alignment","sigID","sigType","sigAge","leadsTo","sigLife","sigMass","buttons","follow","chainWidget","viewing","signaturesWidget","autoMapper","saveDelay","delay","clearTimeout","save","stringify","get","setItem","mode","load","set","set_tracking_text","local","constructor","reset","defaults","hasOwnProperty","oog","data-col","col","data-row","row","data-sizex","size_x","data-sizey","size_y","css","width","height","favorite","parseInt","home","kspace","inArray","a","href","hostname","pathname","search","html","filter","$tab","clone","append","guidance","clearCache","gridster","widget_selector","avoid_overlapped_widgets","widget_base_dimensions","widget_margins","autogrow_cols","helper","draggable","start","e","ui","resize","handle_class","min_size","$widget","serialize_params","$w","wgd","disable","disable_resize","visibility","click","hasClass","serialize","enable","enable_resize","timer","client","wormholes","list","undo","sessionStorage","redo","serverSignatureCount","activity","esi","refreshRate","connected","ageFormat","instance","Date","getTime","sync","setAgeFormat","format","countdown","cookies","getCookie","c_name","c_value","document","cookie","c_start","c_end","unescape","substring","setCookie","exdays","exdate","setDate","getDate","escape","toUTCString","protocol","serverTime","time","chainMap","draw","pastEOL","since","layout","whTooltip","sig","item","tooltip","sig2Type","whType","Intl","NumberFormat","jump","ageTooltip","date","lifeTime","getMonth","getHours","getMinutes","createdByName","modifiedTime","modifiedByName","successCallback","alwaysCallback","getSystemIDsByNames","systemNames","on","preventDefault","system","systemChange","source","target","previousElementSibling","navigator","clipboard","writeText","innerText","ctrlKey","parseFloat","originalEvent","wheelDelta","fadeIn","timeout","keydown","activeElement","is","metaKey","keyCode","getSelection","toString","output","signature","wormhole","initialID","secondaryID","otherSignature","genericSystemTypes","lifeLength","lifeLeft","text","focus","select","Notify","splice","getElementById","style","display","innerHTML","f","systemInfo","systemAnalysis","analyse","systemRendering","renderSystem","toggle","EVE","show","hide","isInPanel","content","color","stick","jBox","offset","animation","autoClose","ValidationTooltips","fade","Tooltips","attach","getContent","position","outside","SystemActivityToolTips","appendTo","reposition","repositionOnOpen","createOnInit","onOpen","targetPos","tooltipWidth","closest","container","offsetHeight","WormholeRouteToolTips","WormholeTypeToolTips","adjustDistance","responsiveWidth","OccupiedToolTips","pointer","minWidth","repositionOnContent","offsetWidth","setContent","cache","occupants","chars","b","shipTypeName","formatSignatureID","linkSig","sigName","sortable","items","axis","tolerance","containment","newTabs","setActiveTab","stopPropagation","dialog","Remove Tab","remove","l","Cancel","resizable","minHeight","dialogClass","OK","submit","open","close","create","inlinecomplete","aSigSystems","maxSize","thera","checked","eq","contextmenu","delegate","menu","event","my","at","of","children","colName","cmd","beforeOpen","effect","duration","nodeElem","showInfo","setDestination","characterId","characters","collapsed","collapse","existingTabIndex","newTab","wormholeID","class","existingTab","menuElem","moogle","prototype","setFlare","flare","flares","removeFlare","tablesorter","sortReset","widgets","textExtraction","2","node","toggleClass","shiftKey","nextUntil","addBack","add","autoOpen","Ok","easing","wormholeRendering","formatEndTypes","types","override","Array","isArray","overrideSystem","eligibleTypes","genericSystemType","systemTypeClass","systemTypeName","renderWormholeType","from","renderMass","trunc","widget","autocomplete","_create","_coerceSource","element","_selectInit","_super","_value","originalReturn","_superApply","change","_suggest","bind","_initSource","request","response","matcher","escapeRegex","term","dataSource","label","_renderItem","ul","renderResult","renderers","_close","input_source","addToSelect","select_added_value","select_source","unshift","removeFromSelect","wrapper","selectItemMapper","select_item_mapper","trim","toArray","_createShowAllButton","that","wasOpen","button","icons","primary","customDropdown","_search","wormholeType","mutators","classForTypeName","addMutator","m","leadsToPointer","nodeClass","nodeSecurity","nodeFaction","security","factionID","getDummySystem","baseSecurity","pathSymbol","systemTypeModifiers","forEach","mutate","effectClass","mutator_favourite","_FavouriteMutator","invasions","_Invasions","pathSymbolMap","stellar_reconnaissance","triglavian_minor_victory","escalating_liminality","final_liminality","edencom_minor_victory","redoubt","bulwark","fortress","textMap","keyBy","system_id","derived_security_status","updated_at","system_name","system_security","system_sovereignty","systemInvasion","tip","sorter","adjustCostForOptions","mapCost","toSystem","adjustJumpCost","to","cost","Guidance","jumpCostModifiers","reduce","modifier","findPaths","end","limit","endsInStart","costs","0","predecessors","addToOpen","vertex","bucket","shift","currentCost","adjacentNodes","vertexText","totalCost","vertexCost","extractShortest","nodes","u","predecessor","reverse","kSpaceCache","findShortestPath","cacheKey","cachedPath","connections","closed","renderPath","path","systemMarkup","slice","s","renderEffect","tag","ChainMapRendererBase","owner","ready","drawing","switchTo","newDiv","createElement","appendChild","switchFrom","div","parentNode","removeChild","mapData","updateCollapsed","drawInner","lines","arcFactor","level","calcMinArc","maps","nodesById","ri","rows","inNode","c","mapNode","minArc","newMap","circles","arc","circle","connection","styles","concat","markup","requestedSize","measureNode","mi","ci","ni","minForNode","mapDiv","innerContainer","firstChild","range","initialRads","bounds","makeDivsForRing","radRange","min","max","domNode","chainParent","previousScroll","finalPositions","w","h","cx","cy","centringOptions","parentWidth","parentHeight","rootNode","outerContainer","canvas","getElementsByTagName","ctx","getContext","scale","translate","maxCi","drawGridlines","lineWeightFactor","drawConnections","lineWidth","auraColor","propertyFromCssClass","shadowBlur","shadowColor","strokeStyle","ai","stroke","restore","setLineDash","dashed","drawFunction","beginPath","moveTo","drawConnection","minRad","maxRad","parentCollapsed","rads_per_arc","acc","rad_offset","getNodeRadialPosition","dr","rad_centre","alignment_delta","adjustAlignmentDelta","skipLevels","frag","createRange","createContextualFragment","dblclick","nodeRadialPosition","setPosition","excess","nextBounds","PI","lineTo","root_node","property","cssText","body","ChainMapRendererOrgchartSide","GRID_SIZE","project","rad","cp1","cp2","bezierCurveTo","fillStyle","font","fillText","ChainMapRendererOrgchartTop","arcFromSize","endpoint_y","ChainMapRendererOrgchart","google","visualization","OrgChart","allowHtml","allowCollapse","size","events","addListener","collapseHandler","DataView","DataTable","cols","charts","setOnLoadCallback","newView","nodeId","nodeVal","updateLines","drawNodeLine","addModes","jquerySelector","prefixes","doModeClasses","removeModes","classFunc","prefix","$node","nodeIndex","ceil","cellIndex","$connector","$parent","nodeCol","connectorCell","colSpan","parentIndex","newparentIndex","checkSystem","$connecte","me","tempCol","breaker","skip","lastLineData","getCollapsedNodes","collapsedSystems","ChainMapRendererRadial","CIRCLE_SIZE","first_ring_delta","ringX","ringY","radToCartesian","sin","theta","cos","skipped","radPosition","ellipse","view","thirdPartySuppliers","orgChart","orgChartTop","orgChartSide","radial","useRenderer","elements","querySelectorAll","getAttribute","shipJumps","podKills","shipKills","npcKills","getElementsByClassName","jumps","setAttribute","pods","ships","npcs","attachedElements","detach","occupied","count","next","topLevel","tab","makeSystemNode","whId","inSigId","nodeTypeMarkup","additionalClasses","systemType","systemNameText","chainNode","statics","shortCodeMap","High-Sec","Low-Sec","Null-Sec","Triglavian","Class-1","Class-2","Class-3","Class-4","Class-5","Class-6","classMap","H","L","N","▼","formatStatics","makeCalcChildNode","childID","targetSystem","shortest","calcNode","calculated","nth","chainList","connectedTo","addCalcChildNodes","chainLinks","regionID","chainData","usedLinks","sig1","sig2","sig1Type","parentType","childType","floor","random","sigIndex","supplier","supplierNodes","supplierNode","thirdParty","systemsInChainMap","sigText","modifiers","connectionWormhole","wormholeAnalysis","wormholeFromTypePair","likelyWormhole","parentModifiers","chainModifiers","p","cm","parentPathHome","pathHome","exits","newIndex","rawMap","drawRetryTimer","renderInChain","systemPanel","expires","universeJumps","getResponseHeader","ship_jumps","then","universeKills","pod_kills","ship_kills","npc_kills","closestToViewing","inChain","pathLength","prefixText","pathHomeText","n","pathToChainText","renderClipboardIcon","renderRouteIcon","ns","svg","createElementNS","g","toCopy","guidance_profiles","blueLootSystems","chainExits","renderRoute","targets","addPathHome","cssClass","categoryText","exitSystem","buildPath","link","renderCopyIcon","pathList","tagName","newWindow","route","loot","empty","editSigs","editComments","editSig","editComment","animate","backgroundColor","fadeOut","makeSigInfo","wh","wormholeTypeText","formattedType","lifeText","critical","stable","addSig","option","disabled","returnLinkText","sigInfo","leadsToText","tr","until","moment","utc","toDate","onExpiry","alwaysExpire","compact","serverSync","wrapInner","slideDown","$set","replaceWith","contents","setReturnSig","sigToRemoveId","sigToUpdate","returnSig","sigToRemove","sigDialog","overwriteSignature","payload","API","indicator","APIrefresh","expire","periodsToSeconds","onTick","t","automapState","pendingDecision","wormholesForJump","toType","toClass","holeTargetTypeName","holeClasses","log","noMapSystems","stationID","shipTypeID","initial","secondary","automap","title","signature2","resultSet","formatSystem","trElem","action","comments","modified","$comment","comment","err","message","sticky","commentID","before","created","deleteSig","slideUp","edit","locationTimer","shipTimer","onlineTimer","baseUrl","userAgent","oauth","subject","accessToken","isExpired","tokenExpire","subtract","isBefore","updateTracking","stationName","shipID","shipName","massOptions","expired","param","token","user_agent","jqXHR","locationDate","solar_system_id","station_id","stationLookup","always","reference","ship","shipDate","ship_item_id","resetMassOptions","ship_name","ship_type_id","typeLookup","online","characterStatus","typeID","destinationID","clear_waypoints","beginning","destination_id","clear_other_waypoints","add_to_beginning","headers","Authorization","X-User-Agent","targetID","target_id","eveStatus","idLookup","eveIDs","contentType","processData","characterLookup","eveID","async","corporationLookup","allianceLookup","searchString","categories","strict","fullLookup","promise","Deferred","category","characterData","corporation_id","corporationData","corporation","alliance_id","allianceData","alliance","resolve","parseOauth","_data","$clone","removeAttr","characterChange","updateSignatureTable","newSigsInSystem","mask","column","editing","sigEditing","currentSystem","signatureCount","updateReturnStatus","wormholeId","returnSigId","needReturn","pasteSignatures","processing","rowParse","scanner","columns","validScanGroups","validTypes","Combat Site","Data Site","Gas Site","Ore Site","Relic Site","Wormhole","Site de combat","Site de données","Site de collecte de gaz","Site de minerai","Site de reliques","Trou de ver","Kampfgebiet","Datengebiet","Gasgebiet","Mineraliengebiet","Reliktgebiet","Wurmloch","戦闘サイト","データサイト","ガスサイト","鉱石サイト","遺物サイト","ワームホール","전투 사이트","데이터 사이트","가스 사이트","채광 사이트","유물 사이트","웜홀","Боевой район","Информационный район","Газовый район","Астероидный район","Археологический район","Червоточина","scanGroup","parsePaste","paste","pasteIDs","removes","scan","clipboardData","getData","blur","lastIndex","redoItem","serverStatus","players","times","updateServerTime","maxTimeByProperty","maxTime","maxTimeString","signatureTime","flareCount","flareTime","last_modified","commentCount","commentTime","o","wormholeInitialIDs","wormholeSecondaryIDs","notify","discord_integration","history","replaceState","formJourneyLink","origin","effects","bad","whClass","abs","securityText","HS","LS","NS","Trig","toFixed","fw","factionMarkup","fi","regions","tutorial","introJs","setOptions","showStepNumbers","steps","querySelector","intro","exitOnEsc","exitOnOverlayClick","skipLabel","onchange","_currentStep","previousMask","stepFunc","_options","setOption","exiting","exit","goToStep","off","onexit","undoItem","graph","span","role","calc","d","getValue","sourceColumn","setColumns","selectHandler","selections","AreaChart","isStacked","hAxis","textStyle","fontName","fontSize","showTextEvery","vAxis","viewWindowMode","viewWindow","maxValue","gridlineColor","pointSize","chartArea","legend","showColorCode","annotations","domain","focusTarget","CKConfig","skin","allowedContent","extraPlugins","enterMode","CKEDITOR","ENTER_BR","removeDialogTabs","autoGrow_onStartup","autoGrow_minHeight","toolbar_minToolbar","toolbar_maxToolbar","toolbar","smallToolbar","maximizedToolbar","fontSize_style","font-size","overrides","attributes","cke","editor","domEvent","altKey","selected_ranges","getRanges","startContainer","parents","getParents","getFirst","getNext","selectElement","selectRanges","ev","definition","getContents","commentSortHandler","sortOrder","sortElem","containerElem","nextSort","flexDirection","removeAllRanges","$this","instances","modifiedDate","createdDate","destroy","Delete","cssNumber","cssHooks","computed","extra","$e","clientWidth","clientHeight","transform","transformOrigin","bot","right","marginBottom","marginRight","_FactionWarfare","listeners","SamanuniAthounonGateOpen","occupier_faction_id","factions","contested","victory_points","victory_points_threshold","renderMask","global","corporate","ownerType","newActive","activeMask","joined","joinedBy","addEventListener","maskFunctions","updateActiveMask","higgs","charOptions","defaultCharacterOptions","showShip","textContent","dataset","characterid","wasActive","delete","esiDelete","objAndKey","targetSystemID","systemText","lookupText","findIndex","eligibleWormholeTypes","sourceDef","targetDef","coerce","def","matches","possibleSystems","exclusions","genericTypes","some","genericType","systemTypeMatch","entries","wt","notFrom","notLeadsTo","dummyWormholes","GATE","SML","dummy","MED","LRG","XLG","type1","type2","system1","system2","class1","class2","isHighClass","classes","isKSpace","inferKSpace","String","refreshTimer","$total","$ajax","refreshWindow","abort","$row","$col","modal","Close","$menuItem","sortList","parentElement","getMasks","iconBar","optional","admin","img","afterFunction","maskChange","Save","joinMask","maskID","completeFunction","Confirm","makeAccessListNode","extraAttributes","maskElem","send","Create","selectmenu","Add","total","getMassClass","jumpMass","parseMassData","totalMass","smallMass","mediumMass","largeMass","xlMass","shipData","originalMass","shipFlagsText","shipType","shipFlags","massClass","typeName","toID","fromSystem","massData","j","massMarkup","slider","Reset","stats","system_visits","account","logins","lastLogin","username","setUpSlider","step","slide","accordion","heightStyle","collapsible","direction","Send","fromSignature","openDeleteDialog","vm","successFunction","deleteDialogVM","signaturePayload","sigs","sigDialogVM","openSignatureDialog","sigId","aSigWormholes","K162","getTargetName","sigTypeDropdownFiller","extractor","eligible","durationPicker","not","form","valid","signatureID_Alpha","signatureID_Numeric","sigKey","existing","signatureType","wormholeName","signatureLength","signatureID2_Alpha","signatureID2_Numeric","wormholeName2","wormholeType2","wormholeLife","wormholeMass","signatureName","sigAlpha","delegateSave"],"mappings":"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","file":"app.min.js","sourcesContent":["Object.sort = function(obj, prop) {\n\tvar swapped, prev;\n\tdo {\n\t\tswapped = false, prev = null;\n\t\tfor (var i in obj) {\n\t\t\tif (prev && Number(obj[i][prop]) < Number(obj[prev][prop])) {\n\t\t\t\tvar tmp = obj[i];\n\t\t\t\tobj[i] = obj[prev];\n\t\t\t\tobj[prev] = tmp;\n\t\t\t\tswapped = true;\n\t\t\t}\n\t\t\tprev = i;\n\t\t}\n\t} while (swapped);\n}\n\nObject.index = function(obj, prop, val, cs) {\n\tfor (var key in obj) {\n\t\tif (!cs && obj[key][prop] == val) {\n\t\t\treturn key;\n\t\t} else if (obj[key][prop] && obj[key][prop].toLowerCase() == val.toLowerCase()) {\n\t\t\treturn key;\n\t\t}\n\t}\n}\n\nObject.find = function(obj, prop, val, cs) {\n\tfor (var key in obj) {\n\t\tif (!cs && obj[key][prop] == val) {\n\t\t\treturn obj[key];\n\t\t} else if (obj[key][prop] && obj[key][prop].toLowerCase() == val.toLowerCase()) {\n\t\t\treturn obj[key];\n\t\t}\n\t}\n\n\treturn false;\n};\n\n(function($){\n    $.fn.serializeObject = function(){\n\n        var self = this,\n            json = {},\n            push_counters = {},\n            patterns = {\n                \"validate\": /^[a-zA-Z][a-zA-Z0-9_]*(?:\\[(?:\\d*|[a-zA-Z0-9_]+)\\])*$/,\n                \"key\":      /[a-zA-Z0-9_]+|(?=\\[\\])/g,\n                \"push\":     /^$/,\n                \"fixed\":    /^\\d+$/,\n                \"named\":    /^[a-zA-Z0-9_]+$/\n            };\n\n\n        this.build = function(base, key, value){\n            base[key] = value;\n            return base;\n        };\n\n        this.push_counter = function(key){\n            if(push_counters[key] === undefined){\n                push_counters[key] = 0;\n            }\n            return push_counters[key]++;\n        };\n\n        $.each($(this).serializeArray(), function(){\n\n            // skip invalid keys\n            if(!patterns.validate.test(this.name)){\n                return;\n            }\n\n            var k,\n                keys = this.name.match(patterns.key),\n                merge = this.value,\n                reverse_key = this.name;\n\n            while((k = keys.pop()) !== undefined){\n\n                // adjust reverse_key\n                reverse_key = reverse_key.replace(new RegExp(\"\\\\[\" + k + \"\\\\]$\"), '');\n\n                // push\n                if(k.match(patterns.push)){\n                    merge = self.build([], self.push_counter(reverse_key), merge);\n                }\n\n                // fixed\n                else if(k.match(patterns.fixed)){\n                    merge = self.build([], k, merge);\n                }\n\n                // named\n                else if(k.match(patterns.named)){\n                    merge = self.build({}, k, merge);\n                }\n            }\n\n            json = $.extend(true, json, merge);\n        });\n\n        return json;\n    };\n})(jQuery);\n\nvar letterToNumbers = function(string) {\n    string = string.toUpperCase();\n    var letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', sum = 0, i;\n    for (i = 0; i < string.length; i++) {\n        sum += Math.pow(letters.length, i) * (letters.indexOf(string.substr(((i + 1) * -1), 1)) + 1);\n    }\n    return sum;\n};\n\n/** Find the relative position of one element within the hierarchy tree of another.\nThe client position should be in the coordinate space of the ancestor, i.e. top/left values for a position:absolute overlay */\nfunction positionRelativeTo(elem, ancestor) {\n\tconst elemPos = elem.getBoundingClientRect(),\n\t\tancestorPos = ancestor.getBoundingClientRect(),\n\t\tancestorZoom = 1 * (window.getComputedStyle(ancestor).getPropertyValue('zoom') || '1');\n\treturn { \n\t\tleft: (elemPos.left - ancestorPos.left + ancestor.scrollLeft) / ancestorZoom,\n\t\ttop: (elemPos.top - ancestorPos.top + ancestor.scrollTop) / ancestorZoom\n\t};\n}\n\n/** Look up one or more values in a comma separated string as keys in a data map, and return a property from the results in a new comma separated string.\nConvenience function for UI mapping.\nWill throw a failure message, unless suppress=true in which case it will return undefined, if \nany of the lookups fail to resolve. */\nfunction lookupMultiple(map, propertyName, lookupString, suppress) {\n\tconst values = lookupString.split(',');\n\tconst results = [];\n\tfor(var i = 0; i < values.length; i++) {\n\t\tconst v = values[i];\n\t\tconst r = map[v];\n\t\tif(!r) { \n\t\t\tif(suppress) { return undefined;}\n\t\t\telse { throw 'Value ' + v + ' did not match anything in ' + map; }\n\t\t}\n\t\tresults.push(r[propertyName]);\n\t}\n\treturn results.join(',');\n}\n\n// Global CSS class change event\n(function($) {\n    var originalAddClassMethod = $.fn.addClass;\n\tvar originalRemoveClassMethod = $.fn.removeClass;\n\n    $.fn.addClass = function(className) {\n        // Execute the original method.\n        var result = originalAddClassMethod.apply(this, arguments);\n\n        // trigger a custom event\n        this.trigger('classchange', className);\n\n        // return the original result\n        return result;\n    }\n\n\t$.fn.removeClass = function(className) {\n        // Execute the original method.\n        var result = originalRemoveClassMethod.apply(this, arguments);\n\n        // trigger a custom event\n        this.trigger('classchange', className);\n\n        // return the original result\n        return result;\n    }\n})(jQuery);\n\n","const eveScout = new _EveScoutSignatureConnection();\n\nfunction _EveScoutSignatureConnection() {\n\tconst _this = this;\n\t\n\tthis.links = [];\n\t\n\tthis.active = function() {\n\t\treturn 'undefined' !== typeof options && options.chain.tabs[options.chain.active] && options.chain.tabs[options.chain.active].evescout;\n\t}\n\t\n\tthis.nodeNameSuffix = 'eve-scout';\n\t\n\tthis.findLinks = function(systemID, ids) {\n\t\tif(!this.active()) { return []; }\n\t\t\n\t\tconst r = [];\n\t\tfor(var ti = 0; ti < this.links.length; ti++) {\n\t\t\tconst eveScoutLink = this.links[ti];\n\t\t\tconst eveScoutID = 'ES-' + eveScoutLink.id;\n\t\t\t\n\t\t\tconst nodeDefaults = {\n\t\t\t\tlife: eveScoutLink.remaining_hours >= 4 ? 'stable' : 'critical',\n\t\t\t\tmass: 'stable',\t// they no longer attempt to track mass\n\t\t\t\tid: eveScoutID,\n\t\t\t};\n\t\t\t\n\t\t\tif(eveScoutLink.out_system_id == systemID) {\t// Connection from this hole\n\t\t\t\tr.push(Object.assign({\n\t\t\t\t\t\n\t\t\t\t\tparent: {\n\t\t\t\t\t\tid: ids.parentID,\n\t\t\t\t\t\tsystemID: systemID,\n\t\t\t\t\t\tsignatureID: eveScoutLink.in_signature,\n\t\t\t\t\t\ttype: eveScoutLink.wh_exits_outward ? eveScoutLink.wh_type : 'K162'\n\t\t\t\t\t},\tchild: {\n\t\t\t\t\t\tid: ids.nextChildID++,\n\t\t\t\t\t\tsystemID: eveScoutLink.in_system_id,\n\t\t\t\t\t\tsignatureID: eveScoutLink.out_signature,\n\t\t\t\t\t\ttype: eveScoutLink.wh_exits_outward ? 'K162' : eveScoutLink.wh_type\n\t\t\t\t\t}\n\t\t\t\t}, nodeDefaults));\n\t\t\t} else if(eveScoutLink.in_system_id == systemID) { // Connection to this hole\n\t\t\t\tr.push(Object.assign({\n\t\t\t\t\tparent: {\n\t\t\t\t\t\tid: ids.parentID,\n\t\t\t\t\t\tsystemID: systemID,\n\t\t\t\t\t\tsignatureID: eveScoutLink.out_signature,\n\t\t\t\t\t\ttype: eveScoutLink.wh_exits_outward ? 'K162' : eveScoutLink.wh_type\n\t\t\t\t\t},\tchild: {\n\t\t\t\t\t\tid: ids.nextChildID++,\n\t\t\t\t\t\tsystemID: eveScoutLink.out_system_id,\n\t\t\t\t\t\tsignatureID: eveScoutLink.in_signature,\n\t\t\t\t\t\ttype: eveScoutLink.wh_exits_outward ? eveScoutLink.wh_type : 'K162'\n\t\t\t\t\t}\n\t\t\t\t}, nodeDefaults));\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn r;\n\t}\n\t\n\t/** Refresh the signature data from the public Eve-Scout API */\n\tthis.refresh = function() {\n\t\tif(!_this.active()) {\n\t\t\treturn;\t// only look for Thera data if on a tab with the option selected\n\t\t}\n\t\t\n\t\t$.ajax({\n\t\t\turl: 'cached_third_party.php?key=eve-scout-signatures',\n\t\t\ttype: \"GET\",\n\t\t\tdataType: \"JSON\"\n\t\t}).done(function(data, status, xhr) {\t\n\t\t\tif(!_.isEqual(data, _this.links)) {\n\t\t\t\tconsole.info('Updating map for EvE Scout update');\n\t\t\t\t_this.links = data;\n\t\t\t\tchain.redraw();\n\t\t\t}\n\t\t}).fail(function(xhr, status, error) {\n\t\t\tconsole.warn('Failed to fetch signatures from eve-scout.com: ' + status, error);\n\t\t});\n\t};\n\t\n\tsetInterval(this.refresh, 60000);\n\tsetTimeout(this.refresh, 0);\n}","function findSystemID(systemName) {\n\tfor(let k in appData.systems) {\n\t\tif(appData.systems[k].name.toUpperCase() === systemName.toUpperCase()) return k; \n\t}\n\treturn undefined;\n}\n\nvar viewingSystem = $(\"meta[name=system]\").attr(\"content\");\nvar viewingSystemID = findSystemID(viewingSystem);\nvar server = $(\"meta[name=server]\").attr(\"content\");\nvar app_name = $(\"meta[name=app_name]\").attr(\"content\");\nvar version = $(\"meta[name=version]\").attr(\"content\");\n\n// Reload with default system if it was invalid\nif(!viewingSystemID) { window.stop(); window.location = '?system=Jita'; }\n\n// Use this to test performance of javascript code lines\n// var startTime = window.performance.now();\n// console.log(\"stint: \"+ (window.performance.now() - startTime));\n\nif(init.masks) {\n\tsetTimeout(() => {\n\t\ttripwire.masks = init.masks;\n\t\tmaskRendering.update(tripwire.masks);\n\t}, 0);\t// so maskRendering exists when it gets called\n}\n","var options = new function() {\n\tvar localOverrides = [\"grid\"];\n\tvar localOptions = JSON.parse(localStorage.getItem(\"tripwire_options\"));\n\tvar saveTimer;\n\n\tthis.userID = init.userID;\n\tthis.character = {id: init.characterID, name: init.characterName};\n\tthis.background = null;\n\tthis.uiscale = 1.0;\n\tthis.favorites = [];\n\tthis.grid = {};\n\tthis.tracking = {active: \"new\", characterOptions: {}};\n\tthis.masks = {active: init.corporationID + \".2\"};\n\tthis.chain = {gridlines: true, aura: true, lineWeight: 1.0, scrollWithoutCtrl: false, active: 0, tabs: [], \"node-reference\": \"type\", zoom: 1.0, sigNameLocation: 'name', routingLimit: 15, routeSecurity: 'shortest', routeIgnore: { enabled: false, systems: [ 'Tama', 'Rancer' ] }, renderer: 'radial', nodeSpacing: { x: 1.0, y: 1.0 } };\n\tthis.signatures = {editType: \"unknown\", copySeparator: \",\", pasteLife: 72, alignment: {sigID: \"centerAlign\", sigType: \"centerAlign\", sigAge: \"centerAlign\", leadsTo: \"centerAlign\", sigLife: \"centerAlign\", sigMass: \"centerAlign\"}};\n\tthis.buttons = {follow: false, chainWidget: {viewing: false, favorites: false}, signaturesWidget: {autoMapper: false}};\n\n\tthis.saveDelay = function(delay) {\n\t\tif (saveTimer) clearTimeout(saveTimer);\n\n\t\tsaveTimer = setTimeout(\"options.save()\", delay);\n\t};\n\n\t// Saves options in both cookie and database\n\tthis.save = function() {\n\t\tvar options = JSON.stringify(window.options.get());\n\n\t\tlocalStorage.setItem(\"tripwire_options\", options);\n\n\t\treturn $.ajax({\n\t\t\turl: \"options.php\",\n\t\t\tdata: {mode: \"set\", options: options},\n\t\t\ttype: \"POST\",\n\t\t\tdataType: \"JSON\"\n\t\t});\n\t};\n\n\t// Loads options via passed object else cookie\n\tthis.load = function(data) {\n\t\tif (data && typeof(data) != \"undefined\") {\n\t\t\tthis.set(this, data);\n\t\t} else if (localOptions) {\n\t\t\tthis.set(this, localOptions);\n\t\t}\n\n\t\tthis.apply();\n\t\tif(tripwire) { set_tracking_text(); }\n\t};\n\n\t// Gets options from this by exluding types == function\n\tthis.get = function() {\n\t\tvar data = {};\n\n\t\tfor (var x in this) {\n\t\t\tif (typeof(this[x]) != \"function\") {\n\t\t\t\tdata[x] = this[x];\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t};\n\n\t// Sets this from passed object\n\tthis.set = function(local, data) {\n\t\tfor (var prop in data) {\n\t\t\tif (data[prop] && data[prop].constructor && data[prop].constructor === Object) {\n\t\t\t\tif (local) {\n\t\t\t\t\tif(typeof(local[prop]) === 'undefined') { local[prop] = {}; }\n\t\t\t\t\tthis.set(local[prop], data[prop]);\n\t\t\t\t}\n\t\t\t} else if (local) {\n\t\t\t\tlocal[prop] = data[prop];\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.reset = function() {\n\t\tfor (var x in this) {\n\t\t\tif (typeof(this[x]) != \"function\") {\n\t\t\t\tthis[x] = JSON.parse(JSON.stringify(this.reset.defaults[x]));\n\t\t\t}\n\t\t}\n\t};\n\n\t// Applies settings\n\tthis.apply = function() {\n\t\t// Local browser overrides\n\t\tif (localOptions) {\n            for (key in localOverrides) {\n                this[localOverrides[key]] = localOptions[localOverrides[key]];\n\t\t\t}\n\t\t}\n\n\t\t// Grid layout (detect old IGB setting options)\n\t\tif (this.grid.hasOwnProperty(\"oog\") && Object.keys(this.grid.oog||{}).length) {\n\t\t\t$.each(this.grid.oog, function() {\n\t\t\t\t$(\"#\"+this.id).attr({\"data-col\": this.col, \"data-row\": this.row, \"data-sizex\": this.size_x, \"data-sizey\": this.size_y})\n\t\t\t\t\t.css({width: this.width, height: this.height});\n\t\t\t});\n\t\t} else if (Object.keys(this.grid||{}).length) {\n\t\t\t$.each(this.grid, function() {\n\t\t\t\t$(\"#\"+this.id).attr({\"data-col\": this.col, \"data-row\": this.row, \"data-sizex\": this.size_x, \"data-sizey\": this.size_y})\n\t\t\t\t\t.css({width: this.width, height: this.height});\n\t\t\t});\n\t\t}\n\n\t\t// Make sure favorites are all ints and not strings\n\t\tthis.favorites = $.map(this.favorites, function(favorite) {\n\t\t\treturn parseInt(favorite);\n\t\t});\n\n\t\t// Buttons\n\t\tif (this.buttons.follow) $(\"#follow\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.home) $(\"#home\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.kspace) $(\"#k-space\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.viewing) $(\"#show-viewing\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.favorites) $(\"#show-favorite\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.evescout) $(\"#eve-scout\").addClass(\"active\");\n\t\tif ($.inArray(parseInt(viewingSystemID), this.favorites) !== -1) $(\"#system-favorite\").attr(\"data-icon\", \"star\").addClass(\"active\");\n\t\tif (this.buttons.signaturesWidget.autoMapper) $(\"#toggle-automapper\").addClass(\"active\");\n\n\t\t// UI Scale\n\t\tif (this.uiscale) {\n\t\t\t$(\"body\").css(\"zoom\", this.uiscale);\n\t\t}\n\n\t\t// Chain zoom\n\t\tif (this.chain.zoom) {\n\t\t\t$(\"#chainParent\").css(\"zoom\", this.chain.zoom);\n\t\t}\n\n\t\t// Background\n\t\tif (this.background) {\n\t\t\tvar a = $('<a>', { href:this.background } )[0];\n\t\t\t$(\"#wrapper\").attr(\"style\", \"background-image: url(https://\" + a.hostname + a.pathname + a.search + \");\");\n\t\t} else {\n\t\t\t$(\"#wrapper\").attr(\"style\", \"\");\n\t\t}\n\n\t\t// Characters in Options\n\t\t$(\"#dialog-options #characters\").html(\"<img src='https://image.eveonline.com/Character/\"+init.characterID+\"_64.jpg' />\");\n\n\t\t// Active mask\n\t\t$(\"#dialog-options input[name='mask']\").filter(\"[value='\"+this.masks.active+\"']\").attr(\"checked\", true);\n\n\t\t// Chain tabs\n\t\t$(\"#chainTabs\").html(\"\");\n\t\tfor (var x in this.chain.tabs) {\n\t\t\tif (this.chain.tabs[x]) {\n\t\t\t\tvar $tab = $(\"#chainTab .tab\").clone();\n\n\t\t\t\t$tab.attr(\"id\", x).find(\".name\").data(\"tab\", this.chain.tabs[x].systemID).html(this.chain.tabs[x].name);\n\t\t\t\tif (x == this.chain.active) { $tab.addClass(\"current\"); }\n\n\t\t\t\t$(\"#chainTabs\").append($tab);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Reset routing cache in case routing options changed\n\t\tif(guidance) { guidance.clearCache(); }\n\n\t\t// Draw chain if Tripwire is initialized\n\t\tif (typeof(tripwire) !== \"undefined\") {\n\t\t\tchain.redraw();\n\t\t}\n\t};\n\n\tthis.reset.defaults = JSON.parse(JSON.stringify(this.get()));\n\tthis.load(init && init.options ? init.options : null);\n}\n","var grid = $(\".gridster ul\").gridster({\n\twidget_selector: \"li.gridWidget\",\n\tavoid_overlapped_widgets: false,\n\twidget_base_dimensions: [50, 50],\n\twidget_margins: [5, 5],\n\tautogrow_cols: true,\n\thelper: \"clone\",\n\tdraggable: {\n\t\tstart: function(e, ui) {\n\t\t\t$(\"div.gridster\").width($(\"div.gridster ul\").width());\n\t\t}\n\t},\n\tresize: {\n    \tenabled: true,\n    \thandle_class: \"grid-resize\",\n    \tmin_size: [4, 4],\n    \tstart: function(e) {\n    \t\t$(\"div.gridster\").width($(\"div.gridster ul\").width());\n    \t},\n    \tstop: function(e, ui, $widget) {\n    \t\t//var width = parseInt($(\".gridster\").css(\"margin-left\")) + this.container_width;\n    \t\t//$(\"#wrapper\").css({width: width + \"px\"})\n    \t\tswitch ($widget.attr(\"id\")) {\n    \t\t\tcase \"infoWidget\":\n    \t\t\t\tsetTimeout(\"activity.redraw();\", 300);\n    \t\t\t\tbreak;\n    \t\t}\n    \t}\n\t},\n\tserialize_params: function($w, wgd) {\n\t\treturn {\n\t\t\tid: $w.attr(\"id\"),\n\t\t\tcol: wgd.col,\n\t\t\trow: wgd.row,\n\t\t\tsize_x: wgd.size_x,\n\t\t\tsize_y: wgd.size_y,\n\t\t\twidth: $w.width(),\n\t\t\theight: $w.height()\n\t\t}\n\t}\n}).data(\"gridster\").disable();\n\ngrid.disable_resize();\n$(\".grid-resize\").addClass(\"hidden\").attr(\"data-icon\", \"resize\");\n\n$(\".gridster\").css({visibility: \"visible\"});\n$(\".gridster > *\").addClass(\"gridster-transition\");\n\n$(\"#layout\").click(function() {\n\tif (!$(this).hasClass(\"active\")) {\n\t\tgrid.enable();\n\t\tgrid.enable_resize();\n\t\t$(\".grid-resize\").removeClass(\"hidden\");\n\n\t\t$(this).addClass(\"active\");\n\t} else {\n\t\tgrid.disable();\n\t\tgrid.disable_resize();\n\t\t$(\".grid-resize\").addClass(\"hidden\");\n\n\t\t$(this).removeClass(\"active\");\n\n\t\toptions.grid = grid.serialize();\n\n\t\toptions.save();\n\t}\n});\n","var tripwire = new function() {\n    this.timer, this.xhr;\n\tthis.version = version;\n\tthis.client = {signatures: {}, wormholes: {}};\n\tthis.server = {signatures: {}, wormholes: {}};\n\tthis.signatures = {list: {}, undo: JSON.parse(sessionStorage.getItem(\"tripwire_undo\")) || {}, redo: JSON.parse(sessionStorage.getItem(\"tripwire_redo\")) || {}};\n\tthis.serverSignatureCount = 0;\n\tthis.activity = {};\n\tthis.data = {tracking: {}, esi: {}};\n\tthis.refreshRate = 5000;\n\tthis.connected = true;\n\tthis.ageFormat = \"HM\";\n\tthis.instance = window.name ? window.name : (new Date().getTime() / 1000, window.name = new Date().getTime() / 1000);\n\n\t// Reference to `this` that can be used inside of functions\n\tvar _this = this\n\n    // Command to start/stop tripwire updates\n\t// ToDo: Include API and Server timers\n\tthis.stop = function() {\n\t\tclearTimeout(this.timer);\n\t\treturn this.timer;\n\t};\n\n\tthis.start = function() {\n\t\treturn this.sync();\n\t}\n\n    // Command to change Age format\n\t// ToDo: Cookie change to keep\n\tthis.setAgeFormat = function(format) {\n\t\tvar format = typeof(format) !== 'undefined' ? format : this.ageFormat;\n\n\t\t$(\"span[data-age]\").each(function() {\n\t\t\t$(this).countdown(\"option\", {format: format});\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tthis.cookies = {\n\t\tgetCookie: function(c_name) {\n\t\t\tvar c_value = document.cookie;\n\n\t\t\tvar c_start = c_value.indexOf(\" \" + c_name + \"=\");\n\t\t\tif (c_start == -1) {\n\t\t\t\tc_start = c_value.indexOf(c_name + \"=\");\n\t\t\t}\n\n\t\t\tif (c_start == -1) {\n\t\t\t\tc_value = null;\n\t\t\t} else {\n\t\t\t\tc_start = c_value.indexOf(\"=\", c_start) + 1;\n\t\t\t\tvar c_end = c_value.indexOf(\";\", c_start);\n\n\t\t\t\tif (c_end == -1) {\n\t\t\t\t\tc_end = c_value.length;\n\t\t\t\t}\n\n\t\t\t\tc_value = unescape(c_value.substring(c_start, c_end));\n\t\t\t}\n\n\t\t\treturn c_value;\n\t\t},\n\n\t\tsetCookie: function(c_name, value, exdays) {\n\t\t\tvar exdate = new Date();\n\t\t\texdate.setDate(exdate.getDate() + exdays);\n\t\t\tvar c_value = escape(value) + ((exdays == null) ? \"\" : \"; expires=\"+exdate.toUTCString());\n\n\t\t\tdocument.cookie = c_name + \"=\" + c_value + \";\" + (document.location.protocol == \"https:\" ? \"secure;\" : \"\");\n\t\t}\n\t};\n\n    this.serverTime = function() {\n\t\tthis.time;\n\n\t\tthis.serverTime.getTime = function() {\n\t\t\treturn tripwire.serverTime.time;\n\t\t}\n\t}\n    this.serverTime();\n\n    // Handles putting chain together\n\tthis.chainMap = function() {\n\t\tthis.chainMap.parse = function(data) {\n\t\t\tchain.draw(data);\n\t\t}\n\t}\n    this.chainMap();\n\n    this.pastEOL = function() {\n\t\tvar options = {since: $(this).countdown('option', 'until'), format: \"HM\", layout: \"-{hnn}{sep}{mnn}&nbsp;\"};\n\t\t$(this).countdown(\"option\", options);\n\t}\n\n    // Handles WH Type hover-over tooltip\n\t// ToDo: Use native JS\n\tthis.whTooltip = function(sig) {\n\t\tif (viewingSystemID == sig.systemID) {\n\t\t\tif ($.inArray(sig.type, $.map(appData.wormholes, function(item, index) { return index;})) >= 0) {\n\t\t\t\tvar type = sig.type;\n\t\t\t\tvar tooltip = '';\n\t\t\t} else {\n\t\t\t\tvar type = sig.sig2Type;\n\t\t\t\tvar tooltip = \"<b>Type:</b> \"+(type || 'Unknown')+\"<br/>\";\n\t\t\t}\n\t\t} else {\n\t\t\tif ($.inArray(sig.sig2Type, $.map(appData.wormholes, function(item, index) { return index;})) >= 0) {\n\t\t\t\tvar type = sig.sig2Type;\n\t\t\t\tvar tooltip = '';\n\t\t\t} else {\n\t\t\t\tvar type = sig.type;\n\t\t\t\tvar tooltip = \"<b>Type:</b> \"+(type || 'Unknown')+\"<br/>\";\n\t\t\t}\n\t\t}\n\n\t\tif ($.inArray(type, $.map(appData.wormholes, function(item, index) { return index;})) >= 0) {\n\t\t\tvar whType = true;\n\t\t} else {\n\t\t\tvar whType = false;\n\t\t}\n\n\t\ttooltip += \"<b>Life:</b> \"+(whType?appData.wormholes[type].life:\"Unknown\")+\"<br/>\";\n\n\t\tif (whType) {\n\t\t\tswitch (appData.wormholes[type].leadsTo.split(\"-\")[0]) {\n\t\t\t\tcase 'High':\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span class='hisec'>\"+appData.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Low':\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span class='lowsec'>\"+appData.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Null':\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span class='nullsec'>\"+appData.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Class':\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span class='wh'>\"+appData.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span>\"+appData.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t}\n\n\t\t\ttooltip += \"<b>Max Mass</b>: \"+(Intl.NumberFormat().format(tripwire.wormholes[type].mass))+\" Kg<br/>\";\n\n\t\t\ttooltip += \"<b>Max Jumpable</b>: \"+(Intl.NumberFormat().format(tripwire.wormholes[type].jump))+\" Kg<br/>\";\n\t\t}\n\n\t\treturn tooltip;\n\t}\n\n\t// Handles Age hover-over tooltip\n\t// ToDo: Use native JS\n\tthis.ageTooltip = function(sig) {\n\t\t// var date = new Date(sig.lifeTime);\n\t\t// var localOffset = date.getTimezoneOffset() * 60000;\n\t\t// date = new Date(date.getTime() + localOffset);\n        var date = new Date(sig.lifeTime);\n\n\t\tvar tooltip = \"<table class=\\\"age-tooltip-table\\\"><tr>\"\n        + \"<th>Created:</th><td>\"+(date.getMonth()+1)+\"/\"+date.getDate()+\" \"+(date.getHours() < 10?'0':'')+date.getHours()+\":\"+(date.getMinutes() < 10?'0':'')+date.getMinutes()+\"</td>\"\n        + \"<td>\"+sig.createdByName.replace(/'/g, '&#39;').replace(/\"/g, '&#34;')+\"</td>\"\n        + \"</tr>\";\n\n\t\tif (sig.lifeTime != sig.modifiedTime) {\n\t\t\tdate = new Date(sig.modifiedTime);\n\t\t\t// localOffset = date.getTimezoneOffset() * 60000;\n\t\t\t// date = new Date(date.getTime() + localOffset);\n      \n\t\t\ttooltip += \"<tr><th>Last Modified:</th><td>\"+(date.getMonth()+1)+\"/\"+date.getDate()+\" \"+(date.getHours() < 10?'0':'')+date.getHours()+\":\"+(date.getMinutes() < 10?'0':'')+date.getMinutes()+\"</td>\"\n          + \"<td>\"+sig.modifiedByName.replace(/'/g, '&#39;').replace(/\"/g, '&#34;')+\"</td>\"\n          + \"</tr>\";\n\t\t}\n\n\t\ttooltip += \"</table>\";\n\n\t\treturn tooltip;\n\t}\n\n    this.refresh = function(mode, data, successCallback, alwaysCallback) {\n\t\tvar mode = mode || 'refresh';\n\n\t\tthis.sync(mode, data, successCallback, alwaysCallback);\n\t}\n\n\t// getSystemIDsByNames performs a case-insensitive search of the internal\n\t// list of systems looking for matches on each system name in the given\n\t// comma-separated list of names. A comma-separated list of system IDs is\n\t// returned if all systems are found, otherwise the empty string is returned.\n\tthis.getSystemIDsByNames = function(systemNames) {\n\t\tif (!_this.systems) {\n\t\t\treturn \"\";\n\t\t}\n\t\tconst values = systemNames.split(\",\");\n\t\tconst systems = [];\n\t\tfor(var i = 0; i < values.length; i++) {\n\t\t\tfor (systemID in _this.systems) {\n\t\t\t\tconst system = _this.systems[systemID];\n\t\t\t\tif (system.name.toLowerCase() == values[i].toLowerCase()) {\n\t\t\t\t\tsystems.push(systemID);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (values.length != systems.length) {\n\t\t\treturn \"\";\n\t\t}\n\t\treturn systems.join(\",\");\n\t}\n}\n","$(\"body\").on(\"click\", \"a[href^='.?system=']\", function(e) {\n\te.preventDefault();\n\n\tvar system = $(this).attr(\"href\").replace(\".?system=\", \"\");\n\tvar systemID = Object.index(tripwire.systems, \"name\", system);\n\n\ttripwire.systemChange(systemID);\n});\n\n$(\"body\").on(\"submit\", \"#systemSearch\", function(e) {\n\te.preventDefault();\n\n\tvar system = $(this).find(\"[name='system']\").val();\n\tvar systemID = Object.index(tripwire.systems, \"name\", system, true) || false;\n\n\tif (systemID !== false) {\n\t\ttripwire.systemChange(systemID);\n\t\t$(this).find(\"[name='system']\").val(\"\");\n\t\t$(\"#search\").click();\n\t}\n});\n\n$(\"body\").on(\"click\", \"#undo:not(.disabled)\", function() {\n\ttripwire.undo();\n});\n\n$(\"body\").on(\"click\", \"#redo:not(.disabled)\", function() {\n\ttripwire.redo();\n});\n\n// Bind class=copy to copy the text of the previous element\n$(\".copy\").on('click', function(e) {\n\te.preventDefault();\n\tconst source = e.target.previousElementSibling;\n\tif(source) { navigator.clipboard.writeText(source.innerText); }\n\telse { console.warn('Copy event couldn\\'t find a source', e); }\n});\n\n// Chain map zooming (Gets funky if you push things too far)\n$(\"#chainParent\").on(\"wheel\", function(e) {\n\tif(!(options.chain.scrollWithoutCtrl || e.ctrlKey)) { return; }\n\te.preventDefault();\n\tvar zoom = parseFloat($(\"#chainParent\").css(\"zoom\")) || 1.0;\n\tvar min = 0.6;\n\tvar max = 2.0;\n\n    if (e.originalEvent.wheelDelta / 120 > 0 && zoom < max) {\n\t\t$(\"#chainParent\").css(\"zoom\", zoom + 0.1);\n    } else if (e.originalEvent.wheelDelta / 120 < 0 && zoom > min) {\n\t\t$(\"#chainParent\").css(\"zoom\", zoom - 0.1);\n    }\n\n\t// Show the reset zoom button for awhile\n\t$(\"#chain-zoom-reset\").fadeIn(200);\n\tif (this.timeout) clearTimeout(this.timeout);\n\tthis.timeout = setTimeout('$(\"#chain-zoom-reset\").fadeOut(200);', 3000);\n\n\t// Save options\n\toptions.chain.zoom = parseFloat($(\"#chainParent\").css(\"zoom\"));\n\toptions.saveDelay(2000);\n});\n\n$(\"#chain-zoom-reset\").on(\"click\", function() {\n\t$(\"#chainParent\").css(\"zoom\", 1);\n\toptions.chain.zoom = 1;\n\toptions.saveDelay(2000);\n});\n\n$(document).keydown(function(e)\t{\n\t//Abort - user is in input or textarea\n\tif ($(document.activeElement).is(\"textarea, input\")) return;\n\n\t// Ctrl key hooks\n\tif (e.metaKey || e.ctrlKey) {\n\n\t\tif (e.keyCode === 89 && !$(\"#redo\").hasClass(\"disabled\")) {\n\t\t\t// Ctrl-y redo hook\n\t\t\te.preventDefault();\n\t\t\t$(\"#redo\").click();\n\t\t\tNotify.trigger(\"Redoing last undo\");\n\t\t} else if (e.keyCode === 90 && !$(\"#undo\").hasClass(\"disabled\")) {\n\t\t\t// Ctrl-z undo hook\n\t\t\te.preventDefault();\n\t\t\t$(\"#undo\").click();\n\t\t\tNotify.trigger(\"Undoing last action\");\n\t\t} else if (e.keyCode === 65) {\n\t\t\t// Ctrl-a select all (signatures) hook\n\t\t\te.preventDefault();\n\t\t\t$(\"#sigTable tbody tr\").addClass(\"selected\");\n\t\t\t$(\"#signaturesWidget #delete-signature\").trigger(\"delete:refresh\");\n\t\t} else if (e.keyCode === 67) {\n\t\t\t// Ctrl-c copy selected signatures hook\n\t\t\tif (window.getSelection().toString() === \"\") {\n\t\t\t\tvar output = \"\";\n\t\t\t\t$(\"#sigTable tbody tr.selected\").each(function(row) {\n\t\t\t\t\tvar signature = tripwire.client.signatures[$(this).data(\"id\")];\n\t\t\t\t\tvar row = [];\n\n\t\t\t\t\tif (signature.signatureID) {\n\t\t\t\t\t\trow.push(signature.signatureID.substring(0, 3).toUpperCase() + \"-\" + (signature.signatureID.substring(3, 6) || \"###\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\trow.push(\"null\");\n\t\t\t\t\t}\n\n\t\t\t\t\trow.push(signature.type);\n\t\t\t\t\tif (signature.type === \"wormhole\") {\n\t\t\t\t\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n\t\t\t\t\t\tvar otherSignature = signature.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t\trow.push(wormhole.type || \"null\" );\n\t\t\t\t\t\trow.push(tripwire.systems[signature.systemID] ? tripwire.systems[signature.systemID].name : appData.genericSystemTypes[signature.systemID]);\n\t\t\t\t\t\trow.push(tripwire.systems[otherSignature.systemID] ? tripwire.systems[otherSignature.systemID].name : appData.genericSystemTypes[otherSignature.systemID]);\n\t\t\t\t\t\trow.push(wormhole.life);\n\t\t\t\t\t\trow.push(wormhole.mass);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trow.push(signature.name);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.push(signature.createdByName);\n\t\t\t\t\trow.push(signature.lifeTime);\n\t\t\t\t\trow.push(signature.lifeLength);\n\t\t\t\t\trow.push(signature.lifeLeft);\n\t\t\t\t\trow.push(signature.modifiedByName);\n\t\t\t\t\trow.push(signature.modifiedTime);\n\t\t\t\t\toutput += row.join(options.signatures.copySeparator) + \"\\r\\n\";\n\t\t\t\t});\n\t\t\t\t$(\"#clipboard\").text(output);\n\t\t\t\t$(\"#clipboard\").focus();\n\t\t\t\t$(\"#clipboard\").select();\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// delete key keyhooks\n\t\tif (e.keyCode == 46 && $(\"#sigTable tr.selected\").length > 0) {\n\t\t\t$(\"#delete-signature\").click();\n\t\t}\n\t}\n});\n\n// $(\"#APIclock\").knob({angleArc: 359.9, height: 20, width: 20, max: 60, readOnly: true, displayInput: false, fgColor: \"#CCC\", bgColor: \"#666\"});\n\n$(\"#follow\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"active\"))\n\t\t$(this).removeClass(\"active\");\n\telse\n\t\t$(this).addClass(\"active\");\n\n\toptions.buttons.follow = $(this).hasClass(\"active\");\n\toptions.save();\n})\n\n$(\"#show-viewing\").click(function() {\n\tif ($(this).hasClass(\"active\"))\n\t\t$(this).removeClass(\"active\");\n\telse\n\t\t$(this).addClass(\"active\");\n\n\tchain.redraw();\n\n\toptions.buttons.chainWidget.viewing = $(this).hasClass(\"active\");\n\toptions.save();\n});\n\n$(\"#show-favorite\").click(function() {\n\tif ($(this).hasClass(\"active\"))\n\t\t$(this).removeClass(\"active\");\n\telse\n\t\t$(this).addClass(\"active\");\n\n\tchain.redraw();\n\n\toptions.buttons.chainWidget.favorites = $(this).hasClass(\"active\");\n\toptions.save();\n});\n\n$(\"#system-favorite\").click(function() {\n\tif ($(this).hasClass(\"active\")) {\n\t\t$(this).removeClass(\"active\").attr(\"data-icon\", \"star-empty\");\n\n\t\toptions.favorites.splice(options.favorites.indexOf(parseInt(viewingSystemID)), 1);\n\t} else {\n\t\t$(this).attr(\"data-icon\", \"star\").addClass(\"active\");\n\n\t\toptions.favorites.push(parseInt(viewingSystemID));\n\t}\n\n\tif ($(\"#show-favorite\").hasClass(\"active\"))\n\t\tchain.redraw();\n\n\toptions.save();\n});\n\n$('#favorite-dropdown-toggle').click(function() {\n\tconst target = document.getElementById('favorite-panel');\n\tif(target.style.display === 'none') {\n\t\tconst listWrapper = document.getElementById('favorite-panel-wrapper');\n\t\tlistWrapper.innerHTML = options.favorites.length == 0 ? '<p>You have no favourites. Use the star to add a system.</p>'\n\t\t\t: options.favorites.map(function(f) {\n\t\t\t\tconst systemInfo = systemAnalysis.analyse(f);\n\t\t\t\treturn '<p>' + systemRendering.renderSystem(systemInfo) + '</p>';\n\t\t\t}).join('\\n');\n\t\ttarget.style.display = '';\n\t} else { target.style.display = 'none'; }\n});\n\n$(\"#search\").click(function(e) {\n\t$(\"#searchSpan\").toggle();\n\n\tif ($(this).hasClass(\"active\")) {\n\t\t$(this).removeClass(\"active\");\n\t\tif (tripwire.client.EVE && tripwire.client.EVE.systemName)\n\t\t\t$(\"#currentSpan\").show();\n\t} else {\n\t\t$(this).addClass(\"active\");\n\t\t$(\"#currentSpan\").hide();\n\n\t\t$(\"#searchSpan input[name=system]\").focus().select();\n\t}\n});\n\n$(\"#toggle-automapper\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"active\")) {\n\t\t$(this).removeClass(\"active\");\n\t} else {\n\t\t$(this).addClass(\"active\");\n\t}\n\n\toptions.buttons.signaturesWidget.autoMapper = $(this).hasClass(\"active\");\n\toptions.save();\n});\n\n$(\"#user\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"active\")) {\n\t\t$(this).removeClass(\"active\");\n\n\t\t$(\"#login > #panel\").css({display: \"none\"});\n\n\t\t//$(\"#wrapper\").unbind(\"click\");\n\t} else {\n\t\t$(this).addClass(\"active\");\n\n\t\t$(\"#login > #panel\").css({display: \"inline\"});\n\t\t$(\"#loginForm input[name=username]\").focus().select();\n\t}\n});\n$(\"#wrapper\").click(function(e) { // Click outside closes\n\tif(!(e.originalEvent && e.originalEvent.isInPanel)) {\n\t\t$(\"#login > #panel\").css({display: \"none\"});\n\t\t$(\"#user\").removeClass(\"active\");\n\t}\n});\n$(\"#login\").click(function(e) { // click inside doesn't\n\te.originalEvent.isInPanel = true;\n})\n\n\n$(\"#logout\").click(function() {\n\twindow.location = \"logout.php\";\n});\n\nvar Notify = new function() {\n\tthis.trigger = function(content, color, stick, id) {\n\t\tvar color = typeof(color) !== \"undefined\" ? color : \"blue\";\n\t\tvar stick = typeof(stick) !== \"undefined\" ? stick : 10000;\n\t\tvar id = typeof(id) !== \"undefined\" ? id : null;\n\n\t\tnew jBox(\"Notice\", {\n\t\t\tid: id,\n\t\t\tcontent: content,\n\t\t\toffset: {y: 35},\n\t\t\tanimation: \"flip\",\n\t\t\tcolor: color,\n\t\t\tautoClose: stick\n\t\t});\n\t}\n}\n\n// Init valdiation tooltips\nvar ValidationTooltips = new jBox(\"Tooltip\", {\n\ttrigger: null,\n\taddClass: \"validation-tooltip\",\n\tanimation: \"flip\",\n\tfade: 0\n});\n\nvar Tooltips = new jBox(\"Tooltip\", {\n\tattach: $(\"[data-tooltip]\"),\n\tgetContent: \"data-tooltip\",\n\tposition: {x: \"right\", y: \"center\"},\n\toutside: \"x\"\n});\n\nvar SystemActivityToolTips = new jBox(\"Tooltip\", {\n\tgetContent: \"data-tooltip\",\n\tposition: {y: \"bottom\"},\n\tappendTo: $(\"#chainParent\"),\n\treposition: true,\n\trepositionOnOpen: true,\n\tcreateOnInit: true,\n\toffset: {y: +9, x: +3},\n\tonOpen: function() {\n\t\tvar targetPos = positionRelativeTo(this.target[0], document.getElementById('chainParent'));\n\t\tvar nodePos = this.source.closest(\"[data-nodeid]\").position();\n\t\tvar parentPos = this.source.closest(\".nodeActivity\").position();\n\t\tvar nodeHeight = this.source.closest(\"[data-nodeid]\").height();\n\t\t// var nodeWidth = this.source.closest(\"[data-nodeid]\").width();\n\t\tvar tooltipWidth = this.container.parent().width();\n\t\t// var tooltipHeight = this.container.parent().height();\n\n\t\tthis.options.position = {x: targetPos.left + 3 - tooltipWidth /2 , y: targetPos.top + this.target[0].offsetHeight};\n\t}\n});\n\nvar WormholeRouteToolTips = new jBox(\"Tooltip\", {\n\tgetContent: \"data-tooltip\",\n\tposition: {y: \"bottom\"},\n\tappendTo: $(\"#chainParent\"),\n\treposition: true,\n\trepositionOnOpen: true,\n\tcreateOnInit: true,\n\toffset: {y: +9, x: +3},\n\tonOpen: function() {\n\t\tvar targetPos = positionRelativeTo(this.target[0], document.getElementById('chainParent'));\n\t\tvar nodeHeight = this.source.closest(\"[data-nodeid]\").height();\n\t\t// var nodeWidth = this.source.closest(\"[data-nodeid]\").width();\n\t\tvar tooltipWidth = this.container.parent().width();\n\t\t// var tooltipHeight = this.container.parent().height();\n\t\t\n\t\tthis.options.position = {x: targetPos.left + 3 - tooltipWidth /2 , y: targetPos.top + this.target[0].offsetHeight};\n\t}\n});\n\nvar WormholeTypeToolTips = new jBox(\"Tooltip\", {\n\tattach: $(\"#chainMap .whEffect[data-icon]\"),\n\tgetContent: \"data-tooltip\",\n\tposition: {x: \"left\", y: \"center\"},\n\tappendTo: $(\"#chainParent\"),\n\toutside: \"x\",\n\tadjustDistance: 100,\n\tresponsiveWidth: false,\n\treposition: true,\n\trepositionOnOpen: true,\n\tcreateOnInit: true,\n\toffset: {y: +9, x: +3},\n\tonOpen: function() {\n\t\tvar targetPos = positionRelativeTo(this.target[0], document.getElementById('chainParent'));\n\t\tvar tooltipWidth = this.container.parent().width();\n\n\t\tthis.options.position = {x: targetPos.left - tooltipWidth - 10, y: targetPos.top - 3};\n\t}\n});\n\nvar OccupiedToolTips = new jBox(\"Tooltip\", {\n\tpointer: \"top:-3\",\n\tposition: {x: \"right\", y: \"center\"},\n\tappendTo: $(\"#chainParent\"),\n\toutside: \"x\",\n\tminWidth: 100,\n\tanimation: \"move\",\n\tadjustDistance: 100,\n\tresponsiveWidth: false,\n\treposition: true,\n\trepositionOnOpen: true,\n\trepositionOnContent: true,\n\tcreateOnInit: true,\n\toffset: {y: +9, x: +3},\n\tonOpen: function() {\n\t\tvar tooltip = this;\n\t\tconst nodeElemJ = this.source.closest(\"[data-nodeid]\");\n\t\tvar systemID = nodeElemJ.data(\"nodeid\");\n\t\tvar targetPos = positionRelativeTo(this.target[0], document.getElementById('chainParent'));\n\n\t\tthis.options.position = {x: targetPos.left + this.target[0].offsetWidth, y: targetPos.top - 3};\n\n\t\ttooltip.setContent(\"&nbsp;\");\n\n\t\t$.ajax({\n\t\t\turl: \"occupants.php\",\n\t\t\tdataType: \"JSON\",\n\t\t\tdata: \"systemID=\"+systemID,\n\t\t\tcache: false\n\t\t}).done(function(data) {\n\t\t\tif (data && data.occupants) {\n\t\t\t\tvar chars = \"<table>\";\n\n\t\t\t\t// Sort by characterName\n\t\t\t\tdata.occupants.sort(function(a, b) {\n\t\t\t\t\tif (a.characterName.toLowerCase() < b.characterName.toLowerCase()) return -1;\n\t\t\t\t\tif (a.characterName.toLowerCase() > b.characterName.toLowerCase()) return 1;\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\n\t\t\t\tfor (var x in data.occupants) {\n\t\t\t\t\tchars += \"<tr><td>\"+data.occupants[x].characterName+\"</td><td style='padding-left: 10px;'>\"+(data.occupants[x].shipTypeName?data.occupants[x].shipTypeName:\"\")+\"</td></tr>\";\n\t\t\t\t}\n\n\t\t\t\tchars += \"</table>\";\n\t\t\t\ttooltip.setContent(chars);\n\t\t\t}\n\t\t});\n\t}\n});\n\n$(\"#chainTabs\").sortable({\n\titems: \"> .tab\",\n\taxis: \"x\",\n\tdelay: 150,\n\ttolerance: \"pointer\",\n\tcontainment: \"parent\",\n\tupdate: function(e, ui) {\n\t\tvar result = $(\"#chainTabs\").sortable(\"toArray\");\n\t\tvar newTabs = [];\n\n\t\tfor (var x in result) {\n\t\t\tnewTabs.push(options.chain.tabs[result[x]]);\n\t\t\t$(\"#chainTabs .tab:eq(\"+x+\")\").attr(\"id\", x);\n\t\t}\n\n\t\toptions.chain.active = $(\".tab.current\").index();\n\t\toptions.chain.tabs = newTabs;\n\t\toptions.save();\n\t}\n});\n\n$(\"#chainTabs\").on(\"click\", \".tab\", function(e) {\n\te.preventDefault();\n\tchain.setActiveTab($(this).hasClass(\"current\") ? null : $(this).index())\n});\n\n$(\"#chainTabs\").on(\"click\", \".closeTab\", function(e) {\n\te.stopPropagation();\n\tvar $tab = $(this).closest(\".tab\");\n\n\t$(\"#dialog-confirm #msg\").html(\"This tab will be removed, are you sure?\");\n\t$(\"#dialog-confirm\").dialog(\"option\", {\n\t\tbuttons: {\n\t\t\t\"Remove Tab\": function() {\n\t\t\t\tvar i = $tab.index();\n\n\t\t\t\toptions.chain.active = $(\".tab.current\").index();\n\t\t\t\toptions.chain.tabs.splice(i, 1);\n\t\t\t\toptions.save();\n\n\t\t\t\t$tab.remove();\n\t\t\t\tif ($(\"#chainTabs .tab.current\").length == 0) {\n\t\t\t\t\t$(\"#chainTabs .tab:last\").click();\n\t\t\t\t}\n\n\t\t\t\tfor (var x = 0, l = $(\"#chainTabs .tab\").length; x < l; x++) {\n\t\t\t\t\t$(\"#chainTabs .tab:eq(\"+x+\")\").attr(\"id\", x);\n\t\t\t\t}\n\n\t\t\t\t$(this).dialog(\"close\");\n\t\t\t},\n\t\t\tCancel: function() {\n\t\t\t\t$(this).dialog(\"close\");\n\t\t\t}\n\t\t}\n\t}).dialog(\"open\");\n});\n\n$(\"#newTab\").on(\"click\", function() {\n\t// check if dialog is open\n\tif (!$(\"#dialog-newTab\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-newTab\").dialog({\n\t\t\tresizable: false,\n\t\t\tminHeight: 0,\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tOK: function() {\n\t\t\t\t\t$(\"#newTab_form\").submit();\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\t$(\"#dialog-newTab .name\").val(viewingSystem).focus();\n\t\t\t\t$(\"#dialog-newTab .sigSystemsAutocomplete\").val(viewingSystem);\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\tValidationTooltips.close();\n\t\t\t},\n\t\t\tcreate: function() {\n\t\t\t\t$(\"#dialog-newTab .sigSystemsAutocomplete\").inlinecomplete({source: tripwire.aSigSystems, maxSize: 10, delay: 0, renderer: 'system'});\n\n\t\t\t\t$(\"#newTab_form\").submit(function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar $tab = $(\"#chainTab .tab\").clone();\n\t\t\t\t\tvar name = $(\"#dialog-newTab .name\").val();\n\t\t\t\t\tvar systemID = tripwire.getSystemIDsByNames($(\"#dialog-newTab .sigSystemsAutocomplete\").val());\n\t\t\t\t\tvar thera = $(\"#tabThera\")[0].checked ? true : false;\n\n\t\t\t\t\tif (!name) {\n\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-newTab .name\")}).setContent(\"Must have a name!\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (!systemID && $(\"#tabType1\")[0].checked) {\n\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-newTab .sigSystemsAutocomplete\")}).setContent(\"Must have valid systems (comma separated if multiple)!\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if ($(\"#tabType2\")[0].checked) {\n\t\t\t\t\t\tsystemID = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t$tab.attr(\"id\", $(\"#chainTabs .tab\").length).find(\".name\").data(\"tab\", systemID).html(name);\n\t\t\t\t\toptions.chain.tabs.push({systemID: systemID, name: name, evescout: thera});\n\t\t\t\t\toptions.save();\n\n\t\t\t\t\t$(\"#chainTabs\").append($tab);\n\n\t\t\t\t\t$(\"#dialog-newTab\").dialog(\"close\");\n\t\t\t\t});\n\n\t\t\t\t$(\"#dialog-newTab .sigSystemsAutocomplete\").click(function(e) {\n\t\t\t\t\t$(\"#dialog-newTab #tabType1\").click();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-newTab\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-newTab\").dialog(\"open\");\n\t}\n});\n\n$(\"#chainTabs\").on(\"click\", \".editTab\", function(e) {\n\te.stopPropagation();\n\n\t// check if dialog is open\n\tif (!$(\"#dialog-editTab\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-editTab\").dialog({\n\t\t\tresizable: false,\n\t\t\tminHeight: 0,\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tOK: function() {\n\t\t\t\t\t$(\"#editTab_form\").submit();\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\t$(\"#dialog-editTab .name\").val(options.chain.tabs[options.chain.active].name).focus();\n\t\t\t\t$(\"#dialog-editTab .sigSystemsAutocomplete\").val(options.chain.tabs[options.chain.active].systemID != 0 ? lookupMultiple(tripwire.systems, 'name', options.chain.tabs[options.chain.active].systemID) : \"\");\n\t\t\t\toptions.chain.tabs[options.chain.active].systemID != 0 ? $(\"#dialog-editTab #editTabType1\")[0].checked = true : $(\"#dialog-editTab #editTabType2\")[0].checked = true;\n\t\t\t\t$(\"#dialog-editTab #editTabThera\")[0].checked = options.chain.tabs[options.chain.active].evescout;\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\tValidationTooltips.close();\n\t\t\t},\n\t\t\tcreate: function() {\n\t\t\t\t$(\"#dialog-editTab .sigSystemsAutocomplete\").inlinecomplete({source: tripwire.aSigSystems, renderer: 'system', maxSize: 10, delay: 0});\n\n\t\t\t\t$(\"#editTab_form\").submit(function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar $tab = $(\"#chainTabs .tab\").eq([options.chain.active]);\n\t\t\t\t\tvar name = $(\"#dialog-editTab .name\").val();\n\t\t\t\t\tvar systemID = tripwire.getSystemIDsByNames($(\"#dialog-editTab .sigSystemsAutocomplete\").val());\n\t\t\t\t\tvar thera = $(\"#editTabThera\")[0].checked ? true : false;\n\n\t\t\t\t\tif (!name) {\n\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-editTab .name\")}).setContent(\"Must have a name!\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (!systemID && $(\"#editTabType1\")[0].checked) {\n\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-editTab .sigSystemsAutocomplete\")}).setContent(\"Must have valid systems (comma separated if multiple)!\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if ($(\"#editTabType2\")[0].checked) {\n\t\t\t\t\t\tsystemID = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t$tab.attr(\"id\", $(\"#chainTabs .tab\").length).find(\".name\").data(\"tab\", systemID).html(name);\n\t\t\t\t\toptions.chain.tabs[options.chain.active] = {systemID: systemID, name: name, evescout: thera};\n\t\t\t\t\toptions.save();\n\t\t\t\t\tchain.redraw();\n\n\t\t\t\t\ttripwire.parse(tripwire.client, \"refresh\");\n\n\t\t\t\t\t//$(\"#chainTabs\").append($tab);\n\n\t\t\t\t\t$(\"#dialog-editTab\").dialog(\"close\");\n\t\t\t\t});\n\n\t\t\t\t$(\"#dialog-editTab .sigSystemsAutocomplete\").click(function(e) {\n\t\t\t\t\t$(\"#dialog-editTab #editTabType1\").click();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-editTab\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-editTab\").dialog(\"open\");\n\t}\n});\n\n// Signature column context menu\n$(\"#signaturesWidget #sigTable thead\").contextmenu({\n\tdelegate: \"th.sortable\",\n\tmenu: \"#signatureColumnMenu\",\n\tposition: function(event, ui) {\n        return {my: \"left top\", at: \"center\", of: ui.target};\n    },\n\tselect: function(e, ui) {\n\t\tvar col = $(ui.target).parent().parent().children().index($(ui.target).parent()) + 1;\n\n\t\tswitch(col) {\n\t\t\tcase 1:\n\t\t\t\tcolName = \"sigID\";\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcolName = \"sigType\";\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tcolName = \"sigAge\";\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tcolName = \"leadsTo\";\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tcolName = \"sigLife\";\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tcolName = \"sigMass\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch(ui.cmd) {\n\t\t\tcase \"leftAlign\":\n\t\t\t\t$(\"#signaturesWidget #sigTable tbody td:nth-child(\"+ col +\")\").removeClass(\"centerAlign rightAlign\").addClass(\"leftAlign\");\n\t\t\t\toptions.signatures.alignment[colName] = \"leftAlign\";\n\t\t\t\tbreak;\n\t\t\tcase \"centerAlign\":\n\t\t\t\t$(\"#signaturesWidget #sigTable tbody td:nth-child(\"+ col +\")\").removeClass(\"leftAlign rightAlign\").addClass(\"centerAlign\");\n\t\t\t\toptions.signatures.alignment[colName] = \"centerAlign\";\n\t\t\t\tbreak;\n\t\t\tcase \"rightAlign\":\n\t\t\t\t$(\"#signaturesWidget #sigTable tbody td:nth-child(\"+ col +\")\").removeClass(\"centerAlign leftAlign\").addClass(\"rightAlign\");\n\t\t\t\toptions.signatures.alignment[colName] = \"rightAlign\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\toptions.save();\n\t},\n\tbeforeOpen: function(e, ui) {\n\t\tvar col = $(ui.target).parent().parent().children().index($(ui.target).parent()) + 1;\n\n\t\tswitch(col) {\n\t\t\tcase 1:\n\t\t\t\tcolName = \"sigID\";\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcolName = \"sigType\";\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tcolName = \"sigAge\";\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tcolName = \"leadsTo\";\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tcolName = \"sigLife\";\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tcolName = \"sigMass\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\t$(this).contextmenu(\"enableEntry\", \"leftAlign\", true);\n\t\t$(this).contextmenu(\"enableEntry\", \"centerAlign\", true);\n\t\t$(this).contextmenu(\"enableEntry\", \"rightAlign\", true);\n\n\t\t$(this).contextmenu(\"enableEntry\", options.signatures.alignment[colName], false);\n\t}\n});\n\n// Chain Map Context Menu\n$(\"#chainParent\").contextmenu({\n\tdelegate: \".nodeSystem a\",\n\tposition: function(event, ui) {\n        return {my: \"left top-1\", at: \"right top\", of: ui.target};\n    },\n\tmenu: \"#chainMenu\",\n\tshow: {effect: \"slideDown\", duration: 150},\n\tselect: function(e, ui) {\n\t\tconst nodeElem = $(ui.target[0]).closest(\"[data-nodeid]\");\n\t\tvar id = nodeElem.data(\"nodeid\");\n\t\tvar row = nodeElem.attr(\"id\").replace(\"node\", \"\") -1;\n\n\t\tswitch(ui.cmd) {\n\t\t\tcase \"showInfo\":\n\t\t\t\ttripwire.esi.showInfo(id, options.tracking.active);\n\t\t\t\tbreak;\n\t\t\tcase \"setDest\":\n\t\t\t\ttripwire.esi.setDestination(id, options.tracking.active, true);\n\t\t\t\tbreak;\n\t\t\tcase \"addWay\":\n\t\t\t\ttripwire.esi.setDestination(id, options.tracking.active, false);\n\t\t\t\tbreak;\n\t\t\tcase \"setDestAll\":\n\t\t\tcase \"addWayAll\":\n\t\t\t\tfor(const characterId in tripwire.esi.characters) {\n\t\t\t\t\ttripwire.esi.setDestination(id, characterId, ui.cmd == \"setDestAll\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"showMap\":\n\t\t\t\t// CCPEVE.showMap(id);\n\t\t\t\tbreak;\n\t\t\tcase \"red\":\n\t\t\t\tnodeElem.hasClass(\"redNode\") ? $(this).contextmenu(\"removeFlare\", id, ui) : $(this).contextmenu(\"setFlare\", id, ui.cmd, ui);\n\t\t\t\tbreak;\n\t\t\tcase \"yellow\":\n\t\t\t\tnodeElem.hasClass(\"yellowNode\") ? $(this).contextmenu(\"removeFlare\", id, ui) : $(this).contextmenu(\"setFlare\", id, ui.cmd, ui);\n\t\t\t\tbreak;\n\t\t\tcase \"green\":\n\t\t\t\tnodeElem.hasClass(\"greenNode\") ? $(this).contextmenu(\"removeFlare\", id, ui) : $(this).contextmenu(\"setFlare\", id, ui.cmd, ui);\n\t\t\t\tbreak;\n\t\t\tcase \"mass\":\n\t\t\t\t$(\"#dialog-mass\").data(\"id\", nodeElem.data(\"sigid\")).data(\"systemID\", id).dialog(\"open\");\n\t\t\t\tbreak;\n\t\t\tcase \"ping\":\n\t\t\t\t$(\"#dialog-ping\").data(\"id\", nodeElem.data(\"sigid\") || null).data(\"systemID\", id).dialog(\"open\");\n\t\t\t\tbreak;\n\t\t\tcase \"collapse\":\n\t\t\t\tvar toggle = options.chain.tabs[options.chain.active] ? ($.inArray(id, options.chain.tabs[options.chain.active].collapsed) == -1 ? true : false) : true;\n\t\t\t\tchain.renderer.collapse(id, toggle);\n\t\t\t\tbreak;\n\t\t\tcase \"copySystemName\": \n\t\t\t\tconst systemName = tripwire.systems[id].name;\n\t\t\t\tnavigator.clipboard.writeText(systemName); \n\t\t\t\tbreak;\n\t\t\tcase \"makeTab\":\n\t\t\t\tconst existingTabIndex = Object.index(options.chain.tabs, 'systemID', '' + id, false);\n\t\t\t\tif(undefined !== existingTabIndex) {\n\t\t\t\t\tchain.setActiveTab(existingTabIndex);\n\t\t\t\t} else {\n\t\t\t\t\tconst systemName = tripwire.systems[id].name;\n\t\t\t\t\toptions.chain.tabs.push({systemID: '' + id, name: systemName});\n\t\t\t\t\tvar newTab = $(\"#chainTab .tab\").clone();\n\t\t\t\t\tnewTab.attr('id', options.chain.tabs.length - 1).find(\".name\").data(\"tab\", id).html(systemName);\n\t\t\t\t\t$(\"#chainTabs\").append(newTab);\n\t\t\t\t\tchain.setActiveTab(options.chain.tabs.length - 1);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tbeforeOpen: function(e, ui) {\n\t\tvar wormholeID = $(ui.target[0]).closest(\"[data-nodeid]\").data(\"sigid\") || null;\n\t\tvar systemID = $(ui.target[0]).closest(\"[data-nodeid]\").data(\"nodeid\");\n\t\tconst systemName = tripwire.systems[systemID].name;\n\n\t\t// Add check for k-space\n\t\tif (tripwire.systems[systemID].class || !tripwire.esi.characters[options.tracking.active]) {\n\t\t\t$(this).contextmenu(\"enableEntry\", \"setDest\", false);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"addWay\", false);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"setDestAll\", false);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"addWayAll\", false);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"showMap\", false);\n\t\t} else {\n\t\t\t$(this).contextmenu(\"enableEntry\", \"setDest\", true);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"addWay\", true);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"setDestAll\", true);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"addWayAll\", true);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"showMap\", false);\n\t\t}\n\t\t\n\t\t// Add check for in-sig\n\t\tif (wormholeID) {\n\t\t\t$(this).contextmenu(\"enableEntry\", \"mass\", true);\n\t\t} else {\n\t\t\t$(this).contextmenu(\"enableEntry\", \"mass\", false);\n\t\t}\n\t\t\n\t\t// Add check for tab validity\n\t\tconst existingTab = Object.find(options.chain.tabs, 'systemID', '' + systemID, false);\n\t\t$('#makeTabMenuItem').text((existingTab ? 'View Tab' : 'Make Tab') + ' for ' + systemName );\n\t\t$('#copySystemNameMenuItem').text('Copy \"' + systemName + '\"');\n\t},\n\tcreate: function(e, ui) {\n\t\t// Fix some bad CSS from jQuery Position\n\t\tconst menuElem = document.getElementById('chainMenu');\n\t\t$(menuElem).css(\"width\", \"auto\");\n\t\t$(menuElem).find(\".ui-front\").css(\"width\", \"auto\");\n\t\t$(menuElem).find(\".ui-front\").css(\"position\", \"\");\n\n\t\t$.moogle.contextmenu.prototype.setFlare = function(systemID, flare, ui) {\n\t\t\tvar data = {\"systemID\": systemID, \"flare\": flare};\n\n\t\t\t$.ajax({\n\t\t\t\turl: \"flares.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: data,\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(data) {\n\t\t\t\tif (data && data.result) {\n\t\t\t\t\t// $(ui.target[0]).closest(\"td\").removeClass(\"redNode yellowNode greenNode\").addClass(flare+\"Node\");\n\n\t\t\t\t\tchain.data.flares.flares.push({systemID: systemID, flare: flare, time: null});\n\t\t\t\t\tchain.flares(chain.data.flares);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$.moogle.contextmenu.prototype.removeFlare = function(systemID, ui) {\n\t\t\tvar data = {\"systemID\": systemID};\n\n\t\t\t$.ajax({\n\t\t\t\turl: \"flares.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: data,\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(data) {\n\t\t\t\tif (data && data.result) {\n\t\t\t\t\t// $(ui.target[0]).closest(\"td\").removeClass(\"redNode yellowNode greenNode\");\n\n\t\t\t\t\tchain.data.flares.flares.splice(Object.index(chain.data.flares.flares, \"systemID\", systemID), 1);\n\t\t\t\t\tchain.flares(chain.data.flares);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n\n/** Format a signature ID like abc123 as ABC-123 for user display */\nfunction formatSignatureID(signatureID) {\n\treturn (!signatureID) ? '???-###' :\n\t\t(signatureID.length >= 3 ? signatureID.substring(0, 3).toUpperCase() : '') + \"-\" + (signatureID.length == 6 ? signatureID.substring(3, 6) : \"###\");\n}\n\n// Used to generate eve-survival guide link\nfunction linkSig(sigName) {\n\tvar wormholeSignatures = [\n\t\t// Ore sites\n\t\t\"Average Frontier Deposit\",\n\t\t\"Unexceptional Frontier Deposit\",\n\t\t\"Common Perimeter Deposit\",\n\t\t\"Exceptional Core Deposit\",\n\t\t\"Infrequent Core Deposit\",\n\t\t\"Unusual Core Deposit\",\n\t\t\"Rarified Core Deposit\",\n\t\t\"Isolated Core Deposit\",\n\t\t\"Ordinary Permiter Deposit\",\n\t\t\"Uncommon Core Deposit\",\n\n\t\t// Gas Sites\n\t\t\"Barren Perimeter Reservoir\",\n\t\t\"Minor Perimeter Reservoir\",\n\t\t\"Ordinary Perimeter Reservoir\",\n\t\t\"Sizeable Perimeter Reservoir\",\n\t\t\"Token Perimeter Reservoir\",\n\t\t\"Bountiful Frontier Reservoir\",\n\t\t\"Vast Frontier Reservoir\",\n\t\t\"Instrumental Core Reservoir\",\n\t\t\"Vital Core Reservoir\",\n\n\t\t// Class 1\n\t\t\"Perimeter Ambush Point\",\n\t\t\"Perimeter Camp\",\n\t\t\"Phase Catalyst Node\",\n\t\t\"The Line\",\n\t\t\"Forgotten Perimeter Coronation Platform\",\n\t\t\"Forgotten Perimeter Power Array\",\n\t\t\"Unsecured Perimeter Amplifier\",\n\t\t\"Unsecured Perimeter Information Center\",\n\n\t\t// Class 2\n\t\t\"Perimeter Checkpoint\",\n\t\t\"Perimeter Hangar\",\n\t\t\"The Ruins of Enclave Cohort 27\",\n\t\t\"Sleeper Data Sanctuary\",\n\t\t\"Forgotten Perimeter Gateway\",\n\t\t\"Forgotten Perimeter Habitation Coils\",\n\t\t\"Unsecured Perimeter Comms Relay\",\n\t\t\"Unsecured Perimeter Transponder Farm\",\n\n\t\t// Class 3\n\t\t\"Fortification Frontier Stronghold\",\n\t\t\"Outpost Frontier Stronghold\",\n\t\t\"Solar Cell\",\n\t\t\"The Oruze Construct\",\n\t\t\"Forgotten Frontier Quarantine Outpost\",\n\t\t\"Forgotten Frontier Recursive Depot\",\n\t\t\"Unsecured Frontier Database\",\n\t\t\"Unsecured Frontier Receiver\",\n\n\t\t// Class 4\n\t\t\"Frontier Barracks\",\n\t\t\"Frontier Command Post\",\n\t\t\"Integrated Terminus\",\n\t\t\"Sleeper Information Sanctum\",\n\t\t\"Forgotten Frontier Conversion Module\",\n\t\t\"Forgotten Frontier Evacuation Center\",\n\t\t\"Unsecured Frontier Digital Nexus\",\n\t\t\"Unsecured Frontier Trinary Hub\",\n\n\t\t// Class 5\n\t\t\"Core Garrison\",\n\t\t\"Core Stronghold\",\n\t\t\"Oruze Osobnyk\",\n\t\t\"Quarantine Area\",\n\t\t\"Forgotten Core Data Field\",\n\t\t\"Forgotten Core Information Pen\",\n\t\t\"Unsecured Frontier Enclave Relay\",\n\t\t\"Unsecured Frontier Server Bank\",\n\n\t\t// Class 6\n\t\t\"Core Citadel\",\n\t\t\"Core Bastion\",\n\t\t\"Strange Energy Readings\",\n\t\t\"The Mirror\",\n\t\t\"Forgotten Core Assembly Hall\",\n\t\t\"Forgotten Core Circuitry Disassembler\",\n\t\t\"Unsecured Core Backup Array\",\n\t\t\"Unsecured Core Emergence\"\n\t];\n\n\tif (wormholeSignatures.indexOf(sigName) > -1) {\n\t\treturn '<a href=\"https://eve-survival.org/wikka.php?wakka='+sigName.replace(/ /g, '')+'\" target=\"_blank\" class=\"siteLink\">'+sigName+'</a>';\n\t}\n\n\treturn sigName;\n}\n\n// Initialize tablesorter plugin on signaturesWidget table\n$(\"#sigTable\").tablesorter({\n\tsortReset: true,\n\twidgets: ['saveSort'],\n\ttextExtraction: {\n\t\t2: function(node) { return $(node).find(\"span\").data(\"age\"); }\n\t}\n});\n\n// Highlight signaturesWidget tr on click\n$(\"#sigTable tbody\").on(\"click\", \"tr\", function(e) {\n\tif (e.metaKey || e.ctrlKey) {\n\t\t// ctrl or cmd key\n\t\t$(this).toggleClass(\"selected\");\n\t} else if (e.shiftKey) {\n\t\t// shift key\n\t\t$(this).addClass(\"selected\");\n\t\t$(\"#sigTable tbody tr.selected:first\").nextUntil(\"#sigTable tbody tr.selected:last\").addBack().add(\"#sigTable tbody tr.selected:last\").addClass(\"selected\");\n\t} else {\n\t\t$(\"#sigTable tbody tr.selected\").removeClass(\"selected\");\n\t\t$(this).addClass(\"selected\");\n\t}\n});\n\n// Un-Highlight signaturesWidget tr on clicking outside\n$(document).click(function(e) {\n    if(!$(e.target).closest('#sigTable tbody').length && !$(e.target).closest('#edit-signature').length && !$(e.target).closest('#delete-signature').length) {\n\t\t$(\"#sigTable tbody tr.selected\").removeClass(\"selected\");\n    }\n});\n\n// Monitor custom 'classchange' event\n$(\"#sigTable tbody\").on(\"classchange\", \"tr\", function(e, className) {\n\t// Trigger signaturesWidget selected row change custom event\n\tif (className === \"selected\") {\n\t\t$(\"#signaturesWidget\").trigger(\"selected:change\");\n\t}\n});\n\n// Update signaturesWidget based on .selected rows change\n$(\"#signaturesWidget\").on(\"selected:change\", function() {\n\t// Enable/Disable delete icon\n\tif ($(\"#sigTable tr.selected\").length === 0) {\n\t\t$(\"#signaturesWidget #delete-signature\").addClass(\"disabled\");\n\t} else {\n\t\t$(\"#signaturesWidget #delete-signature\").removeClass(\"disabled\");\n\t}\n\n\t// Enable/Disable edit icon\n\tif ($(\"#sigTable tr.selected\").length === 1) {\n\t\t$(\"#signaturesWidget #edit-signature\").removeClass(\"disabled\");\n\t} else {\n\t\t$(\"#signaturesWidget #edit-signature\").addClass(\"disabled\");\n\t}\n})\n\n$(\"#dialog-error\").dialog({\n\tautoOpen: false,\n\tresizable: false,\n\tminHeight: 0,\n\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\tbuttons: {\n\t\tOk: function() {\n\t\t\t$(this).dialog(\"close\");\n\t\t}\n\t},\n\tcreate: function() {\n\t\t$(this).dialog(\"option\", \"show\", {effect: \"shake\", duration: 150, easing: \"easeOutElastic\"});\n\t}\n});\n\n$(\"#dialog-msg\").dialog({\n\tautoOpen: false,\n\tresizable: false,\n\tminHeight: 0,\n\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\tbuttons: {\n\t\tOk: function() {\n\t\t\t$(this).dialog(\"close\");\n\t\t}\n\t}\n});\n\n$(\"#dialog-confirm\").dialog({\n\tautoOpen: false,\n\tresizable: false,\n\tminHeight: 0,\n\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\tbuttons: {\n\t\tCancel: function() {\n\t\t\t$(this).dialog(\"close\");\n\t\t}\n\t}\n});\n\nif (window.location.href.indexOf(\"galileo\") != -1) {\n\tNotify.trigger(\"This is the test version of Tripwire.<br/>Please use <a href='https://tripwire.cloud-things.com'>Tripwire</a>\")\n}\n","/** Functions for rendering things relating to wormholes */\nconst wormholeRendering = new function() { \n\t/** Render a wormhole type (from appData.wormholes).\n\t* @param type The type object e.g. appData.wormholes.B274\n\t* @param key The wormhole type e.g. 'B274'\n\t* @param from What system, or type of system e.g. 'Class-2' the wormhole comes from. If omitted, the type object will be used\n\t* @param target As above but for the target of the wormhole\n\t*/\n\tthis.renderWormholeType = function(type, key, from, target) {\n\t\treturn ((key || type.key) ? '<b>' + (key || type.key || '') + '</b>: ' : '') +\n\t\t\tformatEndTypes(type.from, from) + '➔' + formatEndTypes(type.leadsTo, target) +\n\t\t\t(type.jump ? ' (' + this.renderMass(type.jump) + ')' : '')\n\t\t\t;\n\t};\n\t\n\t/** Render a mass number. */\n\tthis.renderMass = function(mass) { return Math.trunc(mass / 1e6) + 'kt'; }\n\t\n\tfunction formatEndTypes(types, override) {\n\t\tif(!types) { return '?'; }\n\t\ttypes = Array.isArray(types) ? types : [ types ];\n\t\t\n\t\tif(override) {\n\t\t\tconst overrideSystem = override.name ? override :\n\t\t\t\tsystemAnalysis.analyse(Object.index(appData.systems, \"name\", override, true) || override);\t// look up real system ID first\n\t\t\t\n\t\t\tconst eligibleTypes = types.filter(function(type) {\n\t\t\t\treturn overrideSystem.name == type || overrideSystem.genericSystemType == type;\n\t\t\t});\n\t\t\t\n\t\t\tif(eligibleTypes.length) { types = eligibleTypes; }\n\t\t}\n\t\t\n\t\treturn types.map(function(type) {\n\t\t\tconst systemID = Object.index(appData.systems, \"name\", type, true) || type;\t// look up real system ID first\n\t\t\tconst system = systemAnalysis.analyse(systemID);\n\t\t\treturn system ? '<span class=\"' + system.systemTypeClass + '\">' + (system.name || system.systemTypeName) + '</span>' : undefined }\n\t\t).filter(function(x) { return x !== undefined; }).join(',');\n\t};\n}","// Custom inlinecomplete + dropdown input\n$.widget(\"custom.inlinecomplete\", $.ui.autocomplete, {\n\t_create: function() {\n\t\tthis.options.source = this._coerceSource(this.options.source);\n\t\t\n\t\tif (!this.element.is(\"input\")) {\n\t\t\tthis._selectInit();\n\t\t}\n\n\t\t// Invoke the parent function\n\t\treturn this._super();\n\t},\n\t_value: function() {\n\t\t// Invoke the parent function\n\t\tvar originalReturn = this._superApply(arguments);\n\n\t\tthis.element.change();\n\n\t\treturn originalReturn;\n\t},\n\t_suggest: function(items) {\n\t\t// if (this.element.val() != items[0].value) {\n\t\t\t// this.element.val(items[0].value.substr(0, this.element.val().length));\n\t\t// }\n\n\t\t// Invoke the parent function\n\t\treturn this._super(items);\n\t},\n\t_coerceSource: function(source) {\n\t\t// Allow an object source like tripwire.systems - coerce it to an array\n\t\treturn $.isArray(source) ? source :\n\t\t\tObject.keys(source).map(function(k) { return Object.assign({ key: k }, source[k]); }.bind(this) );\n\t},\n\t_initSource: function() {\n\t\tthis.source = function(request, response) {\n\t\t\tvar matcher = new RegExp(\"^\" + $.ui.autocomplete.escapeRegex(request.term), \"i\");\n\t\t\tvar results = new Array(); // results array\n\t\t\tconst dataSource = this.options.source;\n\t\t\tvar maxSize = this.options.maxSize || 25; // maximum result size\n\t\t\t// simple loop for the options\n\t\t\tfor (var i = 0, l = dataSource.length; i < l; i++) {\n\t\t\t\tconst target = dataSource[i].name || dataSource[i].key || dataSource[i];\n\t\t\t\tif (matcher.test(target)) {\n\t\t\t\t\tresults.push( { value: target, label: target, content: typeof dataSource[i] === 'object' ? dataSource[i] : undefined });\n\n\t\t\t\t\tif (maxSize && request.term !== '' && results.length > maxSize) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t // send response\n\t\t\t response(results);\n\t\t}\n\t},\t\n\t_renderItem: function( ul, item ) {\n\t\tif(item.content && this.options.renderer) {\n\t\t\tconst renderFunction = typeof this.options.renderer === 'function' ? this.options.renderer : renderers[this.options.renderer];\n\t\t\tconst renderResult = renderFunction(item.content);\n\t\t\treturn $( \"<li>\" )\n\t\t\t.html( '<span>' + renderResult + '</span>')\n\t\t\t.appendTo( ul );\n\t\t} else return this._super(ul, item);\n\t},\n\t_close: function(event) {\n\t\tthis.options.source = this.options.input_source ? this.options.input_source : this.options.source;\n\n\t\t// Invoke the parent function\n\t\treturn this._super(event);\n\t},\n\taddToSelect: function(value) {\n\t\tthis.options.select_added_value = value;\n\t\tthis.options.select_source.unshift(value);\n\t},\n\tremoveFromSelect: function(value) {\n\t\tif (value) {\n\t\t\tthis.options.select_source.splice(value, 1);\n\t\t} else if (this.options.select_added_value) {\n\t\t\tthis.options.select_source.splice(this.options.select_added_value, 1);\n\t\t}\n\t\tthis.options.select_added_value = null;\n\t},\n\t_selectInit: function() {\n\t\tthis.element.addClass(\"custom-combobox\");\n\t\tthis.wrapper = this.element;\n\t\tthis.element = this.wrapper.find(\"input:first\") || this.element;\n\t\tthis.select = this.wrapper.find(\"select:first\").remove();\n\n\t\tthis.options.input_source = this.options.source;\n\t\tconst selectItemMapper = this.options.select_item_mapper || function(x) { return x; };\n\t\tthis.options.select_source = selectItemMapper(this.select.children(\"option[value!='']\").map(function() { return $.trim(this.text); }).toArray());\n\n\t\tthis._createShowAllButton();\n\t},\n\t_createShowAllButton: function() {\n        var that = this,\n          wasOpen = false;\n\n        $(\"<a>\")\n\t\t\t.attr(\"tabIndex\", that.element.prop(\"tabindex\"))\n\t\t\t.attr(\"title\", \"\")\n\t\t\t.appendTo(that.wrapper)\n\t\t\t.button({icons: {primary: \"ui-icon-triangle-1-s\"}, text: false})\n\t\t\t.removeClass(\"ui-corner-all\")\n\t\t\t.addClass(\"custom-combobox-toggle ui-corner-right\")\n\t\t\t.on(\"mousedown\", function() {\n\t\t\t\twasOpen = that.widget().is(\":visible\");\n\t\t\t})\n\t\t\t.on(\"click\", function() {\n\t\t\t\tthat.element.trigger(\"focus\");\n\n\t\t\t\t// Close if already visible\n\t\t\t\tif (wasOpen) {\n\t\t\t\t  return;\n\t\t\t\t}\n\n\t\t\t\t// Pass empty string as value to search for, displaying all results\n\t\t\t\tif(that.options.customDropdown) {\n\t\t\t\t\tthat.options.select_source = that._coerceSource(that.options.customDropdown())\n\t\t\t\t}\n\t\t\t\tthat.options.source = that.options.select_source;\n\t\t\t\tthat._search(\"\");\n\t\t\t});\n\t},\n});\n\nconst renderers =  {\n\tsystem: function(system) {\n\t\treturn systemRendering.renderSystem(systemAnalysis.analyse(undefined, system), 'span');\n\t},\n\twormholeType: wormholeRendering.renderWormholeType\n};\n","const systemAnalysis = new function() {\n\tconst mutators = [];\n\tthis.addMutator = function(m) { mutators.push(m); }\n\t\n\t/** Extract attributes of the system, and allow mutators to add/modify them.\n\t\tOptionally, pass in a system object */\n\tthis.analyse = function(systemID, system) {\n\t\tif(!system) { system = appData.systems[systemID]; }\n\t\tif(!system) { system = getDummySystem(systemID); }\n\t\tif(!systemID) { systemID = system.systemID; }\n\t\tconst r = Object.assign({}, system);\n\t\t\n\t\t// Defaults or saved original values\n\t\tr.baseSecurity = 1 * system.security;\n\t\tr.pathSymbol = '■';\n\t\tr.systemTypeModifiers = [];\t\t\n\t\tr.systemID = systemID;\n\t\t\n\t\tmutators.forEach(function(m) { m.mutate(r, systemID); });\n\t\t\n\t\t// Calculated final values\n\t\tr.class = (!r.class || Array.isArray(r.class)) ? r.class : [1 * r.class];\n\t\tr.systemTypeClass = r.class ? 'wh class-' + r.class[0] :\n\t\t\tr.factionID == 500026 ? 'triglavian' :\n\t\t\tr.security >= 0.45 ? 'hisec' :\n\t\t\tr.security > 0.0 ? 'lowsec' :\n\t\t\tr.security <= 0.0 ? 'nullsec' :\n\t\t\t'unknown';\n\t\tr.systemTypeName = r.class ? 'C' + r.class.join('/') :\n\t\t\tr.factionID == 500026 ? 'Trig' :\n\t\t\tr.baseSecurity >= 0.45 ? 'HS' :\n\t\t\tr.baseSecurity > 0.0 ? 'LS' :\n\t\t\tr.baseSecurity <= 0.0 ? 'NS' :\n\t\t\t' ';\n\t\tr.genericSystemType = r.class ? r.class.map(x => 'Class-' + x) :\n\t\t\tr.factionID == 500026 ? ['Triglavian'] :\n\t\t\tr.baseSecurity >= 0.45 ? ['High-Sec'] :\n\t\t\tr.baseSecurity > 0.0 ? ['Low-Sec'] :\n\t\t\tr.baseSecurity <= 0.0 ? ['Null-Sec'] :\n\t\t\tundefined;\n\t\tr.effectClass = \n\t\t\tr.effect === 'Black Hole' ? 'blackhole' :\n\t\t\tr.effect === 'Cataclysmic Variable' ? 'cataclysmic-variable' :\n\t\t\tr.effect === 'Magnetar' ? 'magnetar' :\n\t\t\tr.effect === 'Pulsar' ? 'pulsar' :\n\t\t\tr.effect === 'Red Giant' ? 'red-giant' :\n\t\t\tr.effect === 'Wolf-Rayet Star' ? 'wolf-rayet' :\n\t\t\tundefined;\n\t\t\t\n\t\treturn r;\n\t};\n\n\t\n\t\n\t/** Get the classes possible for a 'leads to' text e.g. 'Class-2', 'Dangerous', 'Triglavian' */\n\tfunction classForTypeName(leadsTo) {\n\t\treturn leadsTo && leadsTo.substring(0, 6) == 'Class-' ? [1 * leadsTo.substring(6)] :\n\t\t\t'Dangerous' == leadsTo ? [4,5] :\n\t\t\t'Unknown' == leadsTo ? [2,3] :\n\t\t\t'Unknown (small)' == leadsTo ? [1,2,3,13] :\n\t\t\tundefined;\n\t};\n\tthis.classForTypeName = classForTypeName;\t// expose public\n\t\n\t/** Create a dummy system object for fake IDs like 'Null-Sec', 'Class-5' etc */\n\tfunction getDummySystem(systemID) {\n\t\tconst leadsToPointer = typeof(systemID) === \"string\" && systemID.indexOf(\"|\") >= 0 ? appData.genericSystemTypes[systemID.substring(0, systemID.indexOf(\"|\"))]\n\t\t: appData.genericSystemTypes.indexOf(systemID) >= 0 ? systemID\n\t\t: appData.genericSystemTypes[systemID];\n\t\tconst nodeClass = classForTypeName(leadsToPointer);\n\t\tconst nodeSecurity = \n\t\t\tleadsToPointer == \"High-Sec\" ? 0.8 :\n\t\t\tleadsToPointer == \"Low-Sec\" ? 0.4 :\n\t\t\tleadsToPointer == \"Null-Sec\" ? -0.1 :\n\t\t\tundefined;\n\t\tconst nodeFaction = \n\t\t\tleadsToPointer == \"Triglavian\" ? 500026 :\n\t\t\tundefined;\n\t\t\n\t\treturn { security: nodeSecurity, class: nodeClass, factionID: nodeFaction };\n\t}\n}","const mutator_favourite = new _FavouriteMutator();\nsystemAnalysis.addMutator(mutator_favourite);\n\nfunction _FavouriteMutator() {\n\tconst _this = this;\n\n\tthis.mutate = function(system, systemID) {\n\t\tif(options.favorites.indexOf(systemID * 1) >= 0) {\n\t\t\tsystem.pathSymbol = '★';\n\t\t\tsystem.systemTypeModifiers.push('<span class=\"favorite active\" data-icon=\"star\"></span>');\t\t// star added by CSS\n\t\t}\n\t}\n}","const invasions = new _Invasions();\nsystemAnalysis.addMutator(invasions);\n\nfunction _Invasions() {\n\tconst _this = this;\n\tconst pathSymbolMap = {\n\t\tstellar_reconnaissance: '◆',\n\t\t\n\t\ttriglavian_minor_victory: '▽',\n\t\tescalating_liminality: '▽',\n\t\tfinal_liminality: '▼',\n\t\t\n\t\tedencom_minor_victory: '△',\n\t\tredoubt: '△', bulwark: '△',\n\t\tfortress: '▲',\n\t};\n\tconst textMap = {\n\t\tstellar_reconnaissance: 'Stellar Reconnaissance',\n\t\t\n\t\ttriglavian_minor_victory: 'Triglavian Minor Victory',\n\t\tescalating_liminality: 'Escalating Liminality',\n\t\tfinal_liminality: 'Final Liminality',\n\t\t\n\t\tedencom_minor_victory: 'EDENCOM Minor Victory',\n\t\tredoubt: 'Redoubt',\n\t\tbulwark: 'Bulwark',\n\t\tfortress: 'EDENCOM Fortress',\n\t}\n\tconst data = [{\"system_id\":30003088,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-10-04T12:29:02.888Z\",\"system_name\":\"Oyonata\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003894,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-10-01T18:28:09.852Z\",\"system_name\":\"Sabusi\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004302,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-30T15:36:50.977Z\",\"system_name\":\"Omigiav\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003539,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-30T14:11:30.759Z\",\"system_name\":\"Miakie\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005074,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-30T14:02:33.042Z\",\"system_name\":\"Daran\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003570,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-30T13:47:01.992Z\",\"system_name\":\"Elore\",\"system_security\":\"0.2\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003573,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-28T15:38:24.368Z\",\"system_name\":\"Pertnineere\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003463,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-28T15:38:14.299Z\",\"system_name\":\"Erlendur\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002079,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-09-28T15:37:20.058Z\",\"system_name\":\"Krirald\",\"system_security\":\"0.2\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002652,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-09-28T15:36:53.719Z\",\"system_name\":\"Ala\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30045331,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-28T15:36:28.616Z\",\"system_name\":\"Vaaralen\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003788,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-26T12:44:03.049Z\",\"system_name\":\"Intaki\",\"system_security\":\"0.1\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002724,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-25T00:51:28.251Z\",\"system_name\":\"Assiettes\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002999,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-24T12:03:23.037Z\",\"system_name\":\"Shastal\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000102,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-23T22:22:21.093Z\",\"system_name\":\"Dysa\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003919,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-22T10:22:11.970Z\",\"system_name\":\"Ashkoo\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004978,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-22T10:21:30.195Z\",\"system_name\":\"Pemene\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30004287,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-20T11:25:28.863Z\",\"system_name\":\"Esubara\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002051,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-20T11:25:09.478Z\",\"system_name\":\"Anher\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003823,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-20T11:24:54.777Z\",\"system_name\":\"Kenninck\",\"system_security\":\"0.1\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001400,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-18T14:03:33.048Z\",\"system_name\":\"Litiura\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30005251,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-18T09:42:27.550Z\",\"system_name\":\"Asanot\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005267,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-17T11:18:57.960Z\",\"system_name\":\"Bherdasopt\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002411,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.3\",\"updated_at\":\"2020-09-17T00:30:42.544Z\",\"system_name\":\"Skarkon\",\"system_security\":\"0.1\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003587,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-15T01:16:50.021Z\",\"system_name\":\"Harner\",\"system_security\":\"0.1\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003904,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-14T16:54:07.359Z\",\"system_name\":\"Col\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005209,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-14T16:53:54.556Z\",\"system_name\":\"Sibe\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004103,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-14T13:40:36.727Z\",\"system_name\":\"Kothe\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005219,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-13T09:34:00.331Z\",\"system_name\":\"Sigga\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002755,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-12T20:51:38.354Z\",\"system_name\":\"Usi\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003824,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-11T08:28:52.435Z\",\"system_name\":\"Archavoinet\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002239,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-11T08:28:42.669Z\",\"system_name\":\"Rammi\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005005,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.5\",\"updated_at\":\"2020-09-10T21:09:12.196Z\",\"system_name\":\"Ignebaener\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000021,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.8\",\"updated_at\":\"2020-09-09T21:16:25.577Z\",\"system_name\":\"Kuharah\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000118,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-09T08:08:17.988Z\",\"system_name\":\"Uanzin\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003794,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-07T23:26:42.297Z\",\"system_name\":\"Stacmon\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003927,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-07T22:18:47.862Z\",\"system_name\":\"Zahefeus\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000109,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-07T20:54:30.351Z\",\"system_name\":\"Berta\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002797,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.9\",\"updated_at\":\"2020-09-06T13:33:29.649Z\",\"system_name\":\"Kaunokka\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30031392,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-09-06T13:33:15.544Z\",\"system_name\":\"Komo\",\"system_security\":\"0.8\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30004090,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-06T06:22:50.377Z\",\"system_name\":\"Aband\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000060,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-06T01:54:13.794Z\",\"system_name\":\"Janus\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003548,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-05T17:05:22.429Z\",\"system_name\":\"Barira\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000160,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-04T23:48:55.626Z\",\"system_name\":\"Reisen\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30004999,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-04T15:38:27.450Z\",\"system_name\":\"Ladistier\",\"system_security\":\"0.3\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000113,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-04T07:07:27.574Z\",\"system_name\":\"Astabih\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004295,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-02T18:09:55.446Z\",\"system_name\":\"Keba\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001413,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.2\",\"updated_at\":\"2020-09-02T08:11:42.869Z\",\"system_name\":\"Nani\",\"system_security\":\"0.8\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002386,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-01T08:04:35.922Z\",\"system_name\":\"Gelfiven\",\"system_security\":\"0.6\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30004973,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-31T21:17:02.227Z\",\"system_name\":\"Caslemon\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30004231,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-31T20:32:52.884Z\",\"system_name\":\"Shakasi\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004284,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-31T20:32:43.772Z\",\"system_name\":\"Defsunun\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002266,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-31T10:38:02.368Z\",\"system_name\":\"Ahmak\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003932,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-29T23:12:29.549Z\",\"system_name\":\"Timudan\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004254,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-28T16:43:28.986Z\",\"system_name\":\"Fihrneh\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004244,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-28T07:55:35.187Z\",\"system_name\":\"Onanam\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002513,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-27T20:59:21.817Z\",\"system_name\":\"Dammalin\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30000206,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.5\",\"updated_at\":\"2020-08-27T14:06:44.066Z\",\"system_name\":\"Wirashoda\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002048,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-27T11:14:57.970Z\",\"system_name\":\"Bei\",\"system_security\":\"0.6\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003090,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-26T23:04:35.948Z\",\"system_name\":\"Saidusairos\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003478,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-26T00:06:02.331Z\",\"system_name\":\"Basan\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004289,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-25T11:33:32.949Z\",\"system_name\":\"Vaini\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30045345,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-24T21:16:26.292Z\",\"system_name\":\"Hirri\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30001358,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-24T08:44:18.165Z\",\"system_name\":\"Ossa\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003061,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-24T07:23:55.183Z\",\"system_name\":\"Mormelot\",\"system_security\":\"0.2\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30040141,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-08-23T11:05:21.929Z\",\"system_name\":\"Urhinichi\",\"system_security\":\"0.8\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003078,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-22T18:47:39.976Z\",\"system_name\":\"Erkinen\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002530,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-22T15:09:00.523Z\",\"system_name\":\"Avesber\",\"system_security\":\"0.8\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003900,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-22T07:50:34.044Z\",\"system_name\":\"Ham\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002644,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-21T08:26:40.788Z\",\"system_name\":\"Ambeke\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001401,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-21T00:44:17.584Z\",\"system_name\":\"Nonni\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30045328,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.7\",\"updated_at\":\"2020-08-20T14:35:34.268Z\",\"system_name\":\"Ahtila\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003480,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-20T11:19:04.711Z\",\"system_name\":\"Amod\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004141,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-20T01:50:23.539Z\",\"system_name\":\"Hiremir\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002770,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.1\",\"updated_at\":\"2020-08-18T14:53:00.972Z\",\"system_name\":\"Tunudan\",\"system_security\":\"0.4\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003504,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.7\",\"updated_at\":\"2020-08-18T14:46:27.787Z\",\"system_name\":\"Niarja\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002253,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-18T09:31:28.183Z\",\"system_name\":\"Arshat\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002737,\"status\":\"final_liminality\",\"derived_security_status\":\"0.0\",\"updated_at\":\"2020-08-16T21:29:53.121Z\",\"system_name\":\"Konola\",\"system_security\":\"0.7\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003398,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-16T17:38:55.577Z\",\"system_name\":\"Anbald\",\"system_security\":\"0.7\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003490,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-15T20:27:08.919Z\",\"system_name\":\"Khopa\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001696,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-14T06:57:31.468Z\",\"system_name\":\"Iro\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000192,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.3\",\"updated_at\":\"2020-08-14T01:51:38.839Z\",\"system_name\":\"Otanuomi\",\"system_security\":\"0.4\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002772,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-13T11:24:31.714Z\",\"system_name\":\"Rairomon\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30005284,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-13T11:24:24.229Z\",\"system_name\":\"Promised Land\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30045354,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-13T07:37:02.262Z\",\"system_name\":\"Reitsato\",\"system_security\":\"0.2\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30005222,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-12T17:58:16.210Z\",\"system_name\":\"Serren\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003556,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-10T23:13:52.643Z\",\"system_name\":\"Arton\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005086,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-10T06:50:08.222Z\",\"system_name\":\"Arza\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000157,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.3\",\"updated_at\":\"2020-08-10T06:49:46.743Z\",\"system_name\":\"Otela\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003918,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-09T15:49:15.024Z\",\"system_name\":\"Hakana\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002385,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-09T00:34:34.831Z\",\"system_name\":\"Teonusude\",\"system_security\":\"0.6\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002704,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-07T22:29:26.455Z\",\"system_name\":\"Adrallezoen\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001372,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.9\",\"updated_at\":\"2020-08-07T19:29:54.183Z\",\"system_name\":\"Kino\",\"system_security\":\"0.7\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003908,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-07T07:00:48.775Z\",\"system_name\":\"Bashyam\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000012,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-06T09:30:28.248Z\",\"system_name\":\"Asabona\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005058,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-05T21:45:44.898Z\",\"system_name\":\"Neesher\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004305,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-05T21:24:35.293Z\",\"system_name\":\"Esaeel\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003883,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-05T20:44:57.150Z\",\"system_name\":\"Keberz\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003481,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-05T07:41:10.729Z\",\"system_name\":\"Unefsih\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003397,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-04T16:45:17.206Z\",\"system_name\":\"Bongveber\",\"system_security\":\"0.9\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002702,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-08-04T11:15:48.842Z\",\"system_name\":\"Archee\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003460,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-03T22:03:14.542Z\",\"system_name\":\"Offikatlin\",\"system_security\":\"0.4\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30004084,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-02T17:58:04.736Z\",\"system_name\":\"Ghesis\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003574,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T20:28:35.755Z\",\"system_name\":\"Boystin\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30005213,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T20:20:33.816Z\",\"system_name\":\"Hesarid\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005308,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T10:42:51.414Z\",\"system_name\":\"Jufvitte\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002665,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T02:12:09.248Z\",\"system_name\":\"Misneden\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000188,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T02:11:39.811Z\",\"system_name\":\"Hentogaira\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002557,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-31T18:00:06.264Z\",\"system_name\":\"Atgur\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003058,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-29T09:14:47.194Z\",\"system_name\":\"Olide\",\"system_security\":\"0.7\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30005334,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-28T23:28:39.525Z\",\"system_name\":\"Tierijev\",\"system_security\":\"0.8\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003046,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.5\",\"updated_at\":\"2020-07-28T14:20:51.847Z\",\"system_name\":\"Angymonne\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003514,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-27T18:47:08.094Z\",\"system_name\":\"Yeeramoun\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002760,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-26T11:44:38.056Z\",\"system_name\":\"Manjonakko\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002506,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-23T18:07:27.688Z\",\"system_name\":\"Osoggur\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30005052,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-21T17:37:44.002Z\",\"system_name\":\"Soumi\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003931,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-20T16:54:45.398Z\",\"system_name\":\"Sassecho\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005255,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-20T09:34:48.342Z\",\"system_name\":\"Saphthar\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30020141,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.9\",\"updated_at\":\"2020-07-19T11:16:57.684Z\",\"system_name\":\"Senda\",\"system_security\":\"0.9\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002795,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-18T01:59:01.724Z\",\"system_name\":\"Oshaima\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30000004,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-17T22:26:00.294Z\",\"system_name\":\"Jark\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004263,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-15T21:20:01.593Z\",\"system_name\":\"Feshur\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000062,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-15T15:49:03.146Z\",\"system_name\":\"Iosantin\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002241,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-13T01:22:41.989Z\",\"system_name\":\"Rimbah\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004981,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-12T11:24:07.265Z\",\"system_name\":\"Actee\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002242,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-10T19:06:05.853Z\",\"system_name\":\"Mamenkhanar\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003558,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-10T13:51:31.889Z\",\"system_name\":\"Madimal\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001376,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-09T16:04:24.621Z\",\"system_name\":\"Nourvukaiken\",\"system_security\":\"0.8\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30045329,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-07-08T10:41:47.622Z\",\"system_name\":\"Ichoriya\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30005252,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-07T23:49:41.522Z\",\"system_name\":\"Anzalaisio\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004257,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-07T17:15:51.416Z\",\"system_name\":\"Hakatiz\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004108,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-05T01:56:57.535Z\",\"system_name\":\"Chaneya\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000048,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-03T15:11:36.506Z\",\"system_name\":\"Ihal\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003482,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-02T20:56:41.226Z\",\"system_name\":\"Mista\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002225,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.8\",\"updated_at\":\"2020-07-01T14:11:27.451Z\",\"system_name\":\"Harva\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005263,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-01T13:43:12.530Z\",\"system_name\":\"Mozzidit\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005066,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-01T06:43:25.457Z\",\"system_name\":\"Kerying\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002986,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-28T17:43:41.096Z\",\"system_name\":\"Mendori\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001381,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.1\",\"updated_at\":\"2020-06-27T00:02:01.315Z\",\"system_name\":\"Arvasaras\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30001447,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-25T02:19:25.407Z\",\"system_name\":\"Taisy\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002700,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-24T13:40:05.882Z\",\"system_name\":\"Bawilan\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001390,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-24T09:42:32.895Z\",\"system_name\":\"Pakkonen\",\"system_security\":\"0.4\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003076,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-23T09:02:12.462Z\",\"system_name\":\"Gammel\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003050,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-23T06:32:08.087Z\",\"system_name\":\"Odixie\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000163,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-22T19:28:52.910Z\",\"system_name\":\"Akora\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003073,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-21T07:12:31.404Z\",\"system_name\":\"Netsalakka\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001391,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-20T21:12:20.299Z\",\"system_name\":\"Piekura\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002771,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-20T00:41:47.611Z\",\"system_name\":\"Kulelen\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30000005,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-19T14:36:55.956Z\",\"system_name\":\"Sasta\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005330,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-19T13:21:23.145Z\",\"system_name\":\"Arraron\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000205,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-18T22:06:13.302Z\",\"system_name\":\"Obe\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003856,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-18T12:10:11.496Z\",\"system_name\":\"Athounon\",\"system_security\":\"0.1\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30004250,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-17T11:42:53.830Z\",\"system_name\":\"Chibi\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004268,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-17T08:56:42.286Z\",\"system_name\":\"Shenda\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005236,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-17T07:25:26.811Z\",\"system_name\":\"Noranim\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003829,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-16T22:17:39.177Z\",\"system_name\":\"Renarelle\",\"system_security\":\"0.3\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30005034,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-16T21:32:34.651Z\",\"system_name\":\"Bridi\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003074,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-16T21:31:28.344Z\",\"system_name\":\"Sasiekko\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003392,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-15T19:26:39.709Z\",\"system_name\":\"Eygfe\",\"system_security\":\"0.7\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30001445,\"status\":\"final_liminality\",\"derived_security_status\":\"0.0\",\"updated_at\":\"2020-06-15T03:38:02.163Z\",\"system_name\":\"Nalvula\",\"system_security\":\"0.4\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30010141,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.2\",\"updated_at\":\"2020-06-14T01:12:53.428Z\",\"system_name\":\"Sakenta\",\"system_security\":\"1.0\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003809,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-13T20:25:21.879Z\",\"system_name\":\"Brellystier\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001718,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-13T05:28:45.485Z\",\"system_name\":\"Paye\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004256,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-11T13:37:54.195Z\",\"system_name\":\"Edilkam\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002645,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-11T00:28:57.560Z\",\"system_name\":\"Carrou\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30045338,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-10T22:28:25.084Z\",\"system_name\":\"Hikkoken\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30004301,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-10T16:44:37.396Z\",\"system_name\":\"Anath\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002575,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-10T05:41:23.824Z\",\"system_name\":\"Sotrenzur\",\"system_security\":\"0.3\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003515,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-08T06:49:36.637Z\",\"system_name\":\"Anila\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004100,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-08T03:04:19.196Z\",\"system_name\":\"Halibai\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002397,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-08T01:10:38.296Z\",\"system_name\":\"Horaka\",\"system_security\":\"0.6\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002662,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-07T11:22:11.884Z\",\"system_name\":\"Pulin\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001383,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-07T06:16:44.145Z\",\"system_name\":\"Vaajaita\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003854,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T19:17:57.398Z\",\"system_name\":\"Alamel\",\"system_security\":\"0.2\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003464,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T19:16:59.888Z\",\"system_name\":\"Aldik\",\"system_security\":\"0.7\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30000182,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T19:04:22.126Z\",\"system_name\":\"Inaya\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30001660,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T17:38:27.602Z\",\"system_name\":\"Dabrid\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001685,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T17:34:50.620Z\",\"system_name\":\"Ordat\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005029,\"status\":\"final_liminality\",\"derived_security_status\":\"-1.0\",\"updated_at\":\"2020-06-06T15:44:51.914Z\",\"system_name\":\"Vale\",\"system_security\":\"0.7\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30045322,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T01:44:55.204Z\",\"system_name\":\"Samanuni\",\"system_security\":\"0.7\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003885,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-05T17:09:39.066Z\",\"system_name\":\"Arzanni\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004248,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-05T00:49:40.255Z\",\"system_name\":\"Haimeh\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003495,\"status\":\"final_liminality\",\"derived_security_status\":\"-1.0\",\"updated_at\":\"2020-06-04T23:08:13.644Z\",\"system_name\":\"Raravoss\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003541,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T16:55:17.838Z\",\"system_name\":\"Faswiba\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002651,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T15:38:07.592Z\",\"system_name\":\"Fasse\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30004150,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Shaggoth\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002251,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Sadye\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005260,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Keri\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000105,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Abha\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004992,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Palmon\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002243,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Seiradih\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003553,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Warouh\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"}];\n\t\n\tthis.invasions = _.keyBy(data, function(x) { return x.system_id; });\n\t\n\t/** Update the system */\n\tthis.mutate = function(system, systemID) {\n\t\tconst systemInvasion = this.invasions[systemID];\n\t\tif(systemInvasion) {\n\t\t\tif(systemInvasion.derived_security_status) { system.security = 1 * systemInvasion.derived_security_status; }\n\t\t\tsystem.pathSymbol = pathSymbolMap[systemInvasion.status];\n\t\t\tconst tip = textMap[systemInvasion.status] +\n\t\t\t\t(systemInvasion.derived_security_status ? '<br>Effective security lowered to ' + systemInvasion.derived_security_status : '');\n\t\t\tsystem.systemTypeModifiers.push('<span class=\"invasion ' + systemInvasion.status + '\" data-tooltip=\"' + tip + '\">' + system.pathSymbol + '</span>');\n\t\t}\n\t}\n}","var guidance = (function (undefined) {\n\t\n\n\tvar sorter = function (a, b) {\n\t\treturn parseFloat (a) - parseFloat (b);\n\t}\n\n\tfunction adjustCostForOptions(mapCost, toSystem) {\t\t\n\t\tvar system = systemAnalysis.analyse(30000000 + 1 * toSystem);\n\t\tif(!system) { return mapCost; }\n\t\tif(options.chain.routeIgnore.enabled && options.chain.routeIgnore.systems.indexOf(system.name) >= 0) {\n\t\t\tmapCost += 100;\t// Penalty for an avoided system\n\t\t}\n\t\tif(system.name == 'Zarzakh') { mapCost += 100; } // Always avoid Zarzakh for its 6h wait\n\t\tswitch(options.chain.routeSecurity) {\n\t\t\tcase 'highsec': return mapCost + (system.security < 0.45 ? 100 : 0);\n\t\t\tcase 'avoid-high': return mapCost + (system.security >= 0.45 ? 100 : 0);\n\t\t\tcase 'avoid-null': return mapCost + (system.security <= 0.0 ? 100 : 0);\n\t\t\tdefault: return mapCost;\t// in case of some invalid option, default to shortest\n\t\t}\t\n\t}\n\t\n\tfunction adjustJumpCost(from, to, cost) {\n\t\treturn Guidance.jumpCostModifiers.reduce((cost, modifier) => modifier(from, to, cost), cost);\n\t}\n\n\t/** Find a path between the start and end nodes (which may be arrays), up to the path length limit */\n\tvar findPaths = function (map, start, end, limit) {\n\t\tif(!Array.isArray(start)) { start = [start]; } \n\t\tif(!Array.isArray(end)) { end = [end]; } \n\n\t\t\n\t\tstart = start.filter(function(x) { return map[x]; });\n\t\tend = end.filter(function(x) { return map[x]; });\n\t\t\n\t\tconst endsInStart = end.filter(function(x) { return start.indexOf(x) >= 0; });\n\t\tif(endsInStart.length) { return [endsInStart[0]]; }\n\t\t\n\t\t// if(!(start.length && end.length)) { return null; }\t// both ends of path must be in network somewhere\n\n\t\tvar costs = {},\n\t\t    open = {'0': []},\n\t\t    predecessors = {},\n\t\t    keys;\n\t\t\n\t\tstart.forEach(function(x) { costs[x] = 0; open[0].push(x); });\n\n\t\tvar addToOpen = function (cost, vertex) {\n\t\t\tvar key = \"\" + cost;\n\t\t\tif (!open[key]) open[key] = [];\n\t\t\topen[key].push(vertex);\n\t\t}\n\n\t\twhile ((keys = Object.keys(open)).length) {\n\t\t\tkeys.sort(sorter);\n\n\t\t\tvar key = keys[0],\n\t\t\t    bucket = open[key],\n\t\t\t    node = bucket.shift(),\n\t\t\t    currentCost = parseFloat(key),\n\t\t\t    adjacentNodes = map[node] || {};\n\n\t\t\tif (!bucket.length) delete open[key];\n\t\t\tif(currentCost >= limit) { break; }\n\n\t\t\tfor (var vertexText in adjacentNodes) {\n\t\t\t\tconst vertex = 1 * vertexText;\n\t\t\t    if (adjacentNodes[vertex] !== undefined) {\n\t\t\t\t\tvar cost = 1 + adjustCostForOptions(adjacentNodes[vertex], vertex),\n\t\t\t\t\t    totalCost = cost + currentCost,\n\t\t\t\t\t    vertexCost = costs[vertex];\n\t\t\t\t\t\n\t\t\t\t\tcost = adjustJumpCost(node, vertex, cost);\n\n\t\t\t\t\tif ((cost > 0) && (vertexCost === undefined) || (vertexCost > totalCost)) {\n\t\t\t\t\t\tcosts[vertex] = totalCost;\n\t\t\t\t\t\taddToOpen(totalCost, vertex);\n\t\t\t\t\t\tpredecessors[vertex] = node;\n\t\t\t\t\t\tif(end.indexOf(vertex) >= 0) {\n\t\t\t\t\t\t\treturn extractShortest(predecessors, vertex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn null;\t// never hit any end node\n\t}\n\n\tvar extractShortest = function (predecessors, end) {\n\t\tvar nodes = [],\n\t\t    u = end;\n\n\t\twhile (u) {\n\t\t\tnodes.push(u);\n\t\t\tpredecessor = predecessors[u];\n\t\t\tu = predecessors[u];\n\t\t}\n\n\t\tnodes.reverse();\n\t\treturn nodes;\n\t}\n\n\t/** Find the best path that connects the given nodes, in that order. The limit will be applied to each path segment, not the path as a whole. */\n\tvar findMultiNodePath = function (map, nodes, limit) {\n\t\tvar start = nodes.shift(),\n\t\t    end,\n\t\t    predecessors,\n\t\t    path = [],\n\t\t    shortest;\n\n\t\twhile (nodes.length) {\n\t\t\tend = nodes.shift();\n\t\t\tshortest = findPaths(map, start, end, limit);\n\n\t\t\tif (shortest) {\n\t\t\t\tif (nodes.length) {\n\t\t\t\t\tpath.push.apply(path, shortest.slice(0, -1));\n\t\t\t\t} else {\n\t\t\t\t\treturn path.concat(shortest);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tstart = end;\n\t\t}\n\t}\n\t\n\tvar Guidance = { kSpaceCache: {}, jumpCostModifiers: [] };\n\tGuidance.clearCache = function() { Guidance.kSpaceCache = {}; }\n\t\n\t/** Find the shortest path between start and end nodes on the given map.\n\tThe map should be a dictionary of node IDs where each entry is a dictionary of connected nodes and costs (see appData.map.shortest). An additional cost of 1 per jump will be added.\n\tYou may also specify a maximum path length limit, if no path under this length is found then no path will be returned, even if a longer one is available.\n\tStart and end nodes may be a single ID or an array of IDs. If arrays are used then a single shortest path between any combination of nodes will be returned */\n\tGuidance.findShortestPath = function (map, start, end, limit) {\n\t\tif(start > 30000000) { start -= 30000000; }\n\t\tif(end > 30000000) { end -= 30000000; }\n\t\t\n\t\tconst nodes = [start, end];\n\n\t\tconst cacheKey = nodes.join(',') + (limit ? '-' + limit : '');\n\t\tconst cachedPath = Guidance.kSpaceCache[cacheKey];\n\t\tif(cachedPath === undefined) {\n\t\t\treturn Guidance.kSpaceCache[cacheKey] = findPaths(map, start, end, limit);\n\t\t} else {\n\t\t\treturn cachedPath;\n\t\t}\n\t}\n\t\n\t/** Find the systems directly connected to this one. System IDs are in normal (+ 30000000) domain. */\n\tGuidance.connections = function(map, start) {\n\t\tif(start > 30000000) { start -= 30000000; }\n\t\treturn Object.keys(map[start] || {})\n\t\t\t.map(k => (k * 1))\n\t\t\t.map(k => {\n\t\t\t\tconst r = { systemID: k + 30000000 };\n\t\t\t\tif(0 > adjustJumpCost(start, k, 1)) { r.closed = true; }\n\t\t\t\treturn r;\n\t\t\t});\n\t}\n\n\treturn Guidance;\n})();\n","/** Functions for rendering things relating to systems or parts of the chain */\nconst systemRendering = new function() { \n\t/** Render a path, as returned from guidance.findShortestPath */\n\tthis.renderPath = function(path) {\n\t\tif(path.length <= 1 || path.length > options.chain.routingLimit) { return '' + path.length - 1; }\n\t\telse {\n\t\t\tvar systemMarkup = path\n\t\t\t.slice(0, path.length - 1).reverse()\n\t\t\t.map(function(s) {\n\t\t\t\tconst systemID = 30000000 + 1 * s;\n\t\t\t\tconst system = systemAnalysis.analyse(systemID);\n\t\t\t\tconst securityClass = system.systemTypeClass;\n\t\t\t\treturn '<span class=\"' + securityClass + '\" data-tooltip=\"' + system.name + ' (' + system.security + ')\" onclick=\"tripwire.systemChange(' + systemID + ')\">' + system.pathSymbol + '</span>';\n\t\t\t});\n\t\t\tvar r = '<span class=\"path\">';\n\t\t\tfor(var i = 0; i < systemMarkup.length; i++) {\n\t\t\t\tif(i > 0 && 0 == i % 5) { r += '|'; }\n\t\t\t\t\n\t\t\t\tr += systemMarkup[i];\t\t\t\t \n\t\t\t}\n\t\t\treturn r + '</span>';\n\t\t}\n\t}\n\t\n\tthis.renderEffect = function(system, tag) {\n\t\treturn system.effectClass ? \"<\" + tag + \" class='whEffect' data-icon='\"+system.effectClass+\"' data-tooltip='\"+system.effect+\"'></\" + tag + \">\" : '';\n\t}\n\t\n\tthis.renderSystem = function(systemInfo, tag) {\n\t\ttag = tag || 'a';\n\t\tconst text = systemInfo.name || systemInfo.genericSystemType;\n\t\treturn '<' + tag + (tag === 'a' ? ' href=\".?system=' + systemInfo.name + '\"' : '') + '>' + text + '</' + tag + '> (' + this.renderEffect(systemInfo, 'span') + '<span class=\"' + systemInfo.systemTypeClass + '\">' + systemInfo.systemTypeName + '</span>)';\n\t}\n};","const ChainMapRendererBase = function(owner) {\n\t/** Is this renderer ready to accept draw calls? */\n\tthis.ready = function() { return !this.drawing; }\n\t\n\t/** Switch to this renderer. The renderer can be in a blank state; draw() will be called after */\n\tthis.switchTo = function() {\n\t\tif(!document.getElementById('map-container')) {\n\t\t\tconst newDiv = document.createElement('div');\n\t\t\tnewDiv.id = 'map-container';\n\t\t\tnewDiv.className = 'radial-map';\n\t\t\tdocument.getElementById('chainMap').appendChild(newDiv);\n\t\t}\n\t\tthis.container = document.getElementById('map-container');\n\t\tthis.container.style.display = '';\n\t}\n\t\n\t/** Switch away from this renderer. All node divs should be removed from the DOM */\n\tthis.switchFrom = function() {\n\t\tconst div = document.getElementById('map-container');\n\t\tif(div) { div.parentNode.removeChild(div); }\n\t\tthis.container = null;\n\t}\n\t\n\tthis.collapse = function(systemID, collapse) {\n\t\tif(collapse) { this.mapData.collapsed.push(systemID); }\n\t\telse {  this.mapData.collapsed = this.mapData.collapsed.filter(x => x != systemID); }\n\t\towner.updateCollapsed(this.mapData.collapsed);\n\t\tdrawInner(this.mapData.map, this.mapData.lines, this.mapData.collapsed);\n\t}\n\t\n\t/** Redraw the map, based on the given node set, line overrides and list of collapsed systems */\n\tthis.draw = function(map, lines, collapsed) {\n\t\tthis.drawing = true;\n\t\tthis.mapData = {map: map, lines: lines, collapsed: collapsed};\n\t\t\n\t\t// Clear the map for a new one\n\t\t//this.switchFrom(); this.switchTo();\n\n\t\ttry { drawInner(map, lines, collapsed); }\n\t\tfinally { this.drawing = false; }\n\t}\n\t\n\t/** Get the factor by which the 'arc' (or coverage if linear) for the current level reduces.\n\tE.g. for a circle, the 3rd ring is 3/4 the size of the 4th so arcFactor(3) should return 3/4.\n\tBy default, all levels are the same 'size' */\n\tthis.arcFactor = function(level) { return 1; }\n\t\n\t/** Calculate the minimum arc for this node, for example taking into account text size */\n\tthis.calcMinArc = function(node) { return 1; }\n\n\tconst _this = this;\n\tconst drawInner = function(map, lines, collapsed) {\n\t\tconst maps = [];\n\t\tconst nodesById = {};\n\t\t\n\t\t// First pass: arrange nodes into rings\n\t\tfor(var ri = 0; ri < map.rows.length; ri++) {\n\t\t\tconst item = map.rows[ri];\n\t\t\tconst inNode = item.c[0], id = inNode.v, parent = item.c[1].v;\n\t\t\t\n\t\t\tconst mapNode = { id: id, children: [], systemID: inNode.systemID, minArc: 0 };\n\t\t\t\n\t\t\tif(parent == null) {\n\t\t\t\tconst newMap =  { circles: [ { arc: 0, nodes: [ mapNode ] } ] };\n\t\t\t\tmapNode.map = newMap;\n\t\t\t\tmapNode.circle = 0;\n\t\t\t\tmaps.push(newMap);\n\t\t\t} else {\n\t\t\t\tconst parentNode = nodesById[parent];\n\t\t\t\tif(!parentNode) { throw 'Parent id ' + parent + ' not on map yet'; }\n\t\t\t\tparentNode.children.push(mapNode);\n\t\t\t\tmapNode.parent = parentNode;\n\t\t\t\tmapNode.connection = lines.filter(function(l) { return l[0] == id; })[0] || [id, parent, [], '?'];\n\t\t\t\tmapNode.styles = ['connection'].concat(mapNode.connection[2]);\n\t\t\t\tmapNode.map = parentNode.map;\n\t\t\t\tmapNode.circle = parentNode.circle + 1;\n\t\t\t\tif(mapNode.map.circles.length <= mapNode.circle) {\n\t\t\t\t\tmapNode.map.circles.push({ arc: 0, nodes:[mapNode] });\n\t\t\t\t} else { mapNode.map.circles[mapNode.circle].nodes.push(mapNode); }\n\t\t\t}\n\t\t\tnodesById[id] = mapNode;\n\t\t\tmapNode.markup = inNode.f;\n\t\t\tmapNode.requestedSize = measureNode(mapNode.markup);\n\t\t}\n\n\t\t// Second pass - for each map, find the allocation of arc needed for each node\n\t\tfor(var mi = 0; mi < maps.length; mi++) {\n\t\t\tconst map = maps[mi];\n\t\t\tfor(var ci = map.circles.length - 1; ci >= 1; ci--) {\t// don't need to calculate ring 0\n\t\t\t\tfor(var ni = 0; ni < map.circles[ci].nodes.length; ni++) {\n\t\t\t\t\tconst node = map.circles[ci].nodes[ni];\n\t\t\t\t\tnode.minArc *= _this.arcFactor(ci);\n\t\t\t\t\tconst minForNode = _this.calcMinArc(node);\n\t\t\t\t\tif(node.minArc < minForNode || collapsed.indexOf(node.systemID * 1) >= 0) {\n\t\t\t\t\t\tnode.minArc = minForNode;\n\t\t\t\t\t}\n\t\t\t\t\tnode.parent.minArc += node.minArc;\n\t\t\t\t\tmap.circles[ci].arc += node.minArc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Third pass - lay out each ring based on the arc values\n\t\tfor(var mi = 0; mi < maps.length; mi++) {\n\t\t\tconst map = maps[mi];\n\t\t\tvar mapDiv = document.getElementById(\"map\" + mi);\n\t\t\tif(!mapDiv) {\n\t\t\t\tmapDiv = document.createElement('div');\n\t\t\t\tmapDiv.id = \"map\" + mi;\n\t\t\t\tmapDiv.className = \"map-chain-wrapper\";\n\t\t\t}\n\t\t\tmapDiv.innerHTML = '<div class=\"map-outer-container\"><div class=\"map-inner-container\"><canvas class=\"map-drawing\" id=\"map-canvas-' + mi + '\"/></div></div>';\n\t\t\tconst innerContainer = mapDiv.firstChild.firstChild;\n\t\t\tdocument.getElementById('map-container').appendChild(mapDiv);\n\n\t\t\tconst range = _this.initialRads(map.circles[0].nodes[0].minArc);\n\t\t\tmap.bounds = makeDivsForRing(innerContainer, 0, map.circles[0].nodes, -range, range, collapsed);\n\t\t\tmap.radRange = { min: -range, max: range };\n\t\t\tmap.domNode = mapDiv;\n\t\t\tmap.innerContainer = innerContainer;\n\t\t}\n\n\t\t// Fourth pass: update div and canvas bounds, and draw rings/links\n\t\t// Remember the scroll on the outer container so we can reset it if the map didn't change a lot\n\t\tconst chainParent = document.getElementById('chainParent');\n\t\tconst previousScroll = { x: chainParent.scrollLeft, y: chainParent.scrollTop };\n\t\tconst CANVAS_SCALE = 1;\n\t\tfor(var mi = 0; mi < maps.length; mi++) {\n\t\t\tconst map = maps[mi];\n\t\t\t// Reset the width overrides so previous expansions aren't persisted if not needed any more\n\t\t\tmap.domNode.style.width = null;\n\t\t\tmap.domNode.style.height = null;\n\t\t\tconst finalPositions = {\n\t\t\t\tw: 200 + map.bounds.x[1] - map.bounds.x[0],\n\t\t\t\th: 100 + map.bounds.y[1] - map.bounds.y[0],\n\t\t\t\tcx: 100 - map.bounds.x[0],\n\t\t\t\tcy: 50 - map.bounds.y[0]\n\t\t\t}\n\t\t\t\n\t\t\t// Fill the space available, if we didn't already\n\t\t\tconst centringOptions = _this.centringOptions;\n\t\t\tif(centringOptions.x && maps.length == 1) {\t// only centre in X if it's the only map, otherwise let them flow\t\n\t\t\t\tconst parentWidth = -38 + _this.container.offsetWidth;\t// 20px for map margins, 18 for scrollbar\n\t\t\t\tif(finalPositions.w < parentWidth) {\n\t\t\t\t\tfinalPositions.cx += 0.5 * (parentWidth - finalPositions.w);\n\t\t\t\t\tfinalPositions.w = parentWidth;\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t\tif(centringOptions.y) {\n\t\t\t\tconst parentHeight = chainParent.offsetHeight;\n\t\t\t\tif(finalPositions.h < parentHeight) {\n\t\t\t\t\tfinalPositions.cy += 0.5 * (parentHeight - finalPositions.h);\n\t\t\t\t\tfinalPositions.h = parentHeight;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// If there's enough space to centre the top level node now, do it\n\t\t\tif(centringOptions.y && centringOptions.rootNode && finalPositions.h >= 2 * (map.bounds.y[1] > -map.bounds.y[0] ? map.bounds.y[1] : -map.bounds.y[0])) {\n\t\t\t\tfinalPositions.cy = finalPositions.h / 2;\n\t\t\t}\n\t\t\tif(centringOptions.x && centringOptions.rootNode && finalPositions.w >= 2 * (map.bounds.x[1] > -map.bounds.x[0] ? map.bounds.x[1] : -map.bounds.x[0])) {\n\t\t\t\tfinalPositions.cx = finalPositions.w / 2;\n\t\t\t}\t\t\t\n\t\t\tmap.domNode.style.width = finalPositions.w + 'px';\n\t\t\tmap.domNode.style.height = finalPositions.h + 'px';\n\t\t\tconst outerContainer = map.domNode.firstChild;\n\t\t\touterContainer.style.left = finalPositions.cx + 'px';\n\t\t\touterContainer.style.top = finalPositions.cy + 'px';\n\t\t\tconst canvas = outerContainer.getElementsByTagName('canvas')[0];\n\t\t\tcanvas.width = CANVAS_SCALE * finalPositions.w;\n\t\t\tcanvas.style.width = finalPositions.w + 'px';\n\t\t\tcanvas.height = CANVAS_SCALE * finalPositions.h;\n\t\t\tcanvas.style.height = finalPositions.h + 'px';\n\t\t\tcanvas.style.left = -finalPositions.cx + 'px';\n\t\t\tcanvas.style.top = -finalPositions.cy + 'px';\n\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\tctx.scale(CANVAS_SCALE, CANVAS_SCALE);\n\t\t\tctx.translate(finalPositions.cx, finalPositions.cy);\n\t\t\t\n\t\t\tfor(var ci = map.bounds.maxCi; ci >= 1; ci--) {\t// don't need to draw ring 0\n\t\t\t\tif(options.chain.gridlines) {\n\t\t\t\t\t_this.drawGridlines(ctx, ci, map.radRange);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst lineWeightFactor = options.chain.lineWeight || 1.0;\n\t\t\tfor(var ci = map.bounds.maxCi; ci >= 1; ci--) {\n\t\t\t\tif(ci >= map.circles.length) { continue; }\n\t\t\t\t\n\t\t\t\tctx.save();\n\t\t\t\tif(options.chain.aura) { // draw aura first\n\t\t\t\t\tdrawConnections(ctx, map.circles[ci].nodes, function(node) {\n\t\t\t\t\t\tctx.save();\n\t\t\t\t\t\tctx.lineWidth = lineWeightFactor;\n\t\t\t\t\t\tconst auraColor = propertyFromCssClass(node.styles, 'color');\n\t\t\t\t\t\tctx.shadowBlur = 11 * lineWeightFactor;\n\t\t\t\t\t\tctx.shadowColor = auraColor;\n\t\t\t\t\t\tctx.strokeStyle = 'black';\n\t\t\t\t\t\tfor(let ai = 0; ai < 8; ai++)\n\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\tctx.restore();\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdrawConnections(ctx, map.circles[ci].nodes, function(node) {\t\t\n\t\t\t\t\tctx.lineWidth = lineWeightFactor * parseInt(propertyFromCssClass(node.styles, 'border-width')) || 2;\n\t\t\t\t\tctx.strokeStyle = propertyFromCssClass(node.styles, 'border-top-color');\n\t\t\t\t\tctx.setLineDash ({ dashed: [5, 3] }[propertyFromCssClass(node.styles, 'border-top-style')] || []);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t});\t\t\t\t\t\n\n\t\t\t\tctx.restore();\n\t\t\t}\t\n\t\t}\n\t\t\n\t\t// Remove any maps which aren't in use any more\n\t\tfor(var mi = maps.length; ; mi++) {\n\t\t\tconst div = document.getElementById('map' + mi);\n\t\t\tif(div) { div.parentNode.removeChild(div); }\n\t\t\telse { break; }\n\t\t}\n\t\t\n\t\t// Set scroll back to where it was\n\t\tchainParent.scrollLeft = previousScroll.x;\n\t\tchainParent.scrollTop = previousScroll.y;\n\t}\n\t\n\tfunction drawConnections(ctx, nodes, drawFunction) {\n\t\tfor(var ni = 0; ni < nodes.length; ni++) {\n\t\t\tconst node = nodes[ni];\n\t\t\tif(!node.position) { continue; }\t// not drawn on map\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(node.position.x, node.position.y);\n\t\t\t_this.drawConnection(ctx, node);\n\t\t\tdrawFunction(node);\n\t\t}\t\t\n\t}\n\t\n\t/** The coordinate space for the full range. May be based on the total requested arc */\n\tthis.initialRads = function(minArc) { return Math.PI; }\n\t\n\t/** How many levels to skip to allow more space for the nodes. Only makes sense if each level is \"wider\" than the previous so it will have more space. */\n\tthis.skipLevels = function(ci, nodes, minRad, maxRad, parentCollapsed) { return 0; }\n\t\n\t/** Set the position of this node based on its level and radial position within the level\n\tA \"position\" property with x and y must be set. Other values used in drawConnection may also be set */\n\tthis.setPosition = function(node, ci, rad_centre) { throw 'must define setPosition'; }\n\t\n\t/** Draw the connection from this node to its parent. The current point will be the node's position. By default, draws a line */\n\tthis.drawConnection = function(ctx, node) {\n\t\tctx.lineTo(node.parent.position.x, node.parent.position.y);\t\t\t\n\t}\n\n\t/** Draw grid lines for this level */\n\tthis.drawGridlines = function(ctx, ci, radRange) { }\n\t\n\tthis.adjustAlignmentDelta = function(ci, rad_centre) { return 0; }\n\t\n\t/** Override to not centre the map and centre node */\n\tthis.centringOptions = { x: true, y: true, root_node: true };\n\t\n\t/** Add the nodes for this ring/level and all further rings to the container, and return the bounds of the space used by it\n\tCalled recursively for chain sub-sections\n\t@param ci The index of the current level\n\t@param nodes The node data (see chain-map) for nodes within this level\n\t@param minRad The minimum radial coordinate for this section of chain\n\t@param maxRad The maximum radial coordinate for this section of chain\n\t@param collapsed The list of systems which have been collapsed \n\t*/\n\tfunction makeDivsForRing(innerContainer, ci, nodes, minRad, maxRad, collapsed) {\n\t\tconst bounds = { x: [0, 0], y: [0, 0], maxCi: ci };\n\t\tif(!nodes.length) { return bounds; }\n\t\tconst parentCollapsed = collapsed.indexOf(1 * (nodes[0].parent || {}).systemID) >= 0;\n\t\tconst totalArc = parentCollapsed ? nodes.length : nodes.reduce(function(acc, x) { return acc + x.minArc; }, 0);\n\t\tconst rads_per_arc = (maxRad - minRad) / totalArc;\n\t\tvar rad_offset = minRad;\n\t\tfunction getNodeRadialPosition(node) {\n\t\t\tconst dr = (parentCollapsed ? 1 : node.minArc) * rads_per_arc,\n\t\t\t\trad_centre = rad_offset + (dr / 2);\n\t\t\treturn { dr: dr, rad_centre: rad_centre };\n\t\t}\n\t\tvar alignment_delta = _this.adjustAlignmentDelta(ci, getNodeRadialPosition(nodes[0]).rad_centre);\n\t\t\n\t\tci += _this.skipLevels(ci, nodes, minRad, maxRad, parentCollapsed);\n\n\t\t\n\t\tfor(var ni = 0; ni < nodes.length; ni++) {\n\t\t\tconst node = nodes[ni];\t\n\t\t\t\n\t\t\t// Make the node\n\t\t\tconst frag = document.createRange().createContextualFragment('<div class=\"node-wrapper\">' + node.markup + '</div>');\n\t\t\tnode.domNode = frag.firstChild;\n\t\t\tinnerContainer.appendChild(node.domNode);\n\t\t\tconst systemID = 1 * node.systemID;\n\t\t\t$(node.domNode).dblclick(() => _this.collapse(systemID, collapsed.indexOf(systemID) < 0));\n\t\t\t\n\t\t\t// Position the node\n\t\t\tconst nodeRadialPosition = getNodeRadialPosition(node);\n\t\t\t\n\t\t\t_this.setPosition(node, ci, nodeRadialPosition.rad_centre + alignment_delta);\n\t\t\t\n\t\t\tif(node.position.x < bounds.x[0]) { bounds.x[0] = node.position.x; }\n\t\t\tif(node.position.x > bounds.x[1]) { bounds.x[1] = node.position.x; }\n\t\t\tif(node.position.y < bounds.y[0]) { bounds.y[0] = node.position.y; }\n\t\t\tif(node.position.y > bounds.y[1]) { bounds.y[1] = node.position.y; }\n\t\t\t\n\t\t\tnode.domNode.style.left = node.position.x + 'px';\n\t\t\tnode.domNode.style.top = node.position.y + 'px';\n\t\t\t\n\t\t\tif(parentCollapsed) {\n\t\t\t\tnode.domNode.style.display = 'none';\n\t\t\t} else {\t\t\t\t\n\t\t\t\t// Do the segment of the next circle\n\t\t\t\tconst excess = (ci > 0 && nodeRadialPosition.dr > node.minArc * ci) ? nodeRadialPosition.dr - node.minArc * ci : 0;\n\t\t\t\tif(node.children.length) {\n\t\t\t\t\tconst nextBounds = makeDivsForRing(innerContainer, ci + 1, node.children, rad_offset + (0.5 * excess) + alignment_delta, rad_offset - (0.5 * excess) + alignment_delta + nodeRadialPosition.dr, collapsed);\n\t\t\t\t\tif(nextBounds.x[0] < bounds.x[0]) { bounds.x[0] = nextBounds.x[0]; }\n\t\t\t\t\tif(nextBounds.x[1] > bounds.x[1]) { bounds.x[1] = nextBounds.x[1]; }\n\t\t\t\t\tif(nextBounds.y[0] < bounds.y[0]) { bounds.y[0] = nextBounds.y[0]; }\n\t\t\t\t\tif(nextBounds.y[1] > bounds.y[1]) { bounds.y[1] = nextBounds.y[1]; }\n\t\t\t\t\tif(nextBounds.maxCi > bounds.maxCi) { bounds.maxCi = nextBounds.maxCi; }\n\t\t\t\t}\n\t\t\t}\n\t\t\trad_offset += nodeRadialPosition.dr;\n\t\t}\n\t\t\n\t\treturn bounds;\n\t}\n};\n\n/** https://stackoverflow.com/questions/40978050 */\nfunction propertyFromCssClass(className, property) {\n\tif(Array.isArray(className)) { className = className.join(' '); }\n\tvar elem = document.getElementById('temp-div-' + className);\n\tif(!elem) {\n\t  elem = document.createElement(\"div\");\n\t  elem.id = 'temp-div-' + className;\n\t  elem.style.cssText = \"position:fixed;left:-100px;top:-100px;width:1px;height:1px;\";\n\t  elem.className = className + ' temp';\n\t  document.body.appendChild(elem);  // required in some browsers\n\t  }\n  const prop = getComputedStyle(elem).getPropertyValue(property);\n  return prop;\n}\t\n\n/** https://stackoverflow.com/questions/118241\nUsing the DOM approach because we have a fully styled node, not just text */\nfunction measureNode(markup) {\n\tvar elem = document.getElementById('temp-div-node-width');\n\tif(!elem) {\n\t  elem = document.createElement(\"div\");\n\t  elem.id = 'temp-div-node-width';\n\t  elem.style.cssText = \"position:fixed;left:-100px;top:-100px;\";\n\t  elem.className = 'node-wrapper';\n\t  document.body.appendChild(elem);  // required in some browsers\n  }\n  elem.innerHTML = markup;\n  return elem.firstChild.getBoundingClientRect();\n}","const ChainMapRendererOrgchartSide = function(owner) {\n\tChainMapRendererBase.apply(this, arguments);\n\t\n\tconst GRID_SIZE = { x: 70, y: 45 };\n\t\n\tthis.initialRads = function(minArc) { return minArc * 0.5; }\n\tthis.centringOptions = { y: true };\n\t\n\tfunction project(rad, ci) { return {\n\t\tx: ((ci == 0 ? -0.3 : 0) + ci) * GRID_SIZE.x * options.chain.nodeSpacing.x,\t// root is larger so give some extra space\n\t\ty: rad * GRID_SIZE.y * options.chain.nodeSpacing.y\t\n\t}; }\n\t\n\tthis.setPosition = function(node, ci, rad_centre) {\n\t\tnode.position = project(rad_centre, ci);\n\t}\n\t\n\tthis.drawConnection = function(ctx, node) {\n\t\tconst ave_x = 0.5 * (node.position.x + node.parent.position.x);\n\t\tconst cp1 = { x: node.parent.position.x, y: node.position.y };\n\t\tconst cp2 = { x: node.parent.position.x, y: node.position.y };\n\t\t\n\t\tctx.bezierCurveTo(cp2.x, cp2.y, cp1.x, cp1.y, node.parent.position.x, node.parent.position.y);\n\t}\n\t\n\tthis.drawGridlines = function(ctx, ci, radRange) {\n\t\tctx.beginPath();\n\t\tconst start = project(radRange.min, ci), end = project(radRange.max, ci);\n\t\tctx.moveTo(start.x, start.y);\n\t\tctx.lineTo(end.x, end.y);\n\t\t\n\t\tctx.strokeStyle = propertyFromCssClass('grid-default', 'color');\n\t\tctx.stroke();\t\t\n\t\t\n\t\tctx.fillStyle = propertyFromCssClass('grid-default', 'color');\n\t\tctx.font = '10px Sans-serif';\n\t\tctx.fillText(ci, start.x + 5, start.y);\n\t}\t\t\n};\n\nChainMapRendererOrgchartSide.prototype = new ChainMapRendererBase();","const ChainMapRendererOrgchartTop = function(owner) {\n\tChainMapRendererBase.apply(this, arguments);\n\t\n\tconst GRID_SIZE = { x: 55, y: 45 };\n\t\n\tthis.initialRads = function(minArc) { return minArc * 0.5; }\n\tthis.centringOptions = { x: true };\n\t\n\tfunction project(rad, ci) { return {\n\t\tx: rad * GRID_SIZE.x * options.chain.nodeSpacing.x,\n\t\ty: ((ci == 0 ? -0.3 : 0) + ci) * GRID_SIZE.y * options.chain.nodeSpacing.y\t// root is larger so give some extra space\n\t}; }\n\t\n\tthis.setPosition = function(node, ci, rad_centre) {\n\t\tnode.position = project(rad_centre, ci);\n\t\tnode.rad_centre = rad_centre;\n\t}\n\t\n\tthis.calcMinArc = function(node) {\n\t\tconst arcFromSize = 0.2 + node.requestedSize.width / (1.0 * GRID_SIZE.x * options.chain.nodeSpacing.x); // 0.2 to leave a gap between adjacent nodes\n\t\treturn Math.max(arcFromSize, 1);\n\t}\n\t\n\tthis.drawConnection = function(ctx, node) {\n\t\tconst endpoint_y = node.parent.position.y; // + 10 * (3 - Math.abs(node.rad_centre - node.parent.rad_centre));\n\t\tconst ave_y = 0.5 * (node.position.y + endpoint_y);\n\t\tconst cp1 = { x: node.position.x, y: endpoint_y };\n\t\tconst cp2 = { x: node.position.x, y: endpoint_y };\n\t\t\n\t\tctx.bezierCurveTo(cp2.x, cp2.y, cp1.x, cp1.y, node.parent.position.x, endpoint_y);\n\t}\n\t\n\tthis.drawGridlines = function(ctx, ci, radRange) {\n\t\tctx.beginPath();\n\t\tconst start = project(radRange.min, ci), end = project(radRange.max, ci);\n\t\tctx.moveTo(start.x, start.y);\n\t\tctx.lineTo(end.x, end.y);\n\t\t\n\t\tctx.strokeStyle = propertyFromCssClass('grid-default', 'color');\n\t\tctx.stroke();\t\t\n\t\t\n\t\tctx.fillStyle = propertyFromCssClass('grid-default', 'color');\n\t\tctx.font = '10px Sans-serif';\n\t\tctx.fillText(ci, start.x, start.y + 12);\n\t}\t\t\n};\n\nChainMapRendererOrgchartTop.prototype = new ChainMapRendererBase();","const ChainMapRendererOrgchart = function(owner) {\n\tconst _this = this;\n\t\n\t/** Initialiser - callback from chart onload */\n\tthis.init = function() {\n\t\t_this.map = new google.visualization.OrgChart(document.getElementById(\"chainMap\"));\n\t\t_this.options = {allowHtml: true, allowCollapse: true, size: \"medium\", nodeClass: \"node\"};\n\n\t\tgoogle.visualization.events.addListener(_this.map, \"collapse\", _this.collapseHandler);\n\n\t\t_this.map.draw(new google.visualization.DataView(new google.visualization.DataTable({cols:[{label: \"System\", type: \"string\"}, {label: \"Parent\", type: \"string\"}]})), _this.options);\n\t}\n\t\n\t/** Is this renderer ready to accept draw calls? */\n\tthis.ready = function() { return !this.drawing && !!this.map; }\n\t\n\t/** Switch to this renderer. The renderer can be in a blank state; draw() will be called after */\n\tthis.switchTo = function() {\n\t\tdocument.getElementById('chainGrid').style.display = '';\n\t\tif(!_this.map) { google.charts.setOnLoadCallback(this.init); }\n\t}\n\t\n\t/** Switch away from this renderer. All node divs should be removed from the DOM */\n\tthis.switchFrom = function() {\n\t\tdocument.getElementById('chainGrid').style.display = 'none';\n\t\t_this.map.draw(new google.visualization.DataView(new google.visualization.DataTable({cols:[{label: \"System\", type: \"string\"}, {label: \"Parent\", type: \"string\"}]})), _this.options);\t\t\n\t}\n\t\n\t/** Redraw the map, based on the given node set, line overrides and list of collapsed systems */\n\tthis.draw = function(map, lines, collapsed) {\n\t\tthis.drawing = true;\n\t\tthis.map.draw(newView(map), this.options); \n\t\t\n\t\tfor (var x in collapsed) {\n\t\t\tconst s = collapsed[x];\n\t\t\tconst nodeId = $(\"#chainMap [data-nodeid='\"+s+\"']\").attr(\"id\");\n\t\t\tif (nodeId) {\n\t\t\t\tconst nodeVal = nodeId.split(\"node\")[1];\n\t\t\t\tthis.map.collapse(nodeVal - 1, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tupdateLines(map, lines);\n\t\tthis.drawing = false;\n\t};\n\t\n\tconst newView = function(json) {\n\t\tconst view = new google.visualization.DataView(new google.visualization.DataTable(json));\n\t\treturn view;\n\t};\n\t\n\tconst updateLines = function(map, lines) {\n\t\t_this.lastLineData = { map: map, lines: lines };\n\t\tfunction drawNodeLine(system, parent, mode, signatureID) {\n\t\t\t/*\tfunction for drawing colored lines  */\n\t\t\tif(typeof mode == 'string') { mode = [mode]; }\n\n\t\t\tfunction addModes(jquerySelector, prefixes) { return doModeClasses(jquerySelector, prefixes, function(s, c) { s.addClass(c); }); }\n\t\t\tfunction removeModes(jquerySelector, prefixes) { return doModeClasses(jquerySelector, prefixes, function(s, c) { s.removeClass(c); }); }\n\t\t\tfunction doModeClasses(jquerySelector, prefixes, classFunc) {\n\t\t\t\tprefixes = prefixes || [];\n\t\t\t\tprefixes.push('');\n\t\t\t\tprefixes.forEach(function(prefix) { \n\t\t\t\t\tmode.forEach( function(mode) { classFunc(jquerySelector, (prefix.length ? prefix + '-' : '') + mode); });\n\t\t\t\t});\n\t\t\t\treturn jquerySelector;\n\t\t\t}\n\n\t\t\t// Find node in chainmap\n\t\t\t//var $node = $(\"#chainMap [data-nodeid='\"+system+\"']\").parent();\n\t\t\tvar $node = $(\"#chainMap #node\"+system).parent();\n\n\t\t\tif ($node.length == 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Get node # in this line\n\t\t\tvar nodeIndex = Math.ceil(($node[0].cellIndex + 1) / 2 - 1);\n\n\t\t\t// applly to my top line\n\t\t\tvar $connector = addModes($($node.parent().prev().children(\"td.google-visualization-orgchart-lineleft, td.google-visualization-orgchart-lineright\")[nodeIndex]), [ 'left', 'right' ]);\n\n\t\t\t// Find parent node\n\t\t\t//var $parent = $(\"#chainMap [data-nodeid='\"+parent+\"']\").parent();\n\t\t\tvar $parent = $(\"#chainMap #node\"+parent).parent();\n\n\t\t\tif ($parent.length == 0 || $connector.length == 0)\n\t\t\t\treturn false;\n\n\t\t\t// Find the col of my top line\n\t\t\tvar nodeCol = 0, connectorCell = $connector[0].cellIndex;\n\t\t\t$node.parent().prev().find(\"td\").each(function(index) {\n\t\t\t\tnodeCol += this.colSpan;\n\n\t\t\t\tif (index == connectorCell) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Get node # in this line\n\t\t\tvar parentIndex = Math.ceil(($parent[0].cellIndex + 1) / 2 - 1);\n\n\t\t\t// Compensate for non-parent nodes (slight performance hit ~10ms)\n\t\t\tvar newparentIndex = parentIndex;\n\t\t\tfor (var i = 0; i <= parentIndex; i++) {\n\t\t\t\tvar checkSystem = 0;//$node.parent().prev().prev().prev().find(\"td:has([data-nodeid]):eq(\"+i+\")\").find(\"[data-nodeid]\").data(\"nodeid\");\n\t\t\t\t$node.parent().prev().prev().prev().find(\"td > [data-nodeid]\").each(function(index) {\n\t\t\t\t\tif (index == i) {\n\t\t\t\t\t\tcheckSystem = $(this).attr(\"id\").replace(\"node\", \"\");//$(this).data(\"nodeid\");\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif ($.map(map.rows, function(node) { return node.c[1].v == checkSystem ? node : null; }).length <= 0) {\n\t\t\t\t\tnewparentIndex--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentIndex = newparentIndex;\n\n\t\t\t// Apply to parent bottom line\n\t\t\tvar $connecte = addModes($($node.parent().prev().prev().children(\"td.google-visualization-orgchart-lineleft, td.google-visualization-orgchart-lineright\")[parentIndex]), [ 'left', 'right'] );\n\n\t\t\t// the beans\n\t\t\tvar col = 0, parent = false, me = false;\n\t\t\t$node.parent().prev().prev().find(\"td\").each(function(index, value) {\n\t\t\t\tcol += this.colSpan;\n\n\t\t\t\tif (me && parent) {\n\t\t\t\t\t// All done - get outta here\n\t\t\t\t\treturn false;\n\t\t\t\t} else if (typeof($connecte[0]) != \"undefined\" && $connecte[0].cellIndex == index) {\n\t\t\t\t\tparent = true;\n\n\t\t\t\t\taddModes($(this), ['left']);\n\n\t\t\t\t\t// remove bottom border that points to the right\n\t\t\t\t\tif (!me && col != nodeCol) {\n\t\t\t\t\t\taddModes($(this), ['bottom']);\n\t\t\t\t\t}\n\n\t\t\t\t\t// parent and node are same - we are done\n\t\t\t\t\tif (nodeCol == col) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else if (col == nodeCol) {\n\t\t\t\t\tme = true;\n\n\t\t\t\t\taddModes($(this), [ 'bottom' ]);\n\t\t\t\t} else if (me || parent) {\n\t\t\t\t\tvar tempCol = 0, breaker = false, skip = false;\n\n\t\t\t\t\t$node.parent().prev().find(\"td\").each(function(index) {\n\t\t\t\t\t\ttempCol += this.colSpan;\n\n\t\t\t\t\t\tif (tempCol == col && ($(this).hasClass(\"google-visualization-orgchart-lineleft\") || $(this).hasClass(\"google-visualization-orgchart-lineright\"))) {\n\t\t\t\t\t\t\tif (parent == false) {\n\t\t\t\t\t\t\t\t// Stop looking cuz there is another node between us and parent\n\t\t\t\t\t\t\t\tbreaker = true;\n\t\t\t\t\t\t\t\tremoveModes($connecte, [ 'left', 'right' ]);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t} else if (parent == true) {\n\t\t\t\t\t\t\t\t// Lets make sure there isnt a node between the parent and me\n\t\t\t\t\t\t\t\tremoveModes($connecte, [ 'left', 'right' ]);\n\n\t\t\t\t\t\t\t\t$node.parent().prev().prev().find(\"td\").each(function(index) {\n\t\t\t\t\t\t\t\t\tif (index >= $connecte[0].cellIndex) {\n\t\t\t\t\t\t\t\t\t\t// there is a node after parent but before me\n\t\t\t\t\t\t\t\t\t\tremoveModes($(this), [ 'bottom' ]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tskip = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (breaker) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!skip) {\n\t\t\t\t\t\taddModes($(this), ['bottom'] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfor (var x in lines) {\n\t\t\tdrawNodeLine(lines[x][0], lines[x][1], lines[x][2].concat(['connection']), lines[x][3]);\n\t\t}\n\t};\n\n\tthis.collapseHandler = function() {\t\t\n\t\tif(_this.drawing) { return; }\n\t\t\n\t\tconst collapsed = _this.map.getCollapsedNodes();\n\t\tconst collapsedSystems = [];\n\t\tfor (x in collapsed) {\n\t\t\tvar systemID = $(\"#chainMap #node\"+(collapsed[x] +1)).data(\"nodeid\");\n\t\t\tcollapsedSystems.push(systemID);\n\t\t}\n\t\towner.updateCollapsed(collapsedSystems);\n\t\t\n\t\tif(_this.lastLineData) { updateLines(_this.lastLineData.map, _this.lastLineData.lines); }\n\t}\n\n\n};","const ChainMapRendererRadial = function(owner) {\n\tChainMapRendererBase.apply(this, arguments);\n\t\n\tconst CIRCLE_SIZE = { x: 70, y: 60, first_ring_delta: 0.3,\n\t\tringX: function(ci) { return ci == 0 ? 0 : (ci + this.first_ring_delta) * this.x * options.chain.nodeSpacing.x},\n\t\tringY: function(ci) { return ci == 0 ? 0 : (ci + this.first_ring_delta) * this.y * options.chain.nodeSpacing.y},\n\t };\n\t\n\tthis.arcFactor = function(ci) { return ci / (ci + 1.0); }\n\t\n\tthis.skipLevels = function(ci, nodes, minRad, maxRad, parentCollapsed) { \n\t\tconst max_nodes_per_rad = 1.4;\n\t\tlet skipped = 0;\n\t\tif(ci > 0 && !parentCollapsed) {\n\t\t\twhile(nodes.length > max_nodes_per_rad * ci * (maxRad - minRad) && ++skipped < 1) { }\n\t\t}\n\t\treturn skipped; \n\t}\n\t\n\tthis.setPosition = function(node, ci, rad_centre) {\n\t\tnode.radPosition = { r: ci, theta: rad_centre };\n\t\tnode.position = radToCartesian(node.radPosition);\t\t\n\t}\n\t\n\tthis.drawConnection = function(ctx, node) {\n\t\tconst cp1 = radToCartesian({ r: node.radPosition.r - 0.5, theta: (node.radPosition.theta + 2 * node.parent.radPosition.theta) / 3.0 });\n\t\tconst cp2 = radToCartesian({ r: node.radPosition.r - 0.5, theta: (2 * node.radPosition.theta + node.parent.radPosition.theta) / 3.0 });\n\t\t\n\t\tif(node.circle > 1) {\t\t\t\t\n\t\t\tctx.bezierCurveTo(cp2.x, cp2.y, cp1.x, cp1.y, node.parent.position.x, node.parent.position.y);\n\t\t} else {\n\t\t\tctx.lineTo(node.parent.position.x, node.parent.position.y);\t\t\t\n\t\t}\n\t}\n\t\n\tthis.adjustAlignmentDelta = function(ci, rad_centre) {\n\t\treturn ci == 1 ? -rad_centre\t// First node on first ring should be axis aligned\n\t\t: 0;\n\t}\n\t\n\tthis.drawGridlines = function(ctx, ci) {\n\t\tctx.beginPath();\n\t\tif(ctx.ellipse) {\n\t\t\tctx.lineWidth = 0.5;\n\t\t\tctx.setLineDash([]);\n\t\t\tctx.ellipse(0, 0, CIRCLE_SIZE.ringX(ci), CIRCLE_SIZE.ringY(ci), 0, 0, Math.PI * 2);\n\t\t}\n\t\tctx.strokeStyle = propertyFromCssClass('grid-default', 'color');\n\t\tctx.stroke();\t\t\n\t}\t\t\n\t\n\tfunction radToCartesian(rad) {\n\t\treturn { \n\t\t\tx: CIRCLE_SIZE.ringX(rad.r) * Math.sin(rad.theta), \n\t\t\ty: CIRCLE_SIZE.ringY(rad.r) * Math.cos(rad.theta)\n\t\t};\n\n\t}\n};\n\nChainMapRendererRadial.prototype = new ChainMapRendererBase();","var chain = new function() {\n\tvar chain = this;\n\tthis.map, this.view, this.drawing, this.data = {};\n\t\n\n\t// Third party suppliers should have:\n\t//  findLinks(systemId, ids) - Find links from the given system coming from the third party. ids contain a parent and a child ID; the child ID should be incremented for every new connection\n\tthirdPartySuppliers = [ eveScout ];\n\n\t// Renderer should have:\n\t//  ready() - Whether the renderer is initialised and can accept draw calls\n\t// switchTo() - Make this renderer active. The renderer can be in a blank state; draw() will be called after\n\t// switchFrom() - Switch away from this renderer. All node divs should be removed from the DOM, other items can be removed or made invisible\n\t// draw(map, lines, collapsedSystems) - Redraw the map, based on the given node set, line overrides and list of collapsed systems \n\t// collapse(systemID, toggle) - marks the system as collapsed/not collapsed\n\t// If the renderer allows collapsing of nodes then it will call updateCollapsed on the owner (the chain) with a list of collapsed systems in the current tab\n\t\n\tconst renderers = { \n\t\torgChart: new ChainMapRendererOrgchart(this),\n\t\torgChartTop: new ChainMapRendererOrgchartTop(this),\n\t\torgChartSide: new ChainMapRendererOrgchartSide(this),\n\t\tradial: new ChainMapRendererRadial(this)\n\t};\n\t\n\tthis.renderer = renderers[options.chain.renderer];\n\tthis.renderer.switchTo();\n\t\n\tthis.useRenderer = function(name) {\n\t\tif(!renderers[name]) { throw 'Unknown renderer ' + name; }\n\t\tif(chain.renderer != renderers[name]) {\n\t\t\tchain.renderer.switchFrom();\n\t\t\tchain.renderer = renderers[name];\n\t\t\tchain.renderer.switchTo();\n\t\t\tchain.redraw();\n\t\t}\n\t}\n\n\tthis.activity = function(data) {\n\t\t/*\tfunction for adding recent activity to chain map nodes\t*/\n\t\t//var data = typeof(data) !== \"undefined\" ? data : this.data.activity;\n\n\t\t// Hide all activity colored dots instead of checking each one\n\t\tvar elements = document.querySelectorAll(\"#chainMap .nodeActivity span\");\n\t\tfor (var i = 0, l = elements.length; i < l; ++i) {\n\t\t   elements[i].className = elements[i].className + \" invisible\";\n\t\t}\n\n\t\t// Loop through passed data and show dots by system\n\t\tvar elements = document.querySelectorAll(\"#chainMap [data-nodeid]\");\n\t\tfor (var i = 0, l = elements.length; i < l; ++i) {\n\t\t   var systemID = elements[i].getAttribute(\"data-nodeid\");\n\t\t   if (data[systemID]) {\n\t\t\t   var shipJumps = data[systemID].shipJumps;\n\t\t\t   var podKills = data[systemID].podKills;\n\t\t\t   var shipKills = data[systemID].shipKills;\n\t\t\t   var npcKills = data[systemID].npcKills;\n\t\t\t   var node = elements[i].getElementsByClassName(\"nodeActivity\")[0];\n\n\t\t\t   if (shipJumps > 0) {\n\t\t\t\t   var jumps = node.getElementsByClassName(\"jumps\")[0];\n\t\t\t\t   jumps.className = jumps.className.replace(/invisible/g, \"\");\n\t\t\t\t   jumps.setAttribute(\"data-tooltip\", shipJumps + \" Jumps\");\n\t\t\t   }\n\n\t\t\t   if (podKills > 0) {\n\t\t\t\t   var pods = node.getElementsByClassName(\"pods\")[0];\n\t\t\t\t   pods.className = pods.className.replace(/invisible/g, \"\");\n\t\t\t\t   pods.setAttribute(\"data-tooltip\", podKills + \" Pod Kills\");\n\t\t\t   }\n\n\t\t\t   if (shipKills > 0) {\n\t\t\t\t   var ships = node.getElementsByClassName(\"ships\")[0];\n\t\t\t\t   ships.className = ships.className.replace(/invisible/g, \"\");\n\t\t\t\t   ships.setAttribute(\"data-tooltip\", shipKills + \" Ship Kills\");\n\t\t\t   }\n\n\t\t\t   if (npcKills > 0) {\n\t\t\t\t   var npcs = node.getElementsByClassName(\"npcs\")[0];\n\t\t\t\t   npcs.className = npcs.className.replace(/invisible/g, \"\");\n\t\t\t\t   npcs.setAttribute(\"data-tooltip\", npcKills + \" NPC Kills\");\n\t\t\t   }\n\t\t   }\n\t\t}\n\n\t\tif (SystemActivityToolTips.attachedElements && SystemActivityToolTips.attachedElements.length > 0) {\n\t\t\tSystemActivityToolTips.detach($(\"#chainMap .whEffect\"));\n\t\t}\n\t\tSystemActivityToolTips.attach($(\"#chainMap .nodeActivity > span[data-tooltip]:not(.invisible)\"));\n\n\t\treturn data;\n\t}\n\n\tthis.occupied = function(data) {\n\t\t/*\tfunction for showing occupied icon  */\n\n\t\t// Hide all icons instead of checking each one\n\t\t$(\"#chainMap [data-icon='user'], #chainMap [data-icon='user'] + .badge\").addClass(\"invisible\");\n\n\t\t// Loop through passed data and show icons\n\t\tfor (var x in data) {\n\t\t\t$(\"#chainMap [data-nodeid='\"+data[x].systemID+\"'] [data-icon='user']\").removeClass(\"invisible\");\n\t\t\t$(\"#chainMap [data-nodeid='\"+data[x].systemID+\"'] [data-icon='user'] + .badge\").removeClass(\"invisible\").html(data[x].count);\n\t\t}\n\n\t\tOccupiedToolTips.attach($(\"#chainMap [data-icon='user']:not(.invisible)\"));\n\n\t\treturn data;\n\t}\n\n\tthis.flares = function(data) {\n\t\t/*\tfunction for coloring chain map nodes via flares  */\n\t\t//var data = typeof(data) !== \"undefined\" ? data : this.data.flares;\n\n\t\t// Remove all current node coloring instead of checking each one\n\t\t$(\"#chainMap div.node\").removeClass(\"redNode yellowNode greenNode\");\n\n\t\t// Remove all coloring from chain grid\n\t\t$(\"#chainGrid tr\").removeClass(\"red yellow green\");\n\n\t\t// Loop through passed data and add classes by system\n\t\tif (data) {\n\t\t\tfor (var x in data.flares) {\n\t\t\t\tvar systemID = data.flares[x].systemID;\n\t\t\t\tvar flare = data.flares[x].flare;\n\n\t\t\t\tvar row = ($(\"#chainMap [data-nodeid=\"+systemID+\"]\").addClass(flare+\"Node\").parent().index() - 1) / 3 * 2;\n\n\t\t\t\tif (row > 0) {\n\t\t\t\t\t$(\"#chainGrid tr:eq(\"+row+\")\").addClass(flare).next().addClass(flare);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tthis.grid = function() {\n\t\t/*  function for showing/hiding grid lines  */\n\t\t// This is an optional feature\n\t\tif (options.chain.gridlines == false) {\n\t\t\t$(\"#chainGrid tr\").addClass(\"hidden\");\n\t\t\treturn false;\n\t\t}\n\n\t\t$(\"#chainGrid tr\").removeClass(\"hidden\");\n\t\t//$(\"#chainGrid\").css(\"width\", \"100%\");\n\n\t\t// Calculate how many rows have systems, max 0 hack to prevent negative numbers, and rows above this number get hidden\n\t\tvar rows = Math.max(0, $(\".google-visualization-orgchart-table tr:has(.node)\").length * 2 - 1);\n\t\t$(\"#chainGrid tr:gt(\"+rows+\")\").addClass(\"hidden\");\n\t}\n\n\tthis.nodes = function(map) {\n\t\tvar chain = {cols: [{label: \"System\", type: \"string\"}, {label: \"Parent\", type: \"string\"}], rows: []};\n\t\tvar frigTypes = [\"Q003\", \"E004\", \"L005\", \"Z006\", \"M001\", \"C008\", \"G008\", \"A009\", \"SML\" ];\n\t\tvar connections = [];\n\t\tvar chainMap = this;\n\n\t\tfunction formatStatics(statics) {\n\t\t\tif(!statics) { return ''; }\n\t\t\telse if(statics.length > 4) { return '<span class=\"multi-static\">+</span>'; }\n\t\t\t\n\t\t\tconst shortCodeMap = { 'High-Sec': 'H', 'Low-Sec': 'L', 'Null-Sec': 'N', 'Triglavian':'▼',\n\t\t\t\t'Class-1': '1', 'Class-2': '2', 'Class-3': '3', 'Class-4': '4', 'Class-5' : 5, 'Class-6': 6\n\t\t\t};\n\t\t\tconst classMap = { H: 'hisec', L: 'lowsec', N: 'nullsec', '▼': 'triglavian' };\n\t\t\treturn statics.map(function(s) {\n\t\t\t\tconst text = shortCodeMap[appData.wormholes[s].leadsTo];\n\t\t\t\tconst className = classMap[text] || 'class-' +  text;\n\t\t\t\tconst tip = appData.wormholes[s].leadsTo + ' via ' + s;\n\t\t\t\treturn '<span class=\"' + className + '\" data-tooltip=\"' + tip + '\">' + text + '</span>';\n\t\t\t}).join('');\n\t\t}\n\n\t\tfunction topLevel(systemID, id) {\n\t\t\tif (!systemID || !tripwire.systems[systemID])\n\t\t\t\treturn false;\n\t\t\tconst tab = options.chain.tabs[options.chain.active];\n\t\t\tconst tabName = tab && tab.systemID != 0 && 0 > tab.systemID.indexOf(',') ? options.chain.tabs[options.chain.active].name : undefined;\n\t\t\treturn makeSystemNode(systemID, id, null, null, tabName, '&nbsp;', ['top-level']);\n\t\t}\n\n\t\tfunction makeSystemNode(systemID, id, whId, inSigId, systemName, nodeTypeMarkup, additionalClasses) {\n\t\t\t// System type switch\n\t\t\tconst system = systemAnalysis.analyse(systemID);\n\t\t\tvar systemType = \"<span class='\" + system.systemTypeClass + \"'>\" + system.systemTypeName + system.systemTypeModifiers.join('') + \"</span>\";\n\t\t\t\n\t\t\tsystemName = _.escape(systemName);\n\t\t\tconst systemNameText = \n\t\t\t\toptions.chain.sigNameLocation == 'name' ? (systemName ? systemName : system.name ? system.name : '&nbsp;') :\n\t\t\t\toptions.chain.sigNameLocation == 'name_prefix' ?\n\t\t\t\t\t(systemName ? systemName + (system.name ? ' - ' + system.name : '') : (system.name ? system.name : '&nbsp;')) :\n\t\t\t\t(system.name ? system.name : '&nbsp;');\t\n\n\t\t\tvar node = {v: id, systemID: systemID };\n\t\t\tvar chainNode = \"<div id='node\"+id+\"' data-nodeid='\"+systemID+\"'\"\n\t\t\t\t+(whId ? \" data-sigid='\"+whId+\"'\" : '')\n\t\t\t\t+(inSigId ? \" data-inSigid='\"+inSigId+\"'\" : '')\n\t\t\t\t+\" class='node \" + ((additionalClasses || []).join(' ')) + \"'>\"\n\t\t\t\t\t\t\t+\t\"<div class='nodeIcons'>\"\n\t\t\t\t\t\t\t+\t\t\"<div style='float: left;'>\"\n\t\t\t\t\t\t\t+ systemRendering.renderEffect(system, 'i')\n\t\t\t\t\t\t\t+\t\t\"</div>\"\n\t\t\t\t\t\t\t+\t\t\"<div style='float: right;'>\"\n\t\t\t\t\t\t\t+\t\t\t\"<i data-icon='user' class='invisible'></i>\"\n\t\t\t\t\t\t\t+\t\t\t\"<span class='badge invisible'></span>\"\n\t\t\t\t\t\t\t+\t\t\"</div>\"\n\t\t\t\t\t\t\t+\t\"</div>\"\n\t\t\t\t\t\t\t+\t\"<h4 class='nodeClass'>\"+systemType+\"</h4>\"\n\t\t\t\t\t\t\t+\t\"<h4 class='nodeSystem'>\"\n\t\t\t\t\t\t\t+\t\t(system.name ? \"<a href='.?system=\"+system.name+\"'>\"+systemNameText+\"</a>\" : systemNameText)\n\t\t\t\t\t\t\t+\t\"</h4>\"\n\t\t\t\t\t\t\t+\t\"<h4 class='nodeType'>\" + nodeTypeMarkup + \"</h4>\"\n\t\t\t\t\t\t\t+\t\"<div class='statics'>\"\n\t\t\t\t\t\t\t+ formatStatics(system.name ? system.statics : [])\n\t\t\t\t\t\t\t+\t\"</div>\"\n\t\t\t\t\t\t\t+\t\"<div class='nodeActivity'>\"\n\t\t\t\t\t\t\t+\t\t\"<span class='jumps invisible'>&#9679;</span>&nbsp;<span class='pods invisible'>&#9679;</span>&nbsp;&nbsp;<span class='ships invisible'>&#9679;</span>&nbsp;<span class='npcs invisible'>&#9679;</span>\"\n\t\t\t\t\t\t\t+\t\"</div>\"\n\t\t\t\t\t\t\t+\"</div>\";\n\n\t\t\tnode.f = chainNode;\n\n\t\t\treturn node;\n\t\t}\n\t\t\n\t\tfunction makeCalcChildNode(childID, node, targetSystem) {\n\t\t\tvar path = guidance.findShortestPath(tripwire.map.shortest, targetSystem - 30000000, node.child.systemID - 30000000);\n\t\t\tif(!path) { return null; }\n\t\t\t\n\t\t\tvar calcNode = { calculated: true};\n\t\t\tcalcNode.life = \"Gate\";\n\t\t\tcalcNode.parent = {};\n\t\t\tcalcNode.parent.id = node.child.id;\n\t\t\tcalcNode.parent.systemID = node.child.systemID;\n\t\t\tcalcNode.parent.name = node.child.name;\n\t\t\tcalcNode.parent.type = node.child.type;\n\t\t\tcalcNode.parent.nth = node.child.nth;\n\n\t\t\tcalcNode.child = {};\n\t\t\tcalcNode.child.id = ++childID;\n\t\t\tcalcNode.child.systemID = targetSystem;\n\t\t\tcalcNode.child.name = tripwire.systems[targetSystem].name;\n\t\t\tcalcNode.child.path = path;\n\t\t\tcalcNode.child.jumps = path.length - 1;\n\t\t\tcalcNode.child.nth = null;\t\t\t\n\t\t\t\n\t\t\treturn { childID, calcNode };\n\t\t}\n\n\t\tfunction findLinks(system) {\n\t\t\tif (system[0] <= 0) return false;\n\n\t\t\tvar parentID = parseInt(system[1]), childID = chainList.length;\n\t\t\tconst connectedTo = [];\t// Local cache, in addition to usedLinks, for extra link sources\n\n\t\t\t/** Add the 'current' and 'favourite' calculated nodes if appropriate */\n\t\t\tconst addCalcChildNodes = function(node) {\n\t\t\t\tif ($(\"#show-viewing\").hasClass(\"active\") && tripwire.systems[node.child.systemID] && !tripwire.systems[viewingSystemID].class && !tripwire.systems[node.child.systemID].class && viewingSystemID != node.child.systemID ) {\n\t\t\t\t\tvar calcNode = makeCalcChildNode(childID, node, viewingSystemID);\n\t\t\t\t\tif(calcNode) {\n\t\t\t\t\t\tchildID = calcNode.childID;\n\n\t\t\t\t\t\tchainLinks.push(calcNode.calcNode);\n\t\t\t\t\t\tchainList.push([0, childID]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ($(\"#show-favorite\").hasClass(\"active\") && tripwire.systems[node.child.systemID] && !tripwire.systems[node.child.systemID].class) {\n\t\t\t\t\tfor (var x in options.favorites) {\n\t\t\t\t\t\tif (tripwire.systems[options.favorites[x]].regionID >= 11000000 || tripwire.systems[node.child.systemID].regionID >= 11000000 || options.favorites[x] == node.child.systemID)\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tvar calcNode = makeCalcChildNode(childID, node, options.favorites[x]);\n\t\t\t\t\t\tif(calcNode) {\n\t\t\t\t\t\t\tchildID = calcNode.childID;\n\n\t\t\t\t\t\t\tchainLinks.push(calcNode.calcNode);\n\t\t\t\t\t\t\tchainList.push([0, childID]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t};\n\n\t\t\tfor (var x in chainData) {\n\t\t\t\tvar wormhole = chainData[x];\t\t\t\t\n\t\t\t\tif ($.inArray(wormhole.id, usedLinks) == -1) {\n\t\t\t\t\tvar sig1, sig2, sig1Type, sig2Type,\n\t\t\t\t\t\tparent, child, parentType, childType;\n\t\t\t\t\tif (wormhole.parent == \"secondary\") {\n\t\t\t\t\t\tsig1 = tripwire.client.signatures[wormhole.secondaryID];\n\t\t\t\t\t\tsig2 = tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsig1 = tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t\tsig2 = tripwire.client.signatures[wormhole.secondaryID];\n\t\t\t\t\t}\n\t\t\t\t\tsig1Type = wormhole.type; sig2Type = 'K162';\n\t\t\t\t\t\n\t\t\t\t\tif (sig1 && sig1.systemID == system[0]) {\n\t\t\t\t\t\tparent = sig1; child = sig2;\n\t\t\t\t\t\tparentType = sig2Type; childType = sig1Type;\n\t\t\t\t\t} else if(sig2 && sig2.systemID == system[0]) {\n\t\t\t\t\t\tparent = sig2; child = sig1;\n\t\t\t\t\t\tchildType = sig2Type; parentType = sig1Type;\n\t\t\t\t\t} else { continue; }\n\t\t\t\t\t\n\t\t\t\t\tvar node = {};\n\t\t\t\t\tnode.id = wormhole.id;\n\t\t\t\t\tnode.life = wormhole.life;\n\t\t\t\t\tnode.mass = wormhole.mass;\n\t\t\t\t\tnode.time = parent.modifiedTime;\n\n\t\t\t\t\tnode.parent = {};\n\t\t\t\t\tnode.parent.id = parentID;\n\t\t\t\t\tnode.parent.systemID = tripwire.systems[parent.systemID] ? parent.systemID : parent.systemID + \"|\" + Math.floor(Math.random() * Math.floor(10000));\n\t\t\t\t\tnode.parent.name = child.name;\n\t\t\t\t\tnode.parent.type = parentType;\n\t\t\t\t\tnode.parent.nth = null;\n\t\t\t\t\tnode.parent.signatureID = child.signatureID;\n\t\t\t\t\tnode.parent.sigIndex = child.id;\n\n\t\t\t\t\tnode.child = {};\n\t\t\t\t\tnode.child.id = ++childID;\n\t\t\t\t\tnode.child.systemID = tripwire.systems[child.systemID] ? child.systemID : child.systemID + \"|\" + Math.floor(Math.random() * Math.floor(10000));\n\t\t\t\t\tnode.child.name = parent.name;\n\t\t\t\t\tnode.child.type = childType;\n\t\t\t\t\tnode.child.nth = null;\n\t\t\t\t\tnode.child.signatureID = parent.signatureID;\n\t\t\t\t\tnode.child.sigIndex = parent.id;\n\n\t\t\t\t\tchainLinks.push(node);\n\t\t\t\t\tchainList.push([node.child.systemID, node.child.id, system[2]]);\n\t\t\t\t\tusedLinks.push(node.id);\n\t\t\t\t\tif(tripwire.systems[child.systemID]) { connectedTo.push(1 * child.systemID); }\t// cast to number - sigs have the system as a string\n\t\t\t\t\t// usedLinks[system[2]].push(node.id);\n\t\t\t\t\t\n\t\t\t\t\taddCalcChildNodes(node);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthirdPartySuppliers.forEach(function(supplier) {\t\t\t\t\n\t\t\t\tconst ids = { parentID: parentID, nextChildID: ++childID };\n\t\t\t\tconst supplierNodes = supplier.findLinks(1 * system[0], ids);\n\t\t\t\tif(!supplierNodes) { return; }\n\t\t\t\tchildID = ids.nextChildID - 1;\n\n\t\t\t\tfor(var ti = 0; ti < supplierNodes.length; ti++) {\n\t\t\t\t\tvar supplierNode = supplierNodes[ti];\n\t\t\t\t\tif(0 > usedLinks.indexOf(supplierNode.id)) {\n\t\t\t\t\t\tif(0 > connectedTo.indexOf(supplierNode.child.systemID)) { // not in our map already\n\t\t\t\t\t\t\tsupplierNode.thirdParty = supplier.nodeNameSuffix;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tchainLinks.push(supplierNode);\n\t\t\t\t\t\t\tchainList.push([supplierNode.child.systemID, supplierNode.child.id, system[2]]);\n\t\t\t\t\t\t\tconnectedTo.push(supplierNode.child.systemID);\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\taddCalcChildNodes(supplierNode);\t\t\n\t\t\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\t\t\t// Always want to do this, even if we didn't add it, because in that case the link is overridden by one on this mask, so it is 'used' even if not made visible\n\t\t\t\t\t\tusedLinks.push(supplierNode.id);\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif ($(\"#chainTabs .current\").length > 0) {\n\t\t\tvar systems = $(\"#chainTabs .current .name\").data(\"tab\").toString().split(\",\");\n\t\t\tvar chainList = [];\n\t\t\tvar chainData = map;\n\t\t\tvar chainLinks = [];\n\t\t\tvar usedLinks = [];\n\n\t\t\tif (systems == 0) {\n                                let i = 0;\n                                Object.keys(map).slice()/*.reverse()*/.forEach(x => {\n\t\t\t\t        const parent = tripwire.client.signatures[map[x].initialID];\n\t\t\t\t        const child = tripwire.client.signatures[map[x].secondaryID];\n                                        if (parent && tripwire.systems[parent.systemID] && typeof(tripwire.systems[parent.systemID].class) == \"undefined\") {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\t// usedLinks[parent.systemID] = [];\n\t\t\t\t\t\tchain.rows.push({c: [topLevel(parent.systemID, i), {v: null}]});\n\t\t\t\t\t\tchainList.push([parent.systemID, i, parent.systemID]);\n                                        } else if (child && tripwire.systems[child.systemID] && typeof(tripwire.systems[child.systemID].class) == \"undefined\") {\n\t\t\t\t  \t        i++;\n\t\t\t\t  \t\t// usedLinks[child.systemID] = [];\n\t\t\t\t\t\tchain.rows.push({c: [topLevel(child.systemID, i), {v: null}]});\n\t\t\t\t\t\tchainList.push([child.systemID, i, child.systemID]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfor (var x in systems) {\n\t\t\t\t\t// usedLinks[systems[x]] = [];\n\t\t\t\t\tchain.rows.push({c: [topLevel(systems[x], parseInt(x) + 1), {v: null}]});\n\t\t\t\t\tchainList.push([systems[x], parseInt(x) + 1, systems[x]]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < chainList.length; i++) {\n\t\t\t\tfindLinks(chainList[i]);\n\t\t\t}\n\t\t} else {\n\t\t\t$(\"#chainError\").hide();\n\n\t\t\tvar row = {c: []};\n\t\t\tvar systemID = viewingSystemID;\n\n\t\t\trow.c.push(topLevel(systemID, 1), {v: null});\n\n\t\t\tchain.rows.push(row);\n\n\t\t\tvar chainList = [[systemID, 1]];\n\t\t\tvar chainData = map;\n\t\t\tvar chainLinks = [];\n\t\t\tvar usedLinks = [];\n\n\t\t\tfor (var i = 0; i < chainList.length; ++i) {\n\t\t\t\tfindLinks(chainList[i]);\n\t\t\t}\n\t\t}\n\n\t\tconst systemsInChainMap = {};\n\t\t\n\t\tfor (var x in chainLinks) {\n\t\t\tvar node = chainLinks[x];\n\t\t\tvar row = {c: []};\n\t\t\t\n\t\t\tconst sigText = options.chain[\"node-reference\"] == \"id\" ? (node.child.signatureID ? node.child.signatureID.substring(0, 3) : \"???\") :\n\t\t\t\t\t(node.child.type || \"(?)\");\n\t\t\tconst nodeTypeMarkup = node.child.path ? \n\t\t\t\tsystemRendering.renderPath(node.child.path) :\n\t\t\t\t(node.child.sigIndex ? \"<a href='#' onclick='sigDialog.openSignatureDialog({data: { signature: \" + node.child.sigIndex + \", mode: \\\"update\\\" }}); return false;'>\" : '') + _.escape(\n\t\t\t\t\tnode.child.name && options.chain.sigNameLocation == 'ref' ? node.child.name :\n\t\t\t\t\tnode.child.name && options.chain.sigNameLocation == 'ref_prefix' ? node.child.name + ' - ' + sigText :\n\t\t\t\t\tsigText\n\t\t\t\t) + (node.child.sigIndex ? '</a>' : '');\n\t\t\tconst additionalClasses = node.calculated ? ['calc'] : systemsInChainMap[node.child.systemID] ? [ 'loop' ] : [];\n\t\t\tif(node.thirdParty) { additionalClasses.push('third-party', 'third-party-' + node.thirdParty); }\n\n\t\t\t// Connection modifiers\n\t\t\tvar modifiers = [];\t\t\t\n\t\t\tif (node.life == \"critical\") { modifiers.push('eol'); }\n\t\t\tif (node.mass == \"critical\") { modifiers.push('critical'); }\n\t\t\telse if (node.mass == \"destab\") { modifiers.push('destab'); }\n\t\t\t\n\t\t\tconst connectionWormhole = wormholeAnalysis.wormholeFromTypePair(node.parent.type, node.child.type) || \n\t\t\t\twormholeAnalysis.likelyWormhole(node.parent.systemID, node.child.systemID);\n\t\t\tif(connectionWormhole.jump) { \n\t\t\t\tmodifiers.push('jm-' + (connectionWormhole.jump / 1e6) + 'kt'); \n\t\t\t\tif(connectionWormhole.jump == 5000000) { modifiers.push('frig'); }\n\t\t\t}\n\t\t\t\n\t\t\tconst parentModifiers = (systemsInChainMap[node.parent.systemID] || { chainModifiers:[]}).chainModifiers;\n\t\t\trow.chainModifiers = modifiers.concat(parentModifiers.filter(function(p) { return modifiers.indexOf(p) < 0; }));\n\t\t\t\n\t\t\trow.chainModifiers.forEach(function(cm) { modifiers.push(cm + '-chain')});\n\t\t\t\n\t\t\t// Update result set (rows/connections)\n\t\t\tconst child = makeSystemNode(node.child.systemID, node.child.id, node.id, node.child.sigIndex, node.child.name, nodeTypeMarkup, additionalClasses.concat(modifiers));\n\n\t\t\tvar parent = {v: node.parent.id};\n\n\t\t\trow.c.push(child, parent);\n\t\t\tchain.rows.push(row);\n\t\t\tconnections.push(Array(child.v, parent.v, modifiers, node.id));\n\t\t\t\n\t\t\tconst parentPathHome = (systemsInChainMap[node.parent.systemID] || { pathHome:[]}).pathHome;\n\t\t\trow.pathHome = parentPathHome.concat(node.child);\n\t\t\t\n\t\t\tif(!node.calculated) { \n\t\t\t\tsystemsInChainMap[node.child.systemID] = row; // store for loops/chain modifiers\n\t\t\t}\t\n\t\t}\n\n\t\t// Apply critical/destab line colors\n\t\tconnections.reverse(); // so we apply to outer systems first\n\n\t\tconst exits = Object.keys(systemsInChainMap).filter(function(x) { return x < 31000000; });\n\t\treturn {map: chain, lines: connections, systemsInChainMap: systemsInChainMap, exits: exits};\n\t}\n\n\n\tthis.setActiveTab = function(newIndex) {\n\t\t$(\"#chainTabs .tab\").removeClass(\"current\");\n\t\toptions.chain.active = newIndex;\n\t\tif(newIndex != null) {\n\t\t\t$(\"#chainTabs .tab\").eq(newIndex).addClass('current');\n\t\t}\n\t\t\n\t\toptions.save();\n\t\tchain.redraw();\n\t\ttripwire.parse(tripwire.client, \"refresh\");\n\t}\n\n\tthis.redraw = function() {\n\t\tthis.useRenderer(options.chain.renderer);\n\t\t\n\t\tvar data = $.extend(true, {}, this.data);\n\t\tdata.map = $.extend(true, {}, data.rawMap);\n\n\t\tthis.draw(data);\n\t}\n\t\n\tvar drawRetryTimer = null;\n\n\tthis.draw = function(data) {\n\t\tvar data = typeof(data) !== \"undefined\" ? data : {};\n\t\tclearTimeout(drawRetryTimer);\n\n\t\t// We need to make sure Google chart is ready and we have signature data for this system before we begin, otherwise delay\n\t\tif (!this.renderer.ready() || (Object.keys(data.map||{}).length && !tripwire.client.signatures)) {\n\t\t\tdrawRetryTimer = setTimeout(function() { chain.draw(data) }, 100);\n\t\t\treturn;\n\t\t}\n\n\t\tif (data.map) {\n\t\t\tthis.drawing = true;\n\n\t\t\tthis.data.rawMap = $.extend(true, {}, data.map);\n\n\t\t\t// if (options.chain.active == null || (options.chain.tabs[options.chain.active] && options.chain.tabs[options.chain.active].evescout == false)) {\n\t\t\t// \tif (options.masks.active != \"273.0\") {\n\t\t\t// \t\tfor (var i in data.map) {\n\t\t\t// \t\t\tif (data.map[i].mask == \"273.0\") {\n\t\t\t// \t\t\t\tdelete data.map[i];\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t\t// Sort so we keep the chain map order the same\n\t\t\tObject.sort(data.map, \"id\");\n\n\t\t\t$.extend(data, this.nodes(data.map)); // 250ms -> <100ms\n\t\t\t$.extend(this.data, data);\n\t\t\t\n\t\t\tconst collapsedSystems = options.chain.tabs[options.chain.active] ? (options.chain.tabs[options.chain.active].collapsed || []) : [];\n\n\t\t\tthis.renderer.draw(data.map, data.lines, collapsedSystems); // 150ms\n\t\t\t//this.map.draw(this.newView(data.map), this.options); // 150ms\n\n//\t\t\tthis.renderer.lines(data); // 300ms\n\t\t\tthis.grid(); // 4ms\n\n\t\t\t// Apply current system style\n\t\t\t$(\"#chainMap [data-nodeid='\"+viewingSystemID+\"']\").parent().addClass(\"currentNode\"); // 0.1ms\n\n\t\t\t// Remove old system effect tooltips and add current ones\n\t\t\tif (WormholeTypeToolTips.attachedElements && WormholeTypeToolTips.attachedElements.length > 0) {\n\t\t\t\tWormholeTypeToolTips.detach($(\"#chainMap .whEffect\"));\n\t\t\t}\n\t\t\tWormholeTypeToolTips.attach($(\"#chainMap .whEffect[data-icon]\")); // 0.30ms\n\t\t\tWormholeRouteToolTips.attach($(\"#chainMap .path span[data-tooltip]\"));\n\t\t\tSystemActivityToolTips.attach($(\"#chainMap .nodeClass span[data-tooltip]\"));\n\t\t\t\n\t\t\t// Update dependent controls: Path to chain/home\n\t\t\tthis.renderInChain(data);\n\t\t\t\n\t\t\tthis.drawing = false;\n\t\t\t\n\t\t\tsystemPanel.update();\n\t\t}\n\n\t\t// Gather latest system activity\n\t\tif (!this.data.activity || new Date() > this.data.activity.expires) {\n\t\t\tdata.activity = {};\n\t\t\ttripwire.esi.universeJumps()\n\t\t\t\t.done(function(results, status, request) {\n\t\t\t\t\tdata.activity.expires = new Date(request.getResponseHeader(\"expires\"));\n\t\t\t\t\t$.each(results, function(x) {\n\t\t\t\t\t\tdata.activity[results[x].system_id] = {\n\t\t\t\t\t\t\tsystemID: results[x].system_id,\n\t\t\t\t\t\t\tshipJumps: results[x].ship_jumps\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.then(function() {\n\t\t\t\t\t return tripwire.esi.universeKills()\n\t\t\t\t\t\t.done(function(results) {\n\t\t\t\t\t\t\t$.each(results, function(x) {\n\t\t\t\t\t\t\t\tif (data.activity[results[x].system_id]) {\n\t\t\t\t\t\t\t\t\tdata.activity[results[x].system_id].podKills = results[x].pod_kills;\n\t\t\t\t\t\t\t\t\tdata.activity[results[x].system_id].shipKills = results[x].ship_kills;\n\t\t\t\t\t\t\t\t\tdata.activity[results[x].system_id].npcKills = results[x].npc_kills;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdata.activity[results[x].system_id] = {\n\t\t\t\t\t\t\t\t\t\tsystemID: results[x].system_id,\n\t\t\t\t\t\t\t\t\t\tpodKills: results[x].pod_kills,\n\t\t\t\t\t\t\t\t\t\tshipKills: results[x].ship_kills,\n\t\t\t\t\t\t\t\t\t\tnpcKills: results[x].npc_kills,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.then(function() {\n\t\t\t\t\tchain.data.activity = chain.activity(data.activity);\n\t\t\t\t});\n\t\t} else if (data.map) {\n\t\t\tchain.activity(this.data.activity);\n\t\t}\n\n\t\tif (data.occupied) { // 3ms\n\t\t\tthis.data.occupied = this.occupied(data.occupied);\n\t\t}\n\n\t\tif (data.flares) { // 20ms\n\t\t\tthis.data.flares = this.flares(data.flares);\n\t\t}\n\t}\n\n\tthis.renderInChain = function(data){\n\t\tif(data.closestToViewing) {\n\t\t\tconst inChain = data.closestToViewing.pathLength <= 1;\n\t\t\tconst prefixText = inChain ? 'In chain: ' : (data.closestToViewing.pathLength - 1) + 'j from ' ;\n\t\t\tconst pathHomeText = data.closestToViewing.pathHome.slice()\n\t\t\t\t.map(function(n) { \n\t\t\t\t\treturn '<a href=\".?system=' + tripwire.systems[n.systemID].name + '\">' + (n.name || (n.signatureID != null && n.signatureID.substr(0,3).toUpperCase()) || '???') + '</a>'; \n\t\t\t\t})\n\t\t\t\t.join(' &gt; ');\n\t\t\tconst pathToChainText = inChain ? '' : '<br/>' + systemRendering.renderPath(guidance.findShortestPath(tripwire.map.shortest, data.closestToViewing.systemID - 30000000, viewingSystemID - 30000000));\n\t\t\t$(\"#inChain\").html(prefixText + pathHomeText + pathToChainText);\n\t\t\t$(\"#inChain\").append(this.renderClipboardIcon(data.closestToViewing.pathHome.slice()));\n\t\t\t$(\"#inChain\").css(\"display\", \"flex\")\n\t\t\t\t\t.css(\"align-items\", \"end\")\n\t\t\t\t\t.css(\"gap\",\"5px\");\n\t\t\tTooltips.attach($(\"#inChain [data-tooltip]\"));\n\t\t} else { $(\"#inChain\").text(''); }\n\t},\n\n\tthis.renderRouteIcon = function()\n\t{\n\t\tconst paths = [\n\t\t\t\"M416 320h-96c-17.6 0-32-14.4-32-32s14.4-32 32-32h96s96-107 96-160-43-96-96-96-96 43-96 96c0 25.5 22.2 63.4 45.3 96H320c-52.9 0-96 43.1-96 96s43.1 96 96 96h96c17.6 0 32 14.4 32 32s-14.4 32-32 32H185.5c-16 24.8-33.8 47.7-47.3 64H416c52.9 0 96-43.1 96-96s-43.1-96-96-96zm0-256c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zM96 256c-53 0-96 43-96 96s96 160 96 160 96-107 96-160-43-96-96-96zm0 128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\",\t\t\t\n\t\t]\n\t\tconst ns = \"http://www.w3.org/2000/svg\";\n\t\tconst svg = document.createElementNS(ns, \"svg\");\n\t\tconst g = document.createElementNS(ns, \"g\");\n\t\t$(g).append(\n\t\t\tpaths.map(function(p) {\n\t\t\t\tconst path = document.createElementNS(ns, \"path\")\n\t\t\t\t$(path).attr(\"d\", p).css(\"fill\", \"#efefef\")\n\t\t\t\treturn path;\n\t\t\t})\n\t\t)\n\t\t$(svg)\n\t\t\t.attr(\"viewBox\", \"0 0 285.102 285.102\")\n\t\t\t.attr(\"version\", \"1.1\")\n\t\t\t.css(\"height\", \"15px\")\n\t\t\t.css(\"width\", \"15px\")\n\t\t\t.css(\"display\", \"inline-block\")\n\t\t\t.css(\"cursor\", \"copy\")\n\t\t\t.append(g);\n\t\treturn svg;\n\t}\n\n\n\n\tthis.renderClipboardIcon = function(path){\n\t\t\n\t\tconst toCopy = path.map(function(n) { return (n.name || (n.signatureID != null && n.signatureID.substr(0,3).toUpperCase()) || '???') }).join(\" > \");\n\t\tconst paths = [\n\t\t\t\"M220.741,46.137h-30.188v-5.785c0-7.444-6.056-13.5-13.5-13.5h-1.667 C172.294,11.554,158.748,0,142.552,0c-16.196,0-29.743,11.554-32.835,26.852h-1.669c-7.444,0-13.5,6.056-13.5,13.5v5.785H64.36 c-12.407,0-22.5,10.094-22.5,22.5v193.965c0,12.406,10.093,22.5,22.5,22.5h156.381c12.406,0,22.5-10.094,22.5-22.5V68.637 C243.241,56.23,233.148,46.137,220.741,46.137z M109.548,41.852h66.006v24.571h-66.006V41.852z M142.552,15 c7.856,0,14.566,4.931,17.245,11.852h-34.489C127.986,19.931,134.696,15,142.552,15z M228.241,262.602c0,4.136-3.364,7.5-7.5,7.5 H64.36c-4.136,0-7.5-3.364-7.5-7.5V68.637c0-4.136,3.364-7.5,7.5-7.5h30.188v6.786c0,7.444,6.056,13.5,13.5,13.5h69.006 c7.444,0,13.5-6.056,13.5-13.5v-6.786h30.188c4.136,0,7.5,3.364,7.5,7.5V262.602z\",\n\t\t\t\"M193.212,107.931H91.89c-4.142,0-7.5,3.357-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h101.322 c4.143,0,7.5-3.358,7.5-7.5C200.712,111.288,197.355,107.931,193.212,107.931z\",\n\t\t\t\"M193.212,145.26H91.89c-4.142,0-7.5,3.357-7.5,7.5c0,4.143,3.358,7.5,7.5,7.5h101.322 c4.143,0,7.5-3.357,7.5-7.5C200.712,148.617,197.355,145.26,193.212,145.26z\",\n\t\t\t\"M193.212,182.591H91.89c-4.142,0-7.5,3.357-7.5,7.5c0,4.143,3.358,7.5,7.5,7.5h101.322 c4.143,0,7.5-3.357,7.5-7.5C200.712,185.948,197.355,182.591,193.212,182.591z\",\n\t\t\t\"M193.212,231.263h-31.28c-4.143,0-7.5,3.357-7.5,7.5c0,4.143,3.357,7.5,7.5,7.5h31.28 c4.143,0,7.5-3.357,7.5-7.5C200.712,234.62,197.355,231.263,193.212,231.263z\"\n\t\t];\n\t\tconst ns = \"http://www.w3.org/2000/svg\";\n\t\tconst svg = document.createElementNS(ns, \"svg\");\n\t\tconst g = document.createElementNS(ns, \"g\");\n\t\t$(g).append(\n\t\t\tpaths.map(function(p) {\n\t\t\t\tconst path = document.createElementNS(ns, \"path\")\n\t\t\t\t$(path).attr(\"d\", p).css(\"fill\", \"#efefef\")\n\t\t\t\treturn path;\n\t\t\t})\n\t\t)\n\t\t$(svg)\n\t\t\t.attr(\"viewBox\", \"0 0 285.102 285.102\")\n\t\t\t.attr(\"version\", \"1.1\")\n\t\t\t.css(\"height\", \"15px\")\n\t\t\t.css(\"width\", \"15px\")\n\t\t\t.css(\"display\", \"inline-block\")\n\t\t\t.css(\"cursor\", \"copy\")\n\t\t\t.append(g).click(function(){\n\t\t\t\tnavigator.clipboard.writeText(\"Chain: \" + toCopy);\n\t\t\t})\n\t\t\n\t\n\t\treturn svg;\n\t}\n\n\tthis.updateCollapsed = function(collapsedSystems) {\n\t\tif (options.chain.tabs[options.chain.active]) {\n\t\t\toptions.chain.tabs[options.chain.active].collapsed = collapsedSystems;\n\t\t}\n\t\t\n\t\t// Apply current system style\n\t\t$(\"#chainMap [data-nodeid='\"+viewingSystemID+\"']\").parent().addClass(\"currentNode\");\n\n\t\tif (WormholeTypeToolTips.attachedElements && WormholeTypeToolTips.attachedElements.length > 0) {\n\t\t\tWormholeTypeToolTips.detach($(\"#chainMap .whEffect\"));\n\t\t}\n\t\tWormholeTypeToolTips.attach($(\"#chainMap .whEffect[data-icon]\"));\n\n\t\tchain.activity(chain.data.activity);\n\n\t\tchain.occupied(chain.data.occupied);\n\n\t\tchain.flares(chain.data.flares);\n\n\t\tchain.grid();\n\n\t\toptions.save();\n\t}\n\n}\n","var guidance_profiles = {\n\tblueLootSystems: [17,40,41,55,72,53,74,160,162,163,196,197,164,181,187,133,159,903,905,1002,1013,1021,1026,1032,1038,1045,1290,1359,1390,1361,1397,1395,1391,1676,1679,1677,1840,1842,1847,1848,1852,1854,1855,1858,1866,1868,1873,1874,1881,1883,1894,1896,1897,1901,1902,1907,1914,1918,1922,1931,1932,1938,1946,1951,1952,1958,1959,1961,1939,1978,2415,2418,2414,2558,2559,2560,2568,2569,2571,2572,2769,2815,2816,2771,2800,2975,2977,2980,2988,2993,2992,3017,3018,3024,3030,3048,3055,3025,3029,3053,3271,3275,3279,3280,3281,3283,3284,3287,3305,3307,3312,3317,3318,3321,3322,3324,3329,3333,3335,3338,3339,3342,3344,3361,3363,2058,2065,2067,3394,3404,3412,3447,3449,3467,3469,3389,3402,3413,3409,2059,2190,2252,3553,3554,3555,3556,2191,2193,2187,4077,4078,4079,4084,4111,4112,4114,4083,4239,4240,4241,4288,4291,4296,4621,4623,5010,5011,5020,5009,5018,5017,5030,5031,5034,5035,5039,5040,5043,5052,5054,5276,5275],\n\tchainExits: []\n}","const systemPanel = new function() {\n\tthis.update = function() {\n\t\t// Update dependent controls: Path to chain/home\n\n\t\tconst exits = chain.data.exits;\n\t\n\t\t// var html = [\n\t\t// \trenderRoute((exits || []).map(function(x) { return x  - 30000000; }), true, 'chain', 'To Target'), \n\t\t// \trenderRoute(guidance_profiles.blueLootSystems, false, 'blue-loot', 'Blue loot buyer')\n\t\t// ].filter(function(x) { return x; });\n\t\tconst route = renderRoute((exits || []).map(function(x) { return x  - 30000000; }), true, 'chain', 'To Target')\n\t\tconst loot = renderRoute(guidance_profiles.blueLootSystems, false, 'blue-loot', 'Blue loot buyer')\n\t\t$(\"#infoExtra\").empty();\n\t\t$(\"#infoExtra\").append(renderJourneyPlanner());\n\t\t$(\"#infoExtra\").append(route);\n\t\t$(\"#infoExtra\").append(loot);\n\t\t//$(\"#infoExtra\").html(html);\n\t\tTooltips.attach($(\"#infoExtra [data-tooltip]\"));\n\t};\n\n\tfunction renderJourneyPlanner()\n\t{\n\t\tvar systemName = tripwire.systems[viewingSystemID].name;\n\t\treturn $(\"<div/>\")\n\t\t\t.append(\"Journey Planner: \")\n\t\t\t.append(a(\"?journey&from=\"+systemName, \"From\", true))\n\t\t\t.append(\" - \")\n\t\t\t.append(a(\"?journey&to=\"+systemName, \"To\", true))\n\t\t\t.append(renderRouteIcon());\t\n\t}\n\t\n\tfunction renderRoute(targets, addPathHome, cssClass, categoryText) {\n\t\tconst path = targets ? guidance.findShortestPath(tripwire.map.shortest, viewingSystemID - 30000000, targets) : null;\n\t\tif(path) {\n\t\t\tconst inChain = path.length <= 1;\n\t\t\tconst exitSystem = path[path.length - 1] + 30000000;\n\t\t\tconst prefixText = inChain ? '' : (path.length - 1) + 'j from ' ;\n\t\t\tconst pathHomeText = addPathHome ? chain.data.systemsInChainMap[exitSystem].pathHome.slice()\n\t\t\t\t.map(buildPath) : [{link: \".?system=\"+tripwire.systems[exitSystem].name, text: tripwire.systems[exitSystem].name}];\n\t\t\t\n\t\t\tvar div = $(\"<div/>\").addClass(cssClass)\n\t\t\t\t.append(categoryText)\n\t\t\t\t.append(\": \")\n\t\t\t\t.append(prefixText)\n\n\t\t\trenderPath(pathHomeText).forEach(function(p){\n\t\t\t\t$(div).append(p);\n\t\t\t})\n\t\t\tif(addPathHome){\n\t\t\t\t$(div).append(renderCopyIcon(pathHomeText));\n\t\t\t}\n\n\t\t\treturn div;\n\t\t} else { \n\t\t\tvar chainSystem = chain.data.systemsInChainMap[viewingSystemID];\n\t\t\tif(!chainSystem || !addPathHome) return null;\n\n\t\t\tconst pathHomeText = addPathHome ? chain.data.systemsInChainMap[viewingSystemID].pathHome.slice()\n\t\t\t\t.map(buildPath) : [];\n\t\t\t\n\t\t\tvar div = $(\"<div/>\").addClass(cssClass)\n\t\t\t\t.append(categoryText)\n\t\t\t\t.append(\": \");\n\t\t\t\t// .append(prefixText)\n\t\t\t\trenderPath(pathHomeText).forEach(function(p){\n\t\t\t\t\t$(div).append(p);\n\t\t\t\t});\n\t\t\t$(div).append(renderCopyIcon(pathHomeText));\n\t\t\treturn div;\n\t\t }\t\n\t}\n\n\tfunction renderPath(pathList)\n\t{\n\t\tvar path = [];\n\t\tpathList.forEach(function(p, i) {\n\t\t\tpath.push(a(p.link, p.text));\n\t\t\tif(i < pathList.length-1){\n\t\t\t\tpath.push($(\"<span/>\").text(\" > \"))\n\t\t\t}\n\t\t})\n\t\treturn path;\n\t}\n\t\n\n\tfunction buildPath(n){\n\t\tvar tagName = n.name;\n\t\tif(tagName == null) tagName = n.signatureID.toUpperCase().substring(0,3);\n\t\tif(tagName == null) tagName = \"???\";\n\t\treturn {\n\t\t\tlink: \".?system=\"+tripwire.systems[n.systemID].name,\n\t\t\ttext: tagName\n\t\t};\n\t}\n\n\tfunction a(link, text, newWindow = false)\n\t{\n\t\tvar a = $(\"<a/>\").attr('href', link).text(text);\n\t\tif(newWindow == true){\n\t\t\t$(a).attr('target', '_blank');\n\t\t}\n\t\treturn a;\n\t}\n\n\tfunction renderCopyIcon(pathHome)\n\t{\n\t\tconst toCopy = pathHome.map(function(n) { \n\t\t\treturn n.text;\n\t\t}).join(\" > \");\n\t\tconst paths = [\n\t\t\t\"M220.741,46.137h-30.188v-5.785c0-7.444-6.056-13.5-13.5-13.5h-1.667 C172.294,11.554,158.748,0,142.552,0c-16.196,0-29.743,11.554-32.835,26.852h-1.669c-7.444,0-13.5,6.056-13.5,13.5v5.785H64.36 c-12.407,0-22.5,10.094-22.5,22.5v193.965c0,12.406,10.093,22.5,22.5,22.5h156.381c12.406,0,22.5-10.094,22.5-22.5V68.637 C243.241,56.23,233.148,46.137,220.741,46.137z M109.548,41.852h66.006v24.571h-66.006V41.852z M142.552,15 c7.856,0,14.566,4.931,17.245,11.852h-34.489C127.986,19.931,134.696,15,142.552,15z M228.241,262.602c0,4.136-3.364,7.5-7.5,7.5 H64.36c-4.136,0-7.5-3.364-7.5-7.5V68.637c0-4.136,3.364-7.5,7.5-7.5h30.188v6.786c0,7.444,6.056,13.5,13.5,13.5h69.006 c7.444,0,13.5-6.056,13.5-13.5v-6.786h30.188c4.136,0,7.5,3.364,7.5,7.5V262.602z\",\n\t\t\t\"M193.212,107.931H91.89c-4.142,0-7.5,3.357-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h101.322 c4.143,0,7.5-3.358,7.5-7.5C200.712,111.288,197.355,107.931,193.212,107.931z\",\n\t\t\t\"M193.212,145.26H91.89c-4.142,0-7.5,3.357-7.5,7.5c0,4.143,3.358,7.5,7.5,7.5h101.322 c4.143,0,7.5-3.357,7.5-7.5C200.712,148.617,197.355,145.26,193.212,145.26z\",\n\t\t\t\"M193.212,182.591H91.89c-4.142,0-7.5,3.357-7.5,7.5c0,4.143,3.358,7.5,7.5,7.5h101.322 c4.143,0,7.5-3.357,7.5-7.5C200.712,185.948,197.355,182.591,193.212,182.591z\",\n\t\t\t\"M193.212,231.263h-31.28c-4.143,0-7.5,3.357-7.5,7.5c0,4.143,3.357,7.5,7.5,7.5h31.28 c4.143,0,7.5-3.357,7.5-7.5C200.712,234.62,197.355,231.263,193.212,231.263z\"\n\t\t];\n\t\tconst ns = \"http://www.w3.org/2000/svg\";\n\t\tconst svg = document.createElementNS(ns, \"svg\");\n\t\tconst g = document.createElementNS(ns, \"g\");\n\t\t$(g).append(\n\t\t\tpaths.map(function(p) {\n\t\t\t\tconst path = document.createElementNS(ns, \"path\")\n\t\t\t\t$(path).attr(\"d\", p).css(\"fill\", \"#efefef\")\n\t\t\t\treturn path;\n\t\t\t})\n\t\t)\n\t\t$(svg)\n\t\t\t.attr(\"viewBox\", \"0 0 285.102 285.102\")\n\t\t\t.attr(\"version\", \"1.1\")\n\t\t\t.css(\"height\", \"10px\")\n\t\t\t.css(\"width\", \"10px\")\n\t\t\t.css(\"display\", \"inline-block\")\n\t\t\t.css(\"cursor\", \"copy\")\n\t\t\t.css(\"margin\", \"0 5px 0 5px\")\n\t\t\t.append(g).click(function(){\n\t\t\t\tnavigator.clipboard.writeText(\"Chain: \" + toCopy);\n\t\t\t});\n\t\t\n\t\n\t\treturn $(svg);\n\t}\n\n\tfunction renderRouteIcon()\n\t{\n\t\tconst paths = [\n\t\t\t\"M416 320h-96c-17.6 0-32-14.4-32-32s14.4-32 32-32h96s96-107 96-160-43-96-96-96-96 43-96 96c0 25.5 22.2 63.4 45.3 96H320c-52.9 0-96 43.1-96 96s43.1 96 96 96h96c17.6 0 32 14.4 32 32s-14.4 32-32 32H185.5c-16 24.8-33.8 47.7-47.3 64H416c52.9 0 96-43.1 96-96s-43.1-96-96-96zm0-256c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zM96 256c-53 0-96 43-96 96s96 160 96 160 96-107 96-160-43-96-96-96zm0 128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\",\t\t\t\n\t\t]\n\t\tconst ns = \"http://www.w3.org/2000/svg\";\n\t\tconst svg = document.createElementNS(ns, \"svg\");\n\t\tconst g = document.createElementNS(ns, \"g\");\n\t\t$(g).append(\n\t\t\tpaths.map(function(p) {\n\t\t\t\tconst path = document.createElementNS(ns, \"path\")\n\t\t\t\t$(path).attr(\"d\", p).css(\"fill\", \"#efefef\")\n\t\t\t\treturn path;\n\t\t\t})\n\t\t)\n\t\t$(svg)\n\t\t\t.attr(\"viewBox\", \"0 0 490 490\")\n\t\t\t.attr(\"version\", \"1.1\")\n\t\t\t.css(\"height\", \"10px\")\n\t\t\t.css(\"width\", \"10px\")\n\t\t\t.css(\"display\", \"inline-block\")\n\t\t\t.css(\"margin\", \"0 5px 0 5px\")\n\t\t\t.append(g);\n\t\treturn svg;\n\t}\n\n}();","tripwire.active = function(data) {\n    var editSigs = [];\n    var editComments = [];\n\n    for (var x in data) {\n        var activity = JSON.parse(data[x].activity);\n        editSigs.push(parseInt(activity.editSig));\n        editComments.push(parseInt(activity.editComment));\n\n        if (activity.editSig) {\n            $(\"#sigTable tr[data-id='\"+activity.editSig+\"']\")\n                //.attr('data-tooltip', sig.editing)\n                //.attr(\"title\", sig.editing)\n                .addClass(\"editing\")\n                .find(\"td\")\n                .animate({backgroundColor: \"#001b47\"}, 1000); //35240A - Yellow\n        }\n\n        if (activity.editComment && $(\"#commentWrapper .comment[data-id='\"+activity.editComment+\"'] .cke\").length > 0) {\n            $(\"#commentWrapper .comment[data-id='\"+activity.editComment+\"']\")\n                .addClass(\"editing\")\n                .find(\".commentStatus\").html(data[x].characterName + \" is editing\").fadeIn();\n        }\n    }\n\n    $(\"#sigTable tr.editing\").each(function() {\n        if ($.inArray($(this).data(\"id\"), editSigs) == -1) {\n            $(\"#sigTable tr[data-id='\"+$(this).data(\"id\")+\"']\")\n                //.attr('data-tooltip', '')\n                //.removeAttr(\"title\")\n                .removeClass(\"editing\")\n                .find(\"td\")\n                .animate({backgroundColor: \"#111\"}, 1000, null, function() {$(this).css({backgroundColor: \"\"});});\n        }\n    });\n\n    $(\"#commentWrapper .editing\").each(function() {\n        if ($.inArray($(this).data(\"id\"), editComments) == -1) {\n            $(\"#commentWrapper .editing[data-id='\"+$(this).data(\"id\")+\"']\")\n                .removeClass(\"editing\")\n                .find(\".commentStatus\").fadeOut(function() {$(this).html(\"\")});\n        }\n    });\n}\n","// Hanldes adding to Signatures section\n// ToDo: Use native JS\ntripwire.makeSigInfo = function(sig, wormhole) {\n\twormhole = wormhole ||\t// allow to be passed in to save this lookup\n\t\tObject.values(tripwire.client.wormholes).find(function (wh) { return wh.initialID == sig.id || wh.secondaryID == sig.id});\n\tif (!wormhole) return false;\n\tvar otherSignature = sig.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID];\n\tif (!otherSignature) return false;\n\n\tlet leadsTo;\n\tif (sig.name) {\n\t  leadsTo = tripwire.systems[otherSignature.systemID] ?\n\t\t\"<a href='.?system=\"+tripwire.systems[otherSignature.systemID].name+\"'>\"+_.escape(sig.name)+\"</a> &ndash; \" + systemRendering.renderSystem(systemAnalysis.analyse(otherSignature.systemID), 'a') : \n\t\t_.escape(sig.name);\n\t} else if (appData.genericSystemTypes[otherSignature.systemID]) {\n\t\tleadsTo = appData.genericSystemTypes[otherSignature.systemID];\n\t} else if (tripwire.systems[otherSignature.systemID]) {\n\t\tleadsTo = systemRendering.renderSystem(systemAnalysis.analyse(otherSignature.systemID), 'a');\n\t} else {\n\t\tleadsTo = \"\";\n\t}\n\n\tconst wormholeTypeText = wormhole.type || \"???\";\n\treturn {\n\t\tid: sig.id,\n\t\tleadsTo: leadsTo,\n\t\twormhole: wormhole,\n\t\tformattedType: (wormhole[wormhole.parent+\"ID\"] == sig.id ? wormholeTypeText : (wormhole.parent ? \"[\" + wormholeTypeText + \"]\" : \"\")),\n\t\tlifeText: { critical: 'EOL', stable: 'Stable' }[wormhole.life] || wormhole.life,\n\t}\n}\n\ntripwire.addSig = function(add, option, disabled) {\n    var option = option || {};\n    var animate = typeof(option.animate) !== 'undefined' ? option.animate : true;\n    var disabled = disabled || false;\n    var wormhole = {};\n\n\tconst returnLinkText = add.signatureID ? '<a class=\"return-link\" href=\"#\" onclick=\"tripwire.setReturnSig(event, ' + add.id + ')\">&gt;&gt; Set ' + \n\t\t\t\tadd.signatureID.substring(0, 3).toUpperCase() + '-' + add.signatureID.substring(3) +\n\t\t\t\t' as return</a>'\n\t\t\t\t: '';\n\n    if (add.type == \"wormhole\") {\n\t\tconst sigInfo = tripwire.makeSigInfo(add);\n\t\tif(!sigInfo) return false;\n\t\t\n\t\twormhole = sigInfo.wormhole;\n\t\t\n\t\tconst leadsToText = sigInfo.leadsTo ? sigInfo.leadsTo : \n\t\t\tadd.signatureID && add.signatureID.length && add.signatureID[0] != '?' ? returnLinkText\n\t\t\t: '';\t\n\n        var row = \"<tr data-id='\"+add.id+\"' data-tooltip='' \"+ (disabled ? 'disabled=\"disabled\"' : '') +\">\"\n            + \"<td class='\"+ options.signatures.alignment.sigID +\"'>\"+formatSignatureID(add.signatureID)+\"</td>\"\n            + \"<td class='type-tooltip \"+ options.signatures.alignment.sigType +\"' data-tooltip=\\\"\"+this.whTooltip(wormhole)+\"\\\">\"+sigInfo.formattedType+\"</td>\"\n            + \"<td class='age-tooltip \"+ options.signatures.alignment.sigAge + (parseInt(add.lifeLength) === 0 ? \" disabled\" : \"\") +\"' data-tooltip='\"+this.ageTooltip(add)+\"'><span data-age='\"+add.lifeTime+\"'></span></td>\"\n            + \"<td class='\"+ options.signatures.alignment.leadsTo +\"'>\"+leadsToText+\"</td>\"\n            + \"<td class='\"+wormhole.life+\" \"+ options.signatures.alignment.sigLife +\"'>\"+sigInfo.lifeText+\"</td>\"\n            + \"<td class='\"+wormhole.mass+\" \"+ options.signatures.alignment.sigMass +\"'>\"+wormhole.mass+\"</td>\"\n            + \"</tr>\";\n\n        var tr = $(row);\n    } else {\n\t\tconst leadsToText = add.type === 'unknown' ? returnLinkText : \n\t\t\t(add.name ? linkSig(add.name) : '');\n        var row = \"<tr data-id='\"+add.id+\"' data-tooltip='' \"+ (disabled ? 'disabled=\"disabled\"' : '') +\">\"\n            + \"<td class='\"+ options.signatures.alignment.sigID +\"'>\"+formatSignatureID(add.signatureID)+\"</td>\"\n            + \"<td class='\"+ options.signatures.alignment.sigType +\"'>\"+add.type+\"</td>\"\n            + \"<td class='age-tooltip \"+ options.signatures.alignment.sigAge + (parseInt(add.lifeLength) === 0 ? \" disabled\" : \"\") +\"' data-tooltip='\"+this.ageTooltip(add)+\"'><span data-age='\"+add.lifeTime+\"'></span></td>\"\n            + \"<td class='\"+ options.signatures.alignment.leadsTo +\"' colspan='3'>\"+leadsToText+\"</td>\"\n            + \"</tr>\";\n\n        var tr = $(row);\n    }\n\n    Tooltips.attach($(tr).find(\"[data-tooltip]\"));\n\n    $(\"#sigTable\").append(tr);\n\n    // Add counter\n    if (wormhole.life == \"critical\") {\n        $(tr).find('span[data-age]').countdown({until: moment.utc(add.lifeLeft).toDate(), onExpiry: this.pastEOL, alwaysExpire: true, compact: true, format: this.ageFormat, serverSync: this.serverTime.getTime})\n            // .countdown('pause')\n            .addClass('critical')\n            // .countdown('resume');\n    } else {\n        $(tr).find('span[data-age]').countdown({since: moment.utc(add.lifeTime).toDate(), compact: true, format: this.ageFormat, serverSync: this.serverTime.getTime});\n    }\n\n    if (animate) {\n        $(tr)\n            .find('td')\n            .wrapInner('<div class=\"hidden\" />')\n            .parent()\n            .find('td > div')\n            .slideDown(700, function(){\n                $set = $(this);\n                $set.replaceWith($set.contents());\n            });\n\n        $(tr).find(\"td\").animate({backgroundColor: \"#004D16\"}, 1000).delay(1000).animate({backgroundColor: \"#111\"}, 1000, null, function() {$(this).css({backgroundColor: \"\"});});\n    }\n}\n\ntripwire.setReturnSig = function(event, sigToRemoveId) {\n\tevent.preventDefault();\n\tconst sigToUpdate = tripwire.signatures.returnSig;\n\tconst sigToRemove = tripwire.client.signatures[sigToRemoveId];\n\t\n\tif(!(sigToUpdate && sigToRemove)) { return; }\n\t\n\tsigDialog.overwriteSignature(sigToRemoveId, function(data) {\n\t\tsigToUpdate.signatureID = sigToRemove.signatureID;\n\t\t// we need the wormhole part to make refresh.php not think the sig isn't a wormhole any more\n\t\tconst payload = {\"signatures\": {\"update\": [ { wormhole: 'dummy', signatures: [ sigToUpdate ] } ] }};\n\t\ttripwire.refresh('refresh', payload);\n\t});\n}","// Handles API updates\ntripwire.API = function() {\n    this.indicator;\n    this.APIrefresh;\n\n    this.API.expire = function() {\n        var options = {since: tripwire.API.APIrefresh, until: null, format: \"MS\", layout: \"-{mnn}{sep}{snn}\"};\n        $(\"#APItimer\").countdown(\"option\", options);\n    }\n\n    this.API.refresh = function() {\n        $.ajax({\n            url: \"api_update.php\",\n            cache: false,\n            dataType: \"JSON\",\n            data: \"indicator=\"+tripwire.API.indicator\n        }).done(function(data) {\n            if (data && data.APIrefresh) {\n                tripwire.API.indicator = data.indicator;\n                tripwire.API.APIrefresh = new Date(data.APIrefresh);\n                activity.refresh(); //Refresh graph\n\n                var options = {until: tripwire.API.APIrefresh, since: null, layout: \"{mnn}{sep}{snn}\"};\n                $(\"#APItimer\").countdown(\"option\", options);\n                setTimeout(\"tripwire.API.refresh();\", $.countdown.periodsToSeconds($(\"#APItimer\").countdown('getTimes')) - 30);\n            } else if ($(\"#APItimer\").countdown(\"option\", \"layout\") !== \"-{mnn}{sep}{snn}\" && $.countdown.periodsToSeconds($(\"#APItimer\").countdown('getTimes')) > 120) {\n                setTimeout(\"tripwire.API.refresh();\", ($.countdown.periodsToSeconds($(\"#APItimer\").countdown('getTimes')) - 30) * 1000);\n            } else {\n                setTimeout(\"tripwire.API.refresh();\", 15000);\n            }\n        });\n    }\n\n    this.API.init = function() {\n        $.ajax({\n            url: \"api_update.php\",\n            cache: true,\n            dataType: \"JSON\",\n            data: \"init=true\"\n        }).done(function(data) {\n            tripwire.API.indicator = data.indicator;\n            tripwire.API.APIrefresh = new Date(data.APIrefresh);\n\n            $(\"#APItimer\").countdown({until: tripwire.API.APIrefresh, onExpiry: tripwire.API.expire, alwaysExpire: true, compact: true, format: \"MS\", serverSync: tripwire.serverTime.getTime, onTick: function(t) { $(\"#APIclock\").val(t[5] + 1).trigger(\"change\"); }})\n            var timer = $(\"#APItimer\").countdown(\"option\", \"layout\") === \"-{mnn}{sep}{snn}\" ? 15 : $.countdown.periodsToSeconds($(\"#APItimer\").countdown('getTimes')) - 30;\n            setTimeout(\"tripwire.API.refresh();\", timer * 1000);\n        });\n    }\n\n    this.API.init();\n}\n// tripwire.API();\n","const automapState = {\n\tpendingDecision: false\n};\n\ntripwire.autoMapper = function(from, to) {\n\tconsole.log('Automapper: Jump from ' + from + ' to ' + to);\n\t\n    var pods = [33328, 670];\n    var undo = [];\n\n    // Make sure the automapper is turned on & not disabled\n    if (!$(\"#toggle-automapper\").hasClass(\"active\") || $(\"#toggle-automapper\").hasClass(\"disabled\"))\n        return false;\n\n\t// Not waiting on a decision for the previous jump\n\tif(automapState.pendingDecision) {\n\t\tconsole.info('Not automapping because there is an automap dialog up');\n\t\treturn false;\n\t}\n\n    // Make sure from and to are valid systems\n    if (!tripwire.systems[from] || !tripwire.systems[to])\n        return false;\n\n    // Make sure from and to are not the same system\n    if (from == to)\n        return false;\n\t\n\t// Not into a special region e.g. abyssal space\n\tif(tripwire.systems[from].regionID > 12000000 || tripwire.systems[to].regionID > 12000000) {\n\t\tconsole.info('Not automapping into abyssal or other special space');\n\t\treturn false;\n\t}\n\t\n\t// Not into a special system\n\tconst noMapSystems = [30000142, 30002187];\t// Jita/Amarr\n\tif(noMapSystems.indexOf(from) >= 0 || noMapSystems.indexOf(to) >= 0) {\t\n\t\tconsole.info('Not automapping into likely pod-out destination');\n\t\treturn false;\n\t}\n\n    // Is pilot in a station?\n    if (tripwire.client.EVE && tripwire.client.EVE.stationID) {\n\t\tconsole.log('Automapper: Not recording because you are in a station');\n        return false;\n\t}\n\t\n    // Is pilot in a pod?\n    if (tripwire.client.EVE && tripwire.client.EVE.shipTypeID && $.inArray(parseInt(tripwire.client.EVE.shipTypeID), pods) >= 0) {\n    \tconsole.log('Automapper: Not recording because you are in a pod');\n\t\treturn false;\n\t}\n\t\n    // Is this a gate?\n    if (typeof(tripwire.map.shortest[from - 30000000]) != \"undefined\" && typeof(tripwire.map.shortest[from - 30000000][to - 30000000]) != \"undefined\") {\n\t\tconsole.log('Automapper: Not recording because this jump is a stargate');\n        return false;\n\t}\n\n     // Is this an existing connection?\n     if ($.map(tripwire.client.wormholes,\n               function(wormhole) {\n                 const initial = tripwire.client.signatures[wormhole.initialID];\n                 const secondary = tripwire.client.signatures[wormhole.secondaryID];\n                 return initial && secondary &&\n                   ((initial.systemID == from && secondary.systemID == to) ||\n                    (initial.systemID == to && secondary.systemID == from))  ? wormhole : null;\n               }).length > 0) {\n\t\tconsole.log('Automapper: Not recording because the connection exists');\n       return false;\n     }\n\t \n\t // Are both systems already in chain? Loops do happen but it's much more likely ESI missed a jump\n\t function inChain(systemID) { return chain.data.map.rows.filter(r => r.c[0].systemID == systemID).length > 0; }\n\tif(inChain(from) && inChain(to)) {\n\t\tconsole.info('Not automapping because both systems are already in chain');\n\t\treturn false;\n\t}\t \n\n    var payload = {\"signatures\": {\"add\": [], \"update\": []}, \"automap\": { \"character\": tripwire.client.EVE.characterID } };\n\n    var wormholes = wormholesForJump(from, to, tripwire.client.wormholes, tripwire.client.signatures);\n\t\n    if (wormholes.length) {\n        if (wormholes.length > 1) {\n\t\t\tconsole.log('Automapper: Multiple sigs matched, asking which one to update');\n            $(\"#dialog-select-signature\").dialog({\n                autoOpen: true,\n                title: \"Which Signature?\",\n                width: 390,\n                buttons: {\n                    Cancel: function() {\n                        $(this).dialog(\"close\");\n                    },\n                    Ok: function() {\n                        var i = $(\"#dialog-select-signature [name=sig]:checked\").val();\n                        var wormhole = wormholes[i];\n                        var signature = tripwire.client.signatures[wormhole.initialID];\n                        var signature2 = tripwire.client.signatures[wormhole.secondaryID];\n\n                        payload.signatures.update.push({\n                            \"wormhole\": {\n                                \"id\": wormhole.id\n                            },\n                            \"signatures\": [\n                                {\n                                    \"id\": signature.id\n                                },\n                                {\n                                    \"id\": signature2.id,\n                                    \"systemID\": to\n                                }\n                            ]\n                        });\n\n                        var success = function(data) {\n                            if (data.resultSet && data.resultSet[0].result == true) {\n                                undo.push({\"wormhole\": wormhole, \"signatures\": [signature, signature2]});\n                                $(\"#dialog-select-signature\").dialog(\"close\");\n                            }\n                        }\n\n                        tripwire.refresh('refresh', payload, success);\n                    }\n                },\n                open: function() {\n\t\t\t\t\tautomapState.pendingDecision = true;\n                    $(\"#dialog-select-signature .optionsTable tbody\").empty();\n\t\t\t\t\t\n\t\t\t\t\tfunction formatSystem(systemID) {\n\t\t\t\t\t\tconst system = systemAnalysis.analyse(systemID);\n\t\t\t\t\t\treturn systemRendering.renderSystem(system);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tdocument.getElementById('select-sig-from').innerHTML = formatSystem(from);\n\t\t\t\t\tdocument.getElementById('select-sig-to').innerHTML = formatSystem(to);\n\n                    $.each(wormholes, function(i) {\n                        const signature = tripwire.client.signatures[wormholes[i].initialID];\n\t\t\t\t\t\tconst sigInfo = tripwire.makeSigInfo(signature, wormholes[i]);\n\t\t\t\t\t\t\n                        const tr = \"<tr>\"\n                          + \"<td><input type='radio' name='sig' value='\"+i+\"' id='sig\"+i+\"' /></td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign'>\" + formatSignatureID(signature.signatureID) + \"</td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign'>\" + sigInfo.formattedType + \"</td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign'>\" + sigInfo.leadsTo + \"</td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign \" + wormholes[i].life + \"'>\" + sigInfo.lifeText + \"</td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign \" + wormholes[i].mass + \"'>\" + wormholes[i].mass + \"</td>\"\n                          + \"</tr>\";\n\t\t\t\t\t\t  \n\t\t\t\t\t\tconst trElem = $(tr);\n                        $(trElem).find('td').wrapInner(\"<label for='sig\"+i+\"' />\");\n                        $(\"#dialog-select-signature .optionsTable tbody\").append(trElem);\n                    });\n                }, close: function() {\n\t\t\t\t\tautomapState.pendingDecision = false;\n\t\t\t\t}\n            });\n        } else {\n            var wormhole = wormholes[0];\n            var signature = tripwire.client.signatures[wormhole.initialID];\n            var signature2 = tripwire.client.signatures[wormhole.secondaryID];\n\t\t\tconsole.log('Automapper: Single signature: w=' + JSON.stringify(wormhole) + ' s1=' + signature.id + '/' + signature.signatureID + ' s2=' + signature2.id + '/' + signature2.signatureID );\n\n            payload.signatures.update.push({\n                \"wormhole\": {\n                    \"id\": wormhole.id\n                },\n                \"signatures\": [\n                    {\n                        \"id\": signature.id\n                    },\n                    {\n                        \"id\": signature2.id,\n                        \"systemID\": to\n                    }\n                ]\n            });\n            undo.push({\"wormhole\": wormhole, \"signatures\": [signature, signature2]});\n        }\n    } else {\n        // Nothing matches, create a new wormhole\n\t\tconsole.log('Automapper: No signatures match, creating a new unknown hole');\n        payload.signatures.add.push({\n            \"wormhole\": {\n                \"type\": null,\n                \"parent\": \"initial\",\n                \"life\": \"stable\",\n                \"mass\": \"stable\"\n            },\n            \"signatures\": [\n                {\n                    \"systemID\": from,\n                    \"type\": \"wormhole\"\n                },\n                {\n                    \"systemID\": to,\n                    \"type\": \"wormhole\"\n                }\n            ]\n        });\n    }\n\n    if (payload.signatures.add.length || payload.signatures.update.length) {\n        var success = function(data) {\n            if (data.resultSet && data.resultSet[0].result == true) {\n                $(\"#undo\").removeClass(\"disabled\");\n\n                if (data.results) {\n                    if (viewingSystemID in tripwire.signatures.undo) {\n                        tripwire.signatures.undo[viewingSystemID].push({action: \"add\", signatures: data.results});\n                    } else {\n                        tripwire.signatures.undo[viewingSystemID] = [{action: \"add\", signatures: data.results}];\n                    }\n                }\n\n                if (undo.length) {\n                    if (viewingSystemID in tripwire.signatures.undo) {\n                        tripwire.signatures.undo[viewingSystemID].push({action: \"update\", signatures: undo});\n                    } else {\n                        tripwire.signatures.undo[viewingSystemID] = [{action: \"update\", signatures: undo}];\n                    }\n                }\n\n                sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n            }\n        }\n\n        tripwire.refresh('refresh', payload, success);\n    }\n}\n\nfunction wormholesForJump(from, to, wormholes, signatures) {\n\tconst toSystem = systemAnalysis.analyse(to);\n    const toType = toSystem.genericSystemType[0];\n\tconst toClass = (toSystem.class || [])[0];\n\treturn Object.values(wormholes).filter(function(wormhole) {\n        if ( ( signatures[wormhole.initialID] !== undefined ) && ( signatures[wormhole.secondaryID] !== undefined ) ) {\n            // Find wormholes that have no set Leads To system, and their initial system is from the wormhole we just jumped from\n            if (signatures[wormhole.initialID].systemID == from && !appData.systems[signatures[wormhole.secondaryID].systemID]) {\n\t\t\t\tconst holeTargetTypeName = appData.genericSystemTypes[signatures[wormhole.secondaryID].systemID];\n\t\t\t\tconst holeClasses = systemAnalysis.classForTypeName(holeTargetTypeName);\n\t\t\t\tif(holeTargetTypeName === toType) {\n\t\t\t\t\t// Find wormholes where Leads To is the type we jumped into\n\t\t\t\t\treturn true;\n                } else if (holeClasses && 0 <= holeClasses.indexOf(toClass)) {\n                    // Find wormholes that Leads To is generically set to the class we just jumped into\n                    return true;\n                } else if (wormhole.type && appData.wormholes[wormhole.type] && appData.wormholes[wormhole.type].leadsTo == toType) {\n                    // Find wormholes that Type is known to lead to the class we just jumped into\n                    return true;\n                } else if (signatures[wormhole.secondaryID].systemID === null && (!wormhole.type || !appData.wormholes[wormhole.type])) {\n                    // Find wormholes that don't have a Type or any kind of Leads To entered\n                    return true;\n                }\n            }\n        }\n    });\n}\t","$(\"body\").on(\"dblclick\", \".comment\", function(e) {\n\te.preventDefault();\n\tdocument.getSelection().removeAllRanges();\n\t$(this).find(\".commentEdit\").click();\n})\n\n$(\"body\").on(\"click\", \".commentEdit\", function(e) {\n\te.preventDefault();\n\n\t// Prevent multiple editors\n\tif ($(\".cke\").length) return false;\n\n\tvar $comment = $(this).closest(\".comment\");\n\n\t$comment.find(\".commentToolbar\").hide();\n\n\tCKEDITOR.replace($comment.find(\".commentBody\").attr(\"id\"), CKConfig).on(\"instanceReady\", function() {\n\t\t$comment.find(\".commentStatus\").html(\"\");\n\t\t$comment.find(\".commentFooter\").show();\n\t\t$comment.find(\".commentFooter .commentControls\").show();\n\t});\n\n\ttripwire.activity.editComment = $comment.data(\"id\");\n\ttripwire.refresh('refresh');\n});\n\n$(\"body\").on(\"click\", \".commentSave, .commentCancel\", function(e) {\n\te.preventDefault();\n\tvar $this = $(this);\n\tif ($this.attr(\"disabled\")) return false;\n\n\tvar $comment = $this.closest(\".comment\");\n\t$this.attr(\"disabled\", \"true\");\n\n\tif ($this.hasClass(\"commentSave\")) {\n\t\tvar data = {\"mode\": \"save\", \"commentID\": $comment.data(\"id\"), \"systemID\": $comment.find(\".commentSticky\").hasClass(\"active\") ? 0 : viewingSystemID, \"comment\": CKEDITOR.instances[$comment.find(\".commentBody\").attr(\"id\")].getData()};\n\n\t\t$.ajax({\n\t\t\turl: \"comments.php\",\n\t\t\ttype: \"POST\",\n\t\t\tdata: data,\n\t\t\tdataType: \"JSON\"\n\t\t}).done(function(data) {\n\t\t\tif (data && data.result == true) {\n\t\t\t\t$comment.find(\".commentModified\").html(\"Edited by \" + data.comment.modifiedByName + \" at \" + data.comment.modifiedDate);\n\t\t\t\t$comment.find(\".commentCreated\").html(\"Posted by \" + data.comment.createdByName + \" at \" + data.comment.createdDate);\n\t\t\t\tTooltips.attach($comment.find(\"[data-tooltip]\"));\n\n\t\t\t\tCKEDITOR.instances[$comment.find(\".commentBody\").attr(\"id\")].destroy(false);\n\t\t\t\t$comment.attr(\"data-id\", data.comment.id);\n\t\t\t\t$comment.find(\".commentToolbar\").show();\n\t\t\t\t$comment.find(\".commentFooter\").hide();\n\t\t\t\t$this.removeAttr(\"disabled\");\n\t\t\t}\n\t\t});\n\t} else {\n\t\tCKEDITOR.instances[$comment.find(\".commentBody\").attr(\"id\")].destroy(true);\n\n\t\tif (!$comment.attr(\"data-id\")) {\n\t\t\t$comment.remove();\n\t\t} else {\n\t\t\t$comment.find(\".commentToolbar\").show();\n\t\t\t$comment.find(\".commentFooter\").hide();\n\t\t\t$this.removeAttr(\"disabled\");\n\t\t}\n\t}\n\n\t$comment.find(\".commentStatus\").html(\"\");\n\n\tdelete tripwire.activity.editComment;\n\ttripwire.refresh('refresh');\n});\n\n$(\"body\").on(\"click\", \".commentDelete\", function(e) {\n\te.preventDefault();\n\tvar $comment = $(this).closest(\".comment\");\n\n\t// check if dialog is open\n\tif (!$(\"#dialog-deleteComment\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-deleteComment\").data(\"comment\", $comment).dialog({\n\t\t\tresizable: false,\n\t\t\tminHeight: 0,\n\t\t\tposition: {my: \"center\", at: \"center\", of: $(\"#notesWidget\")},\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tDelete: function() {\n\t\t\t\t\t// Prevent duplicate submitting\n\t\t\t\t\t$(\"#dialog-deleteComment\").parent().find(\":button:contains('Delete')\").button(\"disable\");\n\n\t\t\t\t\tvar $comment = $(this).data(\"comment\");\n\t\t\t\t\tvar data = {\"mode\": \"delete\", \"commentID\": $comment.data(\"id\")};\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: \"comments.php\",\n\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t}).done(function(data) {\n\t\t\t\t\t\tif (data && data.result == true) {\n\t\t\t\t\t\t\t$(\"#dialog-deleteComment\").dialog(\"close\");\n\t\t\t\t\t\t\t$comment.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}).always(function() {\n\t\t\t\t\t\t$(\"#dialog-deleteComment\").parent().find(\":button:contains('Delete')\").button(\"enable\");\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-deleteComment\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-deleteComment\").data(\"comment\", $comment).dialog(\"open\");\n\t}\n});\n\n$(\"body\").on(\"click\", \"#add-comment\", function(e) {\n\te.preventDefault();\n\n\t// Prevent multiple editors\n\tif ($(\".cke\").length) return false;\n\n\tvar $comment = $(\".comment:last\").clone();\n\tvar commentID = $(\".comment:visible:last .commentBody\").attr(\"id\") ? $(\".comment:visible:last .commentBody\").attr(\"id\").replace(\"comment\", \"\") + 1 : 0;\n\t$(\".comment:last\").before($comment);\n\n\t$comment.find(\".commentBody\").attr(\"id\", \"comment\" + commentID);\n\t$comment.removeClass(\"hidden\").find(\".commentEdit\").click();\n});\n\n$(\"body\").on(\"click\", \".commentSticky\", function(e) {\n\te.preventDefault();\n\tvar $comment = $(this).closest(\".comment\");\n\n\tvar data = {\"mode\": \"sticky\", \"commentID\": $comment.data(\"id\"), \"systemID\": $comment.find(\".commentSticky\").hasClass(\"active\") ? viewingSystemID : 0};\n\n\t$.ajax({\n\t\turl: \"comments.php\",\n\t\ttype: \"POST\",\n\t\tdata: data,\n\t\tdataType: \"JSON\"\n\t}).done(function(data) {\n\t\tif (data && data.result == true) {\n\t\t\t$comment.find(\".commentSticky\").hasClass(\"active\") ? $comment.find(\".commentSticky\").removeClass(\"active\") : $comment.find(\".commentSticky\").addClass(\"active\");\n\t\t}\n\t});\n});\n\nfunction commentSortHandler(sortOrder) {\n\tconst sortElem = document.getElementById('comment-sort');\n\tconst containerElem = document.getElementById('comment-container');\n\tsortOrder = sortOrder || sortElem.nextSort || tripwire.cookies.getCookie('commentSort') || 'asc';\n\t\n\tswitch(sortOrder) {\n\t\tcase 'asc':\n\t\t\tsortElem.nextSort = 'desc';\n\t\t\tsortElem.setAttribute('data-icon', 'sort-asc');\n\t\t\tcontainerElem.style.flexDirection = 'column';\n\t\t\tbreak;\n\t\tcase 'desc':\n\t\t\tsortElem.nextSort = 'asc';\n\t\t\tsortElem.setAttribute('data-icon', 'sort-desc');\n\t\t\tcontainerElem.style.flexDirection = 'column-reverse';\n\t\t\tbreak;\n\t\tdefault: throw 'sort order somehow wrong';\n\t}\n\t\n\ttripwire.cookies.setCookie('commentSort', sortOrder, 3650);\n}\n\n$(\"body\").on(\"click\", \"#comment-sort\", function(e) {\n\tcommentSortHandler(undefined);\n});\n\ncommentSortHandler();","// Handles removing from Signatures section\ntripwire.deleteSig = function(key) {\n    var tr = $(\"#sigTable tr[data-id='\"+key+\"']\");\n\n    //Append empty space to prevent non-coloring\n    $(tr).find('td:empty, a:empty').append(\"&nbsp;\");\n\n    $(tr)\n        .find('td')\n        .wrapInner('<div />')\n        .parent()\n        .find('td > div').animate({backgroundColor: \"#4D0000\"}, 1000).delay(1000).animate({backgroundColor: \"#111\"}, 1000)\n        .slideUp(700, function(){\n            // Remove countdown reference\n            $(tr).find('span[data-age]').countdown(\"destroy\");\n\n            $(this).parent().parent().remove();\n            $(\"#sigTable\").trigger(\"update\");\n        });\n}\n","// Handles changing Signatures section\n// ToDo: Use native JS\ntripwire.editSig = function(edit, disabled) {\n    var disabled = disabled || false;\n    var wormhole = {};\n\n    if (edit.type == \"wormhole\") {\n\t\tconst sigInfo = tripwire.makeSigInfo(edit);\t// see addSignature.js\n\t\tif(!sigInfo) return false;\n\t\t\n\t\twormhole = sigInfo.wormhole;\n\n        var row = \"<tr data-id='\"+edit.id+\"' data-tooltip='' \"+ (disabled ? 'disabled=\"disabled\"' : '') +\">\"\n            + \"<td class='\"+ options.signatures.alignment.sigID +\"'>\"+formatSignatureID(edit.signatureID)+\"</td>\"\n            + \"<td class='type-tooltip \"+ options.signatures.alignment.sigType +\"' data-tooltip=\\\"\"+this.whTooltip(wormhole)+\"\\\">\"+sigInfo.formattedType+\"</td>\"\n            + \"<td class='age-tooltip \"+ options.signatures.alignment.sigAge + (parseInt(edit.lifeLength) === 0 ? \" disabled\" : \"\") +\"' data-tooltip='\"+this.ageTooltip(edit)+\"'><span data-age='\"+edit.lifeTime+\"'></span></td>\"\n            + \"<td class='\"+ options.signatures.alignment.leadsTo +\"'>\"+(sigInfo.leadsTo || \"\")+\"</td>\"\n            + \"<td class='\"+wormhole.life+\" \"+ options.signatures.alignment.sigLife +\"'>\"+sigInfo.lifeText+\"</td>\"\n            + \"<td class='\"+wormhole.mass+\" \"+ options.signatures.alignment.sigMass +\"'>\"+wormhole.mass+\"</td>\"\n            + \"</tr>\";\n\n        var tr = $(row);\n    } else {\n        var row = \"<tr data-id='\"+edit.id+\"' data-tooltip='' \"+ (disabled ? 'disabled=\"disabled\"' : '') +\">\"\n            + \"<td class='\"+ options.signatures.alignment.sigID +\"'>\"+formatSignatureID(edit.signatureID)+\"</td>\"\n            + \"<td class='\"+ options.signatures.alignment.sigType +\"'>\"+edit.type+\"</td>\"\n            + \"<td class='age-tooltip \"+ options.signatures.alignment.sigAge + (parseInt(edit.lifeLength) === 0 ? \" disabled\" : \"\") +\"' data-tooltip='\"+this.ageTooltip(edit)+\"'><span data-age='\"+edit.lifeTime+\"'></span></td>\"\n            + \"<td class='\"+ options.signatures.alignment.leadsTo +\"' colspan='3'>\"+(edit.name?linkSig(edit.name):'')+\"</td>\"\n            + \"</tr>\";\n\n        var tr = $(row);\n    }\n\n    Tooltips.attach($(tr).find(\"[data-tooltip]\"));\n\n    // Destroy the pervious countdown to prevent errors on a non-existant DOM element\n    $(\"#sigTable tr[data-id='\"+edit.id+\"']\").find('span[data-age]').countdown(\"destroy\");\n    $(\"#sigTable tr[data-id='\"+edit.id+\"']\").replaceWith(tr);\n\n    $(\"#sigTable\").trigger(\"update\");\n    // Update counter\n    if (wormhole.life == \"critical\") {\n        $(tr).find('span[data-age]').countdown({until: moment.utc(edit.lifeLeft).toDate(), onExpiry: this.pastEOL, alwaysExpire: true, compact: true, format: this.ageFormat, serverSync: this.serverTime.getTime})\n            .addClass('critical');\n    } else {\n        $(tr).find('span[data-age]').countdown({since: moment.utc(edit.lifeTime).toDate(), compact: true, format: this.ageFormat, serverSync: this.serverTime.getTime});\n    }\n\n    $(tr).effect(\"pulsate\");\n}\n","tripwire.esi = function() {\n    var baseUrl = \"https://esi.evetech.net\";\n    var userAgent = \"Tripwire Client \" + tripwire.version + \" (\" + window.location.hostname + \") - \" + window.navigator.userAgent;\n    var locationTimer, shipTimer, onlineTimer;\n    this.esi.connection = true;\n    this.esi.characters = {};\n    this.esi.oauth = { subject: \"\", accessToken: \"\"};\n\n    var scopeError = function(characterID) {\n        $(\"#tracking .tracking-clone[data-characterid='\"+ characterID +\"']\").find(\".alert\").show();\n    }\n\n    \n\n\tvar isExpired = function(tokenExpire) {\n\t\treturn moment.utc(tokenExpire).subtract(5, \"minutes\").isBefore(moment());\n\t}\n\n\tfunction updateTracking(character) {\n\t\t// Send to Tripwire server on next refresh call\n\t\ttripwire.data.tracking[character.characterID] = {\n\t\t\tcharacterID: character.characterID,\n\t\t\tcharacterName: character.characterName,\n\t\t\tsystemID: character.systemID,\n\t\t\tsystemName: character.systemName,\n\t\t\tstationID: character.stationID,\n\t\t\tstationName: character.stationName,\n\t\t\tshipID: character.shipID,\n\t\t\tshipName: character.shipName,\n\t\t\tshipTypeID: character.shipTypeID,\n\t\t\tshipTypeName: character.shipTypeName,\n\t\t\tmassOptions: tripwire.massOptions,\n\t\t\tcharacterOptions: options.tracking.characterOptions[character.characterID]\n\t\t};\t\t\t\t\n\t}\n\tthis.esi.updateTracking = updateTracking;\t// so it can be called outside\n\n    this.esi.location = function() {\n        clearTimeout(locationTimer);\n\n        for (characterID in tripwire.esi.characters) {\n            var character = tripwire.esi.characters[characterID];\n\n            // Check for expiring token\n            if (isExpired(character.tokenExpire)) {\n                tripwire.data.esi = {\"expired\": true};\n                continue;\n            }\n\n            const xhr = $.ajax({\n                url: baseUrl + \"/v1/characters/\"+ characterID +\"/location/?\" + $.param({\"token\": character.accessToken, \"user_agent\": userAgent}),\n                // headers: {\"Authorization\": \"Bearer \"+ character.accessToken, \"X-User-Agent\": userAgent},\n                type: \"GET\",\n                dataType: \"JSON\",\n                characterID: characterID\n            }).done(function(data, status, jqXHR) {\n                var character = tripwire.esi.characters[this.characterID];\n\n                if (character) {\n                    character.locationDate = moment(jqXHR.getResponseHeader(\"last-modified\"), \"ddd, DD MMMM YYYY HH:mm:ss\").format();\n\n                    if (character.systemID != data.solar_system_id) {\n                        character.systemID = data.solar_system_id || null;\n\t\t\t\t\t\tconst system = systemAnalysis.analyse(data.solar_system_id);\n                        character.systemName = system ? system.name : null;\n\n                        $(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"']\").find(\".system\").html(systemRendering.renderSystem(system) || \"&nbsp;\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tupdateTracking(character);\n                    }\n\n                    if (character.stationID != data.station_id) {\n                        character.stationID = data.station_id || null;\n\n                        if (data.station_id) {\n                            tripwire.esi.stationLookup(data.station_id, this.characterID)\n                                .always(function(data) {\n                                    var character = tripwire.esi.characters[this.reference];\n\n                                    character.stationName = data.name || null;\n                                    $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference +\"']\").find(\".station\").html(data.name.substring(0, 17) + \"...\" || \"&nbsp;\").attr(\"data-tooltip\", data.name);\n                                    Tooltips.attach($(\"#tracking .tracking-clone[data-characterid='\"+ this.reference +\"'] .station[data-tooltip]\"));\n\n                                    updateTracking(character);\n                                });\n                        } else {\n                            character.stationName = null;\n                            // $(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"']\").find(\".station\").html(\"&nbsp;\").attr(\"data-tooltip\", \"&nbsp;\");\n                            Tooltips.detach($(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"'] .station[data-tooltip]\"));\n\t\t\t\t\t\t\tupdateTracking(character);\n                        }\n                    }\n\n                    if (options.tracking.active == this.characterID) {\n                        tripwire.EVE(tripwire.esi.characters[options.tracking.active]);\n                    }\n                }\n            }).fail(function(data) {\n                if (data.status == 403) {\n                    tripwire.refresh(\"refresh\", {\"esi\": {\"expired\": true}});\n                }\n            }).always(function(data, status, jqXHR) {\n                if (status != \"success\" && status != \"abort\" && tripwire.esi.connection == true) {\n                    tripwire.esi.connection = false;\n                    $(\"#esiConnectionSuccess, #esiConnectionError\").click();\n                    Notify.trigger(\"ESI Connection Failed\", \"red\", false, \"esiConnectionError\");\n                } else if (status == \"success\" && tripwire.esi.connection == false) {\n                    tripwire.esi.connection = true;\n                    $(\"#esiConnectionSuccess, #esiConnectionError\").click();\n                    Notify.trigger(\"ESI Connection Resumed\", \"green\", 5000, \"esiConnectionSuccess\");\n                }\n            });\n            xhr.always(function(){\n                const warn = xhr.getResponseHeader('warning');\n                if (warn) console.warn('ESI API Warning: ', warn, this.url);\n            });\n        }\n\n        locationTimer = setTimeout(\"tripwire.esi.location()\", 5000);\n    }\n\n    this.esi.ship = function() {\n        clearTimeout(shipTimer);\n\n        for (characterID in tripwire.esi.characters) {\n            var character = tripwire.esi.characters[characterID];\n\n            // Check for expiring token\n            if (isExpired(character.tokenExpire)) {\n                tripwire.data.esi = {\"expired\": true};\n                continue;\n            }\n\n            const xhr = $.ajax({\n                url: baseUrl + \"/v1/characters/\"+ characterID +\"/ship/?\" + $.param({\"token\": character.accessToken, \"user_agent\": userAgent}),\n                // headers: {\"Authorization\": \"Bearer \"+ character.accessToken, \"X-User-Agent\": userAgent},\n                type: \"GET\",\n                dataType: \"JSON\",\n                characterID: characterID\n            }).done(function(data, status, jqXHR) {\n                var character = tripwire.esi.characters[this.characterID];\n\n                if (character) {\n                    character.shipDate = moment(jqXHR.getResponseHeader(\"last-modified\"), \"ddd, DD MMMM YYYY HH:mm:ss\").format();\n\n                    if (character.shipID != data.ship_item_id) {\n                        character.shipID = data.ship_item_id || null;\n\t\t\t\t\t\ttripwire.resetMassOptions();\n\t\t\t\t\t\tupdateTracking(character);\n                    }\n\n                    if (character.shipName != data.ship_name) {\n                        character.shipName = data.ship_name || null;\n                        $(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"']\").find(\".shipname\").html(data.ship_name || \"&nbsp;\");\n\t\t\t\t\t\tupdateTracking(character);\n                    }\n\n                    if (character.shipTypeID != data.ship_type_id) {\n                        character.shipTypeID = data.ship_type_id || null;\n\n                        if (data.ship_type_id) {\n                            tripwire.esi.typeLookup(data.ship_type_id, this.characterID)\n                                .always(function(data) {\n                                    var character = tripwire.esi.characters[this.reference];\n\n                                    character.shipTypeName = data.name || null;\n                                    $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference +\"']\").find(\".ship\").html(data.name || \"&nbsp;\");\n\t\t\t\t\t\t\t\t\tupdateTracking(character);\n                                });\n                        } else {\n                            character.shipTypeName = null;\n                            $(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"']\").find(\".ship\").html(\"&nbsp;\");\n\t\t\t\t\t\t\tupdateTracking(character);\n                        }\n                    }\n                }\n            }).fail(function(data) {\n                if (data.status == 403) {\n                    tripwire.refresh(\"refresh\", {\"esi\": {\"expired\": true}});\n                }\n            }).always(function(data, status, jqXHR) {\n                if (status != \"success\" && status != \"abort\" && tripwire.esi.connection == true) {\n                    tripwire.esi.connection = false;\n                    $(\"#esiConnectionSuccess, #esiConnectionError\").click();\n                    Notify.trigger(\"ESI Connection Failed\", \"red\", false, \"esiConnectionError\");\n                } else if (status == \"success\" && tripwire.esi.connection == false) {\n                    tripwire.esi.connection = true;\n                    $(\"#esiConnectionSuccess, #esiConnectionError\").click();\n                    Notify.trigger(\"ESI Connection Resumed\", \"green\", 5000, \"esiConnectionSuccess\");\n                }\n            });\n            xhr.always(function(){\n                const warn = xhr.getResponseHeader('warning');\n                if (warn) console.warn('ESI API Warning: ', warn, this.url);\n            });\n\n        }\n\n        shipTimer = setTimeout(\"tripwire.esi.ship()\", 5000);\n    }\n\n    this.esi.online = function() {\n        clearTimeout(onlineTimer);\n\n        for (characterID in tripwire.esi.characters) {\n            var character = tripwire.esi.characters[characterID];\n\n            tripwire.esi.characterStatus(character.characterID, character)\n                .done(function(data) {\n                    if (data.online) {\n                        $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference.characterID +\"']\").find(\".online\").removeClass(\"critical\").addClass(\"stable\");\n                    } else {\n                        $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference.characterID +\"']\").find(\".online\").removeClass(\"stable\").addClass(\"critical\");\n                    }\n                }).fail(function(data) {\n                    if (data && data.status == 403) {\n                        scopeError(this.reference.characterID);\n                    }\n                    $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference.characterID +\"']\").find(\".online\").removeClass(\"stable\").addClass(\"critical\");\n                });\n        }\n\n        onlineTimer = setTimeout(\"tripwire.esi.online()\", 60000);\n    }\n\n    this.esi.typeLookup = function(typeID, reference) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v3/universe/types/\"+ typeID +\"/?\" + $.param({\"user_agent\": userAgent}),\n            // headers: {\"X-User-Agent\": userAgent},\n            type: \"GET\",\n            dataType: \"JSON\",\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.stationLookup = function(stationID, reference) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/universe/stations/\"+ stationID +\"/?\" + $.param({\"user_agent\": userAgent}),\n            // headers: {\"X-User-Agent\": userAgent},\n            type: \"GET\",\n            dataType: \"JSON\",\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.setDestination = function(destinationID, characterID, clear_waypoints, beginning) {\n        clear_waypoints = clear_waypoints ? clear_waypoints : false;\n        beginning = beginning ? beginning : false;\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/ui/autopilot/waypoint/?\" + $.param({destination_id: destinationID, clear_other_waypoints: clear_waypoints, add_to_beginning: beginning}),\n            headers: {\"Authorization\": \"Bearer \"+ tripwire.esi.characters[characterID].accessToken, \"X-User-Agent\": userAgent},\n            type: \"POST\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.showInfo = function(targetID, characterID) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v1/ui/openwindow/information/?\" + $.param({target_id: targetID}),\n            headers: {\"Authorization\": \"Bearer \"+ tripwire.esi.characters[characterID].accessToken, \"X-User-Agent\": userAgent},\n            type: \"POST\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.characterStatus = function(characterID, reference) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/characters/\" + characterID + \"/online/?\" + $.param({\"token\": tripwire.esi.characters[characterID].accessToken, \"user_agent\": userAgent}),\n            // headers: {\"Authorization\": \"Bearer \"+ tripwire.esi.characters[characterID].accessToken, \"X-User-Agent\": userAgent},\n            type: \"GET\",\n            dataType: \"JSON\",\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.eveStatus = function() {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v1/status/?\" + $.param({\"user_agent\": userAgent}),\n            // headers: {\"X-User-Agent\": userAgent},\n            type: \"GET\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.idLookup = function(eveIDs) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/universe/names/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"POST\",\n            dataType: \"JSON\",\n            contentType: \"application/json\",\n            processData: false,\n            data: JSON.stringify(eveIDs)\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.characterLookup = function(eveID, reference, async) {\n        var async = typeof(async) !== 'undefined' ? async : true;\n        const xhr = $.ajax({\n            url: baseUrl + \"/latest/characters/\" + eveID + \"/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\",\n            async: async,\n            eveID: eveID,\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.corporationLookup = function(eveID, reference, async) {\n        var async = typeof(async) !== 'undefined' ? async : true;\n        const xhr = $.ajax({\n            url: baseUrl + \"/v4/corporations/\" + eveID + \"/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\",\n            async: async,\n            eveID: eveID,\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.allianceLookup = function(eveID, reference, async) {\n        var async = typeof(async) !== 'undefined' ? async : true;\n        const xhr = $.ajax({\n            url: baseUrl + \"/v3/alliances/\" + eveID + \"/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\",\n            async: async,\n            eveID: eveID,\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.search = function(searchString, categories, strict) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/latest/characters/\" + tripwire.esi.oauth.subject + \"/search/?\" + $.param({\"user_agent\": userAgent}),\n            headers: {\"Authorization\": \"Bearer \"+ tripwire.esi.oauth.accessToken},\n            type: \"GET\",\n            dataType: \"JSON\",\n            contentType: \"application/json\",\n            data: {\"search\": searchString, \"categories\": categories, \"strict\": strict}\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.universeJumps = function() {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v1/universe/system_jumps/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.universeKills = function() {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/universe/system_kills/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    // Wrapper to make lookups easier\n    this.esi.fullLookup = function(eveIDs) {\n        var promise = $.Deferred();\n\n        tripwire.esi.idLookup(eveIDs)\n            .done(function(data) {\n                for (item in data) {\n                    if (data[item].category == \"character\") {\n                        tripwire.esi.characterLookup(data[item].id, data[item], false)\n                            .done(function(characterData) {\n                                $.extend(data[item], characterData);\n                                tripwire.esi.corporationLookup(characterData.corporation_id, this.reference, false)\n                                    .done(function(corporationData) {\n                                        data[item].corporation = corporationData;\n                                        if (corporationData.alliance_id) {\n                                            tripwire.esi.allianceLookup(corporationData.alliance_id, this.reference, false)\n                                                .done(function(allianceData) {\n                                                    data[item].alliance = allianceData;\n                                                });\n                                        }\n                                    });\n                            });\n                    } else if (data[item].category == \"corporation\") {\n                        tripwire.esi.corporationLookup(data[item].id, data[item], false)\n                            .done(function(corporationData) {\n                                $.extend(data[item], corporationData);\n                                if (corporationData.alliance_id) {\n                                    tripwire.esi.allianceLookup(corporationData.alliance_id, this.reference, false)\n                                        .done(function(allianceData) {\n                                            data[item].alliance = allianceData;\n                                        });\n                                }\n                            })\n                    } else if (data[item].category == \"alliance\") {\n                        tripwire.esi.allianceLookup(data[item].id, data[item], false)\n                            .done(function(allianceData) {\n                                $.extend(data[item], allianceData);\n                            })\n                    }\n                }\n\n                promise.resolve(data);\n            });\n\n        return promise;\n    }\n\n    // Parse main account oauth information out of refresh data. This is used\n    // to make authenticated ESI requests for enpoints that are not specific to\n    // tracking characters, e.g., mask access management.\n    this.esi.parseOauth = function(data) {\n        const _data = data || {}\n        tripwire.esi.oauth = {\n            subject: _data.subject,\n            accessToken: _data.accessToken\n        };\n    }\n\n    this.esi.parse = function(characters) {\n        for (characterID in tripwire.esi.characters) {\n            if (!(characterID in characters)) {\n                delete tripwire.esi.characters[characterID];\n                tracking.remove(characterID);\n                if (options.tracking.active == characterID) {\n                    tripwire.EVE(false, true);\n                    $(\"#removeESI\").attr(\"disabled\", \"disabled\");\n                }\n            }\n        }\n\n        for (characterID in characters) {\n            if (options.tracking.active == \"new\") {\n                options.tracking.active = characterID;\n            }\n\n            if (!(characterID in tripwire.esi.characters)) {\n                var $clone = tracking.add(characters[characterID]);\n\t\t\t\t\n                if (options.tracking.active == characterID) {\n                    $clone.addClass(\"active\");\n                    $(\"#removeESI\").removeAttr(\"disabled\");\n                }\n\n            }\n\n            tripwire.esi.characters[characterID] = characters[characterID];\n        }\n\t\t\n\t\tset_tracking_text();\n\n        tripwire.esi.ship();\n        tripwire.esi.location();\n        tripwire.esi.online();\n    }\n}\ntripwire.esi();\n","// Handles data from EVE in-game data\ntripwire.EVE = function(EVE, characterChange) {\n    var systemChange = this.client.EVE && this.client.EVE.systemChange || false;\n\n    if (EVE) {\n        // Automapper\n        if (!characterChange) {\n            // Did the system change or did it previously and we have yet to try an autoMapper call?\n            if ((this.client.EVE && this.client.EVE.systemID != EVE.systemID) || systemChange == true) {\n                systemChange = true;\n\n                // Check if location was updated after the last ship update\n                // if (moment(EVE.locationDate).isAfter(moment(this.client.EVE.shipDate))) {\n                    systemChange = false;\n                    tripwire.autoMapper(this.client.EVE.systemID, EVE.systemID);\n                // }\n            }\n        }\n\n        // System follower\n        if (!characterChange && options.buttons.follow && (this.client.EVE && this.client.EVE.systemID != EVE.systemID) && $(\".ui-dialog:visible\").length == 0) {\n            tripwire.systemChange(EVE.systemID);\n        }\n\n        if (!$(\"#search\").hasClass(\"active\")) {\n            $(\"#currentSpan\").show();\n        }\n\n        // Enable auto-mapper\n        $(\"#toggle-automapper\").removeClass(\"disabled\");\n\n        // Update current system\n        if (EVE.systemID) {\n            // add system to Leads To dropdown\n            if ($(\"#dialog-signature [data-autocomplete='sigSystems']\").hasClass(\"custom-combobox\")) {\n                $(\"#dialog-signature [data-autocomplete='sigSystems']\").inlinecomplete(\"removeFromSelect\");\n                $(\"#dialog-signature [data-autocomplete='sigSystems']\").inlinecomplete(\"addToSelect\", tripwire.systems[EVE.systemID]);\n            }\n            $(\"#EVEsystem\").html(systemRendering.renderSystem(systemAnalysis.analyse(EVE.systemID)));\n        }\n    } else {\n        // Update current system\n        $(\"#EVEsystem\").html(\"Not tracking\");\n        $(\"#currentSpan\").hide();\n        // Disable automapper\n        $(\"#toggle-automapper\").addClass(\"disabled\");\n        // remove system from Leads To dropdown\n        if ($(\"#dialog-signature [data-autocomplete='sigSystems']\").hasClass(\"custom-combobox\")) {\n            $(\"#dialog-signature [data-autocomplete='sigSystems']\").inlinecomplete(\"removeFromSelect\");\n        }\n    }\n\n    this.client.EVE = {\n        characterID: EVE.characterID,\n        characterName: EVE.characterName,\n        systemID: EVE.systemID,\n        systemName: EVE.systemName,\n        shipTypeID: EVE.shipTypeID,\n        shipTypeName: EVE.shipTypeName,\n        stationID: EVE.stationID,\n        stationName: EVE.stationName,\n        locationDate: EVE.locationDate,\n        shipDate: EVE.shipDate,\n        systemChange: systemChange\n    };\n}\n","appData.genericSystemTypes = [\n\t\"Null-Sec\", \"Low-Sec\", \"High-Sec\",\n\t\"Class-1\", \"Class-2\", \"Class-3\", \"Class-4\", \"Class-5\", \"Class-6\", \"Class-13\", \n\t\"Triglavian\",\n\t\"Unknown\", \"Unknown (small)\", \"Dangerous\",\n\t\"Class-14\", \"Class-15\", \"Class-16\", \"Class-17\", \"Class-18\", \n\t];\n","tripwire.parse = function(server, mode) {\n    var data = $.extend(true, {}, server);\n\n    var updateSignatureTable = false;\n\tconst newSigsInSystem = { };\n\n    if (options.chain.active == null || (options.chain.tabs[options.chain.active] && options.chain.tabs[options.chain.active].evescout != true)) {\n        if (options.masks.active != \"273.0\") {\n            for (var key in data.signatures) {\n                if (data.signatures[key].mask == \"273.0\") {\n                    delete data.signatures[key];\n                }\n            }\n        }\n    }\n\n    if (mode == 'refresh') {\n        // preserve client.EVE across refresh otherwise tracking/automapper will be confused\n        var EVE = this.client.EVE;\n        this.client = server;\n        this.client.EVE = EVE;\n\n        for (var key in data.signatures) {\n            if (data.signatures[key].systemID != viewingSystemID) {\n                continue;\n            }\n\t\t\tnewSigsInSystem[key] = data.signatures[key];\n            var disabled = data.signatures[key].mask == \"273.0\" && options.masks.active != \"273.0\" ? true : false;\n\n            // Check for differences\n            if (!tripwire.signatures.list[key]) {\n\t\t\t\ttripwire.signatures.list[key] = data.signatures[key];\t// To reduce race condition chance\n                this.addSig(data.signatures[key], {animate: true}, disabled);\n                updateSignatureTable = true;\n            } else if (tripwire.signatures.list[key].modifiedTime !== data.signatures[key].modifiedTime) {\n                var edit = false;\n                for (column in data.signatures[key]) {\n                    if (data.signatures[key][column] != tripwire.signatures.list[key][column] && column != \"editing\") {\n                        edit = true;\n                    }\n                }\n\n                if (edit) {\n                    this.editSig(data.signatures[key], disabled);\n                } else {\n                    // this.sigEditing(data.signatures[key]);\n                }\n            }\n        }\n\n        // Sigs needing removal\n        for (var key in tripwire.signatures.list) {\n            if (!data.signatures[key]) {\n                this.deleteSig(key);\n            }\n        }\n    } else if (mode == 'init' || mode == 'change') {\n        this.client = server;\n\n        for (var key in data.signatures) {\n            if (data.signatures[key].systemID != viewingSystemID) {\n                continue;\n            }\n\t\t\tnewSigsInSystem[key] = data.signatures[key];\n            var disabled = data.signatures[key].mask == \"273.0\" && options.masks.active != \"273.0\" ? true : false;\n\t\t\t\n\t\t\tif(!tripwire.signatures.list[key]) {\n\t\t\t\tthis.addSig(data.signatures[key], {animate: false}, disabled);\n\t\t\t\tupdateSignatureTable = true;\n\t\t\t}\n            if (data.signatures[key].editing) {\n                this.sigEditing(data.signatures[key]);\n            }\n        }\n    } else { return; }\t// unknown type of parse request so do nothing\n\n    if (updateSignatureTable) {\n        $(\"#sigTable\").trigger(\"update\");\n    }\n    tripwire.signatures.list = data.signatures;\n\ttripwire.signatures.currentSystem = newSigsInSystem;\n\t\t\n    // set the sig count in the UI\n    var signatureCount = 0;\n    $.map(data.signatures, function(signature) {signature.systemID == viewingSystemID ? signatureCount++ : null;});\n    $(\"#signature-count\").html(signatureCount);\n}\n\n/** Find if there is an unknown return sig. The markup is always generated (in addSignature.js) */\ntripwire.updateReturnStatus = function() {\n\tconst inSigId = $(\"#chainMap [data-nodeid='\"+viewingSystemID+\"']:not(.calc)\").attr('data-insigid');\n\tconst wormholeId = $(\"#chainMap [data-nodeid='\"+viewingSystemID+\"']:not(.calc)\").attr('data-sigid');\n\tconst wormhole = tripwire.client.wormholes[wormholeId] || {};\n\t// One of the two ends should be in this system, In sig will be the wrong end, so find the other end\n\tconst returnSigId = wormhole.initialID == inSigId ? wormhole.secondaryID : wormhole.initialID;\n\ttripwire.signatures.returnSig = tripwire.signatures.list[returnSigId];\n\tconst needReturn = tripwire.signatures.returnSig && (tripwire.signatures.returnSig.signatureID == '???' || tripwire.signatures.returnSig.signatureID == '' || tripwire.signatures.returnSig.signatureID === null || tripwire.signatures.returnSig.signatureID === undefined);\n\tdocument.getElementById('sigTableWrapper').className = needReturn ? 'return-visible' : 'return-invisible';\t\n}","// Handles pasting sigs from EVE\ntripwire.pasteSignatures = function() {\n    var processing = false;\n\n    var rowParse = function(row) {\n        var scanner = {};\n        var columns = row.split(\"\t\"); // Split by tab\n        var validScanGroups = [\n            // English (en-us)\n            \"Cosmic Signature\",\n            \"Cosmic Anomaly\",\n\n            // French (fr)\n            \"Signature cosmique\",\n            \"Anomalie cosmique\",\n\n            // German (de)\n            \"Kosmische Anomalie\",\n            \"Kosmische Signatur\",\n\n            // Japanese (ja)\n            \"宇宙の特異点\",\n            \"宇宙のシグネチャ\",\n\n            // Korean (ko)\n            \"코즈믹 시그니처\",\n            \"코즈믹 어노말리\",\n\n            // Russian (ru)\n            \"Скрытый сигнал\",\n            \"Космическая аномалия\",\n        ];\n\n        var validTypes = {\n            // English (en-us)\n            \"Combat Site\": \"Combat\",\n            \"Data Site\": \"Data\",\n            \"Gas Site\": \"Gas\",\n            \"Ore Site\": \"Ore\",\n            \"Relic Site\": \"Relic\",\n            \"Wormhole\": \"Wormhole\",\n\n            // French (fr)\n            \"Site de combat\": \"Combat\",\n            \"Site de données\": \"Data\",\n            \"Site de collecte de gaz\": \"Gas\",\n            \"Site de minerai\": \"Ore\",\n            \"Site de reliques\": \"Relic\",\n            \"Trou de ver\": \"Wormhole\",\n\n            // German (de)\n            \"Kampfgebiet\": \"Combat\",\n            \"Datengebiet\": \"Data\",\n            \"Gasgebiet\": \"Gas\",\n            \"Mineraliengebiet\": \"Ore\",\n            \"Reliktgebiet\": \"Relic\",\n            \"Wurmloch\": \"Wormhole\",\n\n            // Japanese (ja)\n            \"戦闘サイト\": \"Combat\",\n            \"データサイト\": \"Data\",\n            \"ガスサイト\": \"Gas\",\n            \"鉱石サイト\": \"Ore\",\n            \"遺物サイト\": \"Relic\",\n            \"ワームホール\": \"Wormhole\",\n\n            // Korean (ko)\n            \"전투 사이트\": \"Combat\",\n            \"데이터 사이트\": \"Data\",\n            \"가스 사이트\": \"Gas\",\n            \"채광 사이트\": \"Ore\",\n            \"유물 사이트\": \"Relic\",\n            \"웜홀\": \"Wormhole\",\n\n            // Russian (ru)\n            \"Боевой район\": \"Combat\",\n            \"Информационный район\": \"Data\",\n            \"Газовый район\": \"Gas\",\n            \"Астероидный район\": \"Ore\",\n            \"Археологический район\": \"Relic\",\n            \"Червоточина\": \"Wormhole\",\n        };\n\n        for (var x in columns) {\n            if (columns[x].match(/^([A-Z]{3}[-]\\d{3})$/)) {\n                scanner.id = columns[x].split(\"-\");\n                continue;\n            }\n\n            if (columns[x].match(/(\\d([.|,]\\d)?[ ]?(%))/) || columns[x].match(/(\\d[.|,]?\\d+\\s?(UA|AU|AE|km|m|а.е.|км|м))/i)) { // Exclude scan % || AU\n                continue;\n            }\n\n            if ($.inArray(columns[x], validScanGroups) != -1) {\n                scanner.scanGroup = columns[x];\n                continue;\n            }\n\n            if (validTypes[columns[x]]) {\n                scanner.type = validTypes[columns[x]];\n                continue;\n            }\n\n            if (columns[x] != \"\") {\n                scanner.name = columns[x].trim();\n            }\n        }\n\n        if (!scanner.id || scanner.id.length !== 2) {\n            return false;\n        }\n\n        return scanner;\n    }\n\n    this.pasteSignatures.parsePaste = function(paste) {\n        var paste = paste.split(\"\\n\");\n        var payload = {\"signatures\": {\"add\": [], \"update\": []}, \"systemID\": viewingSystemID};\n        var undo = [];\n        processing = true;\n\n        for (var i in paste) {\n            var scanner = rowParse(paste[i]);\n\n            if (scanner.id) {\n                var signature = $.map(tripwire.client.signatures, function(signature) { if (signature.signatureID && signature.signatureID.toUpperCase() == scanner.id[0] + scanner.id[1] && signature.systemID == viewingSystemID) return signature; })[0];\n                if (signature) {\n                    // Update signature (only non-wormholes can be updated to a wormhole)\n                    if (scanner.type == \"Wormhole\" && signature.type != \"wormhole\") {\n                        var wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0] || {};\n                        var otherSignature = wormhole.id ? (signature.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID]) : {};\n                        payload.signatures.update.push({\n                            \"wormhole\": {\n                                \"id\": wormhole.id || null,\n                                \"type\": wormhole.type || null,\n                                \"life\": wormhole.life || \"stable\",\n                                \"mass\": wormhole.mass || \"stable\"\n                            },\n                            \"signatures\": [\n                                {\n                                    \"id\": signature.id,\n                                    \"signatureID\": signature.signatureID,\n                                    \"systemID\": viewingSystemID,\n                                    \"type\": \"wormhole\",\n                                    \"name\": signature.name\n                                },\n                                {\n                                    \"id\": otherSignature.id || null,\n                                    \"signatureID\": otherSignature.signatureID || null,\n                                    \"systemID\": otherSignature.systemID || null,\n                                    \"type\": \"wormhole\",\n                                    \"name\": otherSignature.name\n                                }\n                            ]\n                        });\n\n                        if (tripwire.client.wormholes[wormhole.id]) {\n\t\t\t\t\t\t\tundo.push({\"wormhole\": tripwire.client.wormholes[wormhole.id], \"signatures\": [tripwire.client.signatures[signature.id], tripwire.client.signatures[otherSignature.id]]});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// used to be just a regular signature\n\t\t\t\t\t\t\tundo.push(tripwire.client.signatures[signature.id]);\n\t\t\t\t\t\t}\n                    // Make sure we are only updating when we have new info (we never turn wormholes into regular signatures)\n                    } else if (signature.type != \"wormhole\" && ((scanner.type && scanner.type.toLowerCase() != signature.type) || (scanner.name && scanner.name != signature.name))) {\n                        payload.signatures.update.push({\n                            \"id\": signature.id,\n                            \"systemID\": viewingSystemID,\n                            \"type\": scanner.type || 'unknown',\n                            \"name\": scanner.name,\n                            \"lifeLength\": options.signatures.pasteLife * 60 * 60\n                        });\n                        undo.push(tripwire.client.signatures[signature.id]);\n                    }\n                } else {\n                    // Add signature\n                    if (scanner.type == \"Wormhole\") {\n                        payload.signatures.add.push({\n                            \"wormhole\": {\n                                \"type\": null,\n                                \"parent\": \"initial\",\n                                \"life\": \"stable\",\n                                \"mass\": \"stable\"\n                            },\n                            \"signatures\": [\n                                {\n                                    \"signatureID\": scanner.id[0] + scanner.id[1],\n                                    \"systemID\": viewingSystemID,\n                                    \"type\": \"wormhole\",\n                                    \"lifeLength\": options.signatures.pasteLife * 60 * 60\n                                },\n                                {\n                                    \"signatureID\": null,\n                                    \"systemID\": null,\n                                    \"type\": \"wormhole\",\n                                    \"lifeLength\": options.signatures.pasteLife * 60 * 60\n                                }\n                            ]\n                        });\n                    } else {\n                        payload.signatures.add.push({\n                            \"signatureID\": scanner.id[0] + scanner.id[1],\n                            \"systemID\": viewingSystemID,\n                            \"type\": scanner.type || 'unknown',\n                            \"name\": scanner.name,\n                            \"lifeLength\": options.signatures.pasteLife * 60 * 60\n                        });\n                    }\n                }\n            }\n        }\n\n        if (payload.signatures.add.length || payload.signatures.update.length) {\n            var success = function(data) {\n                if (data.resultSet && data.resultSet[0].result == true) {\n                    $(\"#undo\").removeClass(\"disabled\");\n\n                    if (data.results) {\n                        if (viewingSystemID in tripwire.signatures.undo) {\n                            tripwire.signatures.undo[viewingSystemID].push({action: \"add\", signatures: data.results});\n                        } else {\n                            tripwire.signatures.undo[viewingSystemID] = [{action: \"add\", signatures: data.results}];\n                        }\n                    }\n\n                    if (undo.length) {\n                        if (viewingSystemID in tripwire.signatures.undo) {\n                            tripwire.signatures.undo[viewingSystemID].push({action: \"update\", signatures: undo});\n\t\t\t\t\t\t} else {\n                            tripwire.signatures.undo[viewingSystemID] = [{action: \"update\", signatures: undo}];\n\t\t\t\t\t\t}\n                    }\n\n                    sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n                }\n            }\n\n            var always = function(data) {\n                processing = false;\n            }\n\n            tripwire.refresh('refresh', payload, success, always);\n        } else {\n            processing = false;\n        }\n    }\n\n    this.pasteSignatures.init = function() {\n        $(document).keydown(function(e)\t{\n            if ((e.metaKey || e.ctrlKey) && (e.keyCode == 86 || e.keyCode == 91) && !processing) {\n                //Abort - user is in input or textarea\n                if ($(document.activeElement).is(\"textarea, input\")) return;\n\n                $(\"#clipboard\").focus();\n            }\n        });\n\n        $(\"body\").on(\"click\", \"#fullPaste\", function(e) {\n            e.preventDefault();\n\n            var paste = $(this).data(\"paste\").split(\"\\n\");\n            var pasteIDs = [];\n            var removes = [];\n            var undo = [];\n\n            for (var i in paste) {\n                if (scan = rowParse(paste[i])) {\n                    pasteIDs.push((scan.id[0] + scan.id[1]).toLowerCase());\n                }\n            }\n\n            for (var i in tripwire.client.signatures) {\n                var signature = tripwire.client.signatures[i];\n\n                if (signature.systemID == viewingSystemID && signature.signatureID && $.inArray(signature.signatureID.toLowerCase(), pasteIDs) === -1 && signature.signatureID !== \"???\") {\n                    if (signature.type == \"wormhole\") {\n                        var wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0] || {};\n                        var otherSignature = wormhole.id ? (signature.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID]) : {};\n                        if (wormhole.type !== \"GATE\") {\n                            removes.push(wormhole);\n                            undo.push({\"wormhole\": wormhole, \"signatures\": [signature, otherSignature]});\n                        }\n                    } else {\n                        removes.push(signature.id);\n                        undo.push(signature);\n                    }\n                }\n            }\n\n            if (removes.length > 0) {\n                var payload = {\"signatures\": {\"remove\": removes}};\n\n                var success = function(data) {\n                    if (data.resultSet && data.resultSet[0].result == true) {\n                        $(\"#undo\").removeClass(\"disabled\");\n                        if (viewingSystemID in tripwire.signatures.undo) {\n                            tripwire.signatures.undo[viewingSystemID].push({action: \"remove\", signatures: undo});\n                        } else {\n                            tripwire.signatures.undo[viewingSystemID] = [{action: \"remove\", signatures: undo}];\n                        }\n\n                        sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n                    }\n                }\n\n                tripwire.refresh('refresh', payload, success);\n            }\n        });\n\n        $(\"#clipboard\").on(\"paste\", function(e) {\n            e.preventDefault();\n            var paste = window.clipboardData ? window.clipboardData.getData(\"Text\") : (e.originalEvent || e).clipboardData.getData('text/plain');\n\n            $(\"#clipboard\").blur();\n            Notify.trigger(\"Paste detected<br/>(<a id='fullPaste' href=''>Click to delete missing sigs</a>)\");\n            $(\"#fullPaste\").data(\"paste\", paste);\n            tripwire.pasteSignatures.parsePaste(paste);\n        });\n    }\n\n    this.pasteSignatures.init();\n}\ntripwire.pasteSignatures();\n","tripwire.redo = function() {\n    if (tripwire.signatures.redo[viewingSystemID].length > 0) {\n        $(\"#redo\").addClass(\"disabled\");\n        var lastIndex = tripwire.signatures.redo[viewingSystemID].length -1;\n        var data = {\"systemID\": viewingSystemID, \"signatures\": {\"add\": [], \"remove\": [], \"update\": []}};\n\n        var redoItem = tripwire.signatures.redo[viewingSystemID][lastIndex];\n        var undo = $.map(redoItem.signatures, function(signature) {\n            // grab the current signature so we can restore the way it is now\n            if (signature.wormhole && tripwire.client.wormholes[signature.wormhole.id]) {\n                // it was a wormhole and still is\n                return {\"wormhole\": tripwire.client.wormholes[signature.wormhole.id], \"signatures\": [tripwire.client.signatures[signature.signatures[0].id], tripwire.client.signatures[signature.signatures[1].id]]};\n            } else if (tripwire.client.signatures[signature.id] && tripwire.client.signatures[signature.id].type == \"wormhole\") {\n                // it was a regular signature but is now a wormhole\n                var wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n                return {\"wormhole\": wormhole, \"signatures\": [tripwire.client.signatures[wormhole.initialID], tripwire.client.signatures[wormhole.secondaryID]]};\n            } else if (signature.wormhole && tripwire.client.signatures[signature.signatures[0].id]) {\n                // it was a wormhole but is now a regular signature\n                return tripwire.client.signatures[signature.signatures[0].id];\n            } else {\n                // it was a regular signature and still is\n                return tripwire.client.signatures[signature.id];\n            }\n        });\n\n        switch(redoItem.action) {\n            case \"add\":\n                data.signatures.add = data.signatures.add.concat(redoItem.signatures);\n                break;\n            case \"remove\":\n                data.signatures.remove = data.signatures.remove.concat($.map(redoItem.signatures, function(signature) { return signature.wormhole ? signature.wormhole : signature.id }));\n                break;\n            case \"update\":\n                data.signatures.update = data.signatures.update.concat(redoItem.signatures);\n                break;\n        }\n\n        var success = function(data) {\n            if (data.resultSet && data.resultSet[0].result == true) {\n                tripwire.signatures.redo[viewingSystemID].pop();\n\n                $(\"#undo\").removeClass(\"disabled\");\n                if (viewingSystemID in tripwire.signatures.undo) {\n                    if (redoItem.action == \"add\") {\n                        // we are adding new signatures we removed so we need the new ids\n                        tripwire.signatures.undo[viewingSystemID].push({\"action\": redoItem.action, \"signatures\": data.results});\n                    } else if (redoItem.action == \"update\") {\n                        tripwire.signatures.undo[viewingSystemID].push({\"action\": redoItem.action, \"signatures\": undo});\n                    } else {\n                        tripwire.signatures.undo[viewingSystemID].push({action: redoItem.action, signatures: redoItem.signatures});\n                    }\n                } else {\n                    if (redoItem.action == \"add\") {\n                        tripwire.signatures.undo[viewingSystemID] = [{\"action\": redoItem.action, \"signatures\": data.results}];\n                    } else if (redoItem.action == \"update\") {\n                        tripwire.signatures.undo[viewingSystemID] = [{\"action\": redoItem.action, \"signatures\": undo}];\n                    } else {\n                        tripwire.signatures.undo[viewingSystemID] = [{action: redoItem.action, signatures: redoItem.signatures}];\n                    }\n                }\n\n                sessionStorage.setItem(\"tripwire_redo\", JSON.stringify(tripwire.signatures.redo));\n                sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n            }\n        }\n\n        var always = function(data) {\n            if (tripwire.signatures.redo[viewingSystemID].length > 0) {\n                $(\"#redo\").removeClass(\"disabled\");\n            }\n        }\n\n        tripwire.refresh('refresh', data, success, always);\n    }\n}\n","// Handles pulling TQ status & player count\ntripwire.serverStatus = function() {\n    this.data;\n    this.timer;\n\n    clearTimeout(tripwire.serverStatus.timer);\n\n    tripwire.esi.eveStatus()\n        .always(function(data) {\n            if (data && data.players && data.players > 0) {\n                if (!tripwire.serverStatus.data || tripwire.serverStatus.data.players !== data.players) {\n                    $('#serverStatus').html(\"<span class='\"+(data.players > 0 ? 'stable' : 'critical')+\"'>TQ</span>: \"+Intl.NumberFormat().format(data.players));\n\n                    if (tripwire.serverStatus.data) {\n                        $(\"#serverStatus\").effect('pulsate', {times: 5});\n                    }\n                }\n\n                tripwire.serverStatus.data = data;\n            } else {\n                $('#serverStatus').html(\"<span class='critical'>TQ</span>\");\n            }\n\n            tripwire.serverStatus.timer = setTimeout(\"tripwire.serverStatus();\", 15000);\n        });\n}\ntripwire.serverStatus();\n\ntripwire.updateServerTime = function() {\n\tdocument.getElementById('serverTime').innerText = moment.utc().format('HH:mm')\n};\nsetInterval(tripwire.updateServerTime, 5000);\ntripwire.updateServerTime();","tripwire.sync = function(mode, data, successCallback, alwaysCallback) {\t\n    var data = typeof(data) === \"object\" ? $.extend(true, {}, data) : {};\n\n    // Grab any pending changes\n    $.extend(true, data, tripwire.data);\n\n    // Remove old timer to prevent multiple\n    if (this.timer) clearTimeout(this.timer);\n    if (this.xhr) {\n\t\tconsole.log('Awaiting existing XHR ' + this.xhr.data.mode + ': ', this.xhr);\n\t\ttripwire.data = data;\n\t\tthis.timer = setTimeout(function() { tripwire.sync(mode, data, successCallback, alwaysCallback); }, 50);\n\t\treturn false;\n\t}\n\n    if (mode == 'refresh' || mode == 'change') {\n        data.signatureCount = tripwire.serverSignatureCount;\n        data.signatureTime = maxTimeByProperty(this.client.signatures, \"modifiedTime\");\n\n        data.flareCount = chain.data.flares ? chain.data.flares.flares.length : 0;\n        data.flareTime = chain.data.flares ? chain.data.flares.last_modified : 0;\n\n        data.commentCount = Object.keys(this.comments.data||{}).length;\n        data.commentTime = maxTimeByProperty(this.comments.data, \"modified\");\n\n        data.activity = this.activity;\n    } else {\n        // Expand Tripwire with JSON data from EVE Data Dump and other static data\n        $.extend(this, appData);\n\n        this.aSigSystems = Object.assign(\n\t\t\t// Using the index as a key here because numeric keys always come first and we want these before real systems\n\t\t\t// see https://stackoverflow.com/questions/47881998/\n\t\t\tappData.genericSystemTypes.reduce(function(o, s, i) { o[i] = systemAnalysis.analyse(s); o[i].name = s; return o; }, {} ),\n\t\t\tthis.systems);\n\t\t\n        $(\".systemsAutocomplete\").inlinecomplete({source: this.systems, renderer: 'system', maxSize: 10, delay: 0});\n    }\n\n    data.mode = mode != \"init\" ? \"refresh\" : \"init\";\n    data.systemID = viewingSystemID;\n    data.systemName = viewingSystem;\n    data.instance = tripwire.instance;\n    data.version = tripwire.version;\n\n    this.xhr = $.ajax({\n        url: \"refresh.php\",\n        data: data,\n        type: \"POST\",\n        dataType: \"JSON\",\n        cache: false\n    }).done(function(data) {\n        if (data) {\n            tripwire.server = data;\n            if(data.signatures) { // Save this count before we delete entries\n                tripwire.serverSignatureCount = Object.keys(data.signatures||{}).length;\n            }\n\n            if (data.wormholes) {\n                // Purge bad wormhole signatures\n                var wormholeInitialIDs = {};\n                var wormholeSecondaryIDs = {};\n                Object.values(data.wormholes).forEach(function (wh) {\n                    wormholeInitialIDs[parseInt(wh.initialID)] = wh.id;\n                    wormholeSecondaryIDs[parseInt(wh.secondaryID)] = wh.id;\n                })\n                for (var i in data.signatures) {\n                  if (data.signatures[i].type == \"wormhole\") {\n                    var id = data.signatures[i].id;\n                    if (wormholeInitialIDs[id] === undefined && wormholeSecondaryIDs[id] === undefined) {\n                      delete data.signatures[i];\n                    }\n                  }\n                }\n            }\n\n            if (data.esi) {\n                tripwire.esi.parse(data.esi);\n            }\n\n            if (data.oauth) {\n                tripwire.esi.parseOauth(data.oauth);\n            }\n\n            if (data.sync) {\n                tripwire.serverTime.time = new Date(data.sync);\n            }\n\n            if (data.signatures) {\n                tripwire.parse(data, mode);\n            }\n\n            if (data.comments) {\n                tripwire.comments.parse(data.comments);\n            }\n\n            if (data.wormholes || data.occupied || data.flares) {\n                tripwire.chainMap.parse({\"map\": data.wormholes || null, \"occupied\": data.occupied || null, \"flares\": data.flares || null});\n            } else if (chain.data.occupied && chain.data.occupied.length && !data.occupied) {\n                // send update to remove all occupied system indicators\n                tripwire.chainMap.parse({\"occupied\": []});\n            }\n\n\t\t\ttripwire.updateReturnStatus();\n\n            tripwire.active(data.activity);\n\n            if (data.notify && !$(\"#serverNotification\")[0]) Notify.trigger(data.notify, \"yellow\", false, \"serverNotification\");\n\t\t\t\n\t\t\t$('[data-command=ping]')[data.discord_integration ? 'show' : 'hide']();\n        }\n\n        tripwire.data = {tracking: {}, esi: {}};\n        successCallback ? successCallback(data) : null;\n    }).always(function(data, status) {\n        tripwire.timer = setTimeout(\"tripwire.refresh();\", tripwire.refreshRate);\n\n        alwaysCallback ? alwaysCallback(data) : null;\n\n        if (data.status == 403) {\n            window.location.href = \".\";\n        } else if (status != \"success\" && status != \"abort\" && tripwire.connected == true) {\n            tripwire.connected = false;\n            $(\"#ConnectionSuccess\").click();\n            Notify.trigger(\"Error syncing with server\", \"red\", false, \"connectionError\");\n        } else if (status == \"success\" && tripwire.connected == false) {\n            tripwire.connected = true;\n            $(\"#connectionError\").click();\n            Notify.trigger(\"Successfully reconnected with server\", \"green\", 5000, \"connectionSuccess\");\n        }\n\t\t\n\t\ttripwire.xhr = null;\n    });\n\tthis.xhr.data = data;\n\t\n    return true;\n};\n\nfunction maxTimeByProperty(obj, prop) {\n\tvar maxTimeString = \"\", maxTime;\n\n\tfor (var key in obj) {\n\t\tif (!maxTime || maxTime < new Date(obj[key][prop])) {\n\t\t\tmaxTime = new Date(obj[key][prop]);\n\t\t\tmaxTimeString = obj[key][prop];\n\t\t}\n\t}\n\treturn maxTimeString;\n}\n\ntripwire.sync(\"init\");\n","// Change the currently viewed system\ntripwire.systemChange = function(systemID, mode) {\n\tconst system = systemAnalysis.analyse(systemID);\n\tif(!system) { return; }\n\t\t\n    if (mode != \"init\") {\n        $(\"#infoSecurity\").removeClass();\n        $(\"#infoStatics\").empty();\n\n        viewingSystem = system.name;\n        viewingSystemID = systemID;\n\n        // Reset activity\n        activity.refresh(true);\n\n        // Reset signatures\n        $(\"#sigTable span[data-age]\").countdown(\"destroy\");\n        $(\"#sigTable tbody\").empty();\n        $(\"#signature-count\").html(0);\n        tripwire.signatures.list = {};\n        tripwire.client.signatures = null;\n\n        // Reset chain map\n        chain.redraw();\n\n        // Reset comments\n        $(\"#notesWidget .content .comment:visible\").remove();\n        tripwire.comments.data = null;\n\n        // Change the URL & history\n        history.replaceState(null, null, \"?system=\"+viewingSystem);\n\n        tripwire.refresh(\"change\");\n    }\n\n    // Change the title\n    document.title = system.name + \" - \" + app_name;\n\n    $(\"#infoSystem\").text(system.name);\n\n    var formJourneyLink = function(type){\n        var origin = window.location.origin;\n        return origin + \"/?journey&\"+type+\"=\"+system.name;\n    }\n\n    $(\"#journeyFrom\").attr(\"href\", formJourneyLink(\"from\"))\n    $(\"#journeyTo\").attr(\"href\", formJourneyLink(\"to\"))\n\n    // Current system favorite\n    $.inArray(parseInt(viewingSystemID), options.favorites) != -1 ? $(\"#system-favorite\").attr(\"data-icon\", \"star\").addClass(\"active\") : $(\"#system-favorite\").attr(\"data-icon\", \"star-empty\").removeClass(\"active\");\n\t\n    if (system.class) {\n        // Security\n        $(\"#infoSecurity\").html(\"<span class='\" + system.systemTypeClass+\" pointer'>Class \" + system.class + \"</span>\");\n\n        // Effects\n        if (system.effect) {\n            var tooltip = \"<table cellpadding=\\\"0\\\" cellspacing=\\\"1\\\">\";\n            for (var x in tripwire.effects[system.effect]) {\n                var effect = tripwire.effects[system.effect][x].name;\n                var base = tripwire.effects[system.effect][x].base;\n                var bad = tripwire.effects[system.effect][x].bad;\n                var whClass = system.class > 6 ? 6 : system.class;\n                var modifier = 0;\n\n                switch (Math.abs(base)) {\n                    case 15:\n                        modifier = base > 0 ? 7 : -7;\n                        break;\n                    case 30:\n                        modifier = base > 0 ? 14 : -14;\n                        break;\n                    case 60:\n                        modifier = base > 0 ? 28 : -28;\n                        break;\n                }\n\n                tooltip += \"<tr><td>\" + effect + \"</td><td style=\\\"padding-left: 25px; text-align: right;\\\" class=\\\"\" + (bad ? \"critical\" : \"stable\") + \"\\\">\";\n                tooltip += base + (modifier * (whClass -1)) + \"%</td></tr>\";\n            }\n            tooltip += \"</table>\";\n            $(\"#infoSecurity\").append(\"&nbsp;<span class='pointer' data-tooltip='\" + tooltip + \"'>\" + system.effect + \"</span>\");\n        }\n\n        // Statics\n        for (var x in system.statics) {\n            var type = system.statics[x];\n            var wormhole = appData.wormholes[type];\n            var color = \"wh\";\n\n            switch (wormhole.leadsTo) {\n                case \"High-Sec\":\n                    color = \"hisec\";\n                    break;\n                case \"Low-Sec\":\n                    color = \"lowsec\";\n                    break;\n                case \"Null-Sec\":\n                    color = \"nullsec\";\n                    break;\n            }\n\n            $(\"#infoStatics\").append(\"<div><span class='\"+ color +\"'>&#9679;</span> <b class='\"+ color +\"'>\"+ wormhole.leadsTo +\"</b> via <span>\"+ wormholeRendering.renderWormholeType(wormhole, type, system) +\"</span></div>\");\n        }\n\n        // Faction\n        $(\"#infoFaction\").html(\"&nbsp;\");\n    } else {\n        // Security\n\t\tconst securityText = {HS: 'High-Sec', LS: 'Low-Sec', NS: 'Null-Sec', 'Trig': 'Triglavian' }[system.systemTypeName];\n       $(\"#infoSecurity\").addClass(system.systemTypeClass).html(securityText + \" \" + system.baseSecurity.toFixed(2) + system.systemTypeModifiers.join(' '));\n\n        // Faction\n        if(fw) { $(\"#infoFaction\").html(fw.factionMarkup(system)); }\n\t\t\n\t\t// Gates\n\t\tconst connections = guidance.connections(tripwire.map.shortest, viewingSystemID);\n\t\tif(connections.length) {\n\t\t\t$('#infoStatics').append('<p><b>Gates</b>: ' + connections.map(c => {\n\t\t\t\tconst system = systemAnalysis.analyse(c.systemID);\n\t\t\t\treturn c.closed ? '<s>' + system.name + '</s> (closed)' : systemRendering.renderSystem(system); \n\t\t\t}).join(', ') + '</p>');\n\t\t}\n\t\t\n\t\t// Route to favourites\n\t\tfor (var fi in options.favorites) {\n\t\t\tconst f = options.favorites[fi];\n\t\t\tconst path = guidance.findShortestPath(tripwire.map.shortest, f, viewingSystemID);\n\t\t\tif(path) { $('#infoStatics').append('<p><b><a href=\".?system=' + tripwire.systems[f].name + '\">' +tripwire.systems[f].name + '</a></b>: ' + systemRendering.renderPath(path) + '</p>'); }\n\t\t}\n    }\n\n\tTooltips.attach($(\"#infoStatics [data-tooltip]\"));\n    Tooltips.attach($(\"#infoSecurity [data-tooltip]\"));\n\n    // Region\n    $(\"#infoRegion\").text(tripwire.regions[system.regionID].name);\n\n    // Info Links\n    $(\"#infoWidget .infoLink\").each(function() {\n        this.href = $(this).data(\"href\").replace(/\\$systemName/gi, system.name).replace(/\\$systemID/gi, systemID);\n    });\n\n    // Reset undo/redo\n    tripwire.signatures.undo[systemID] && tripwire.signatures.undo[systemID].length > 0 ? $(\"#undo\").removeClass(\"disabled\") : $(\"#undo\").addClass(\"disabled\");\n    tripwire.signatures.redo[systemID] && tripwire.signatures.redo[systemID].length > 0 ? $(\"#redo\").removeClass(\"disabled\") : $(\"#redo\").addClass(\"disabled\");\n\n    // Reset delete signature icon\n    $(\"#sigTable tr.selected\").length == 0 ? $(\"#signaturesWidget #delete-signature\").addClass(\"disabled\") : $(\"#signaturesWidget #delete-signature\").removeClass(\"disabled\");\n}\n\nsetTimeout(() => tripwire.systemChange(viewingSystemID, \"init\"), 0);\n","var tutorial;\n\n// infoWidget\n$(\"#infoWidget .tutorial\").click(function() {\n    tutorial = introJs().setOptions({\n        showStepNumbers: false,\n        steps: [\n            {\n                element: document.querySelector(\"#infoWidget\"),\n                intro: \"<h4>System information widget</h4><br/><p>Displays information on the currently <b>selected</b> Tripwire system.</p>\"\n            },\n            {\n                element: document.querySelector(\"#infoGeneral\"),\n                intro: \"<p>This section includes:<br/>System Name<br/>Security Rating<br/>Region<br/>Owning Faction Name</p><br/><p>If the selected system is a wormhole with a system effect, that will also be shown - hover over it to view the effect breakdown.</p>\"\n            },\n            {\n                element: document.querySelector(\"#activityGraph\"),\n                intro: \"<p>For K space systems, a graph is shown here containing hourly ship jump and kill information from the EVE API.</p><br/><p>Each category can be toggled by clicking the keys above the graph, and the time period selected with the links below.</p>\"\n            },\n            {\n                element: document.querySelector(\"#infoStatics\"),\n                intro: \"<p>If a wormhole system is selected, its static wormhole types will appear here. (A static is a wormhole which is always present; when it is closed or expires, a new one will spawn.)</p><br/><p>In K space, the route to each of your favorite systems is shown here.</p>\"\n            },\n            {\n                element: document.querySelector(\"#favorite-control-wrapper\"),\n                intro: \"<p>Use the star to toggle whether this is a 'favorite' system. It shows orange when the current system is a favorite. The other button shows the Favorites panel which will show you all your favorite systems.</p><br/><p>'Favorite' systems in K space can be shown in the chain map, and in the routing panel to the lower left.</p>\"\n            },\n            {\n                element: document.querySelector(\"#show-favorite\"),\n                intro: \"<p>Use this toggle to show favorite systems and their routes on the chain map.</p>\"\n            },\n            {\n                element: document.querySelector(\"#infoExtra\"),\n                intro: \"<p>For K space systems, the shortest route to the currently visible chain will be shown here, along with the route within the chain.</p>\"\n            },\n            {\n                element: document.querySelector(\"#infoLinks\"),\n                intro: \"<p>These are some quick links to various sites for this specific system.</p>\"\n            },\t\t\t\n        ]\n    }).start();\n});\n\n// signaturesWidget\n$(\"#signaturesWidget .tutorial\").click(function() {\n    tutorial = introJs().setOptions({\n        showStepNumbers: false,\n        steps: [\n            {\n                element: document.querySelector(\"#signaturesWidget\"),\n                intro: \"<h4>System signatures widget</h4><br/><p>Displays all signatures and wormholes in the currently <b>selected</b> Tripwire system.</p>\"\n            },\n            {\n                element: document.querySelector(\"#add-signature\"),\n                intro: \"<p>Add new signatures and wormholes manually by clicking the + icon.</p><br/><p>Copy & Paste EVE scanner results anywhere once Tripwire has focus to add or update signatures, repeated pastes will only update with new information.</p>\"\n            },\n            {\n                element: document.querySelector(\"#delete-signature\"),\n                intro: \"<p>Click here or use the keyboard shortcut <b>DELETE</b> to delete <b>selected</b> signatures from this system.</p><br/><p>Click on a row to select it, click multiple rows to delete multiple signatures at once, click a selected row again to unselect it.</p>\"\n            },\n            {\n                element: document.querySelector(\"#signature-count\"),\n                intro: \"<p>This shows the current count of signatures, including wormholes, in the selected system.</p>\"\n            },\n            {\n                element: document.querySelector(\"#undo\"),\n                intro: \"<p>Click here or use the keyboard shortcut <b>CTRL-Z</b> to undo the last changes you made in this sytem (this includes clipboard pasted changes).</p><br/><p>You can undo multiple times as history is kept in the browser.</p>\"\n            },\n            {\n                element: document.querySelector(\"#redo\"),\n                intro: \"<p>Click here or use the keyboard shortcut <b>CTRL-Y</b> to redo the last changes you made in this system (this includes clipboard pasted changes).</p><br/><p>You can redo multiple times as history is kept in the browser.</p>\"\n            },\n            {\n                element: document.querySelector(\"#toggle-automapper\"),\n                intro: \"<p>Click here to toggle the Auto-mapper feature on (orange) or off.</p><br/><p>This feature only works when an in-game character is being actively tracked, otherwise this icon appears disabled.</p><br/><p>The automapper will watch for a change in your in-game system not via a star gate and try to automatically add or update wormholes.</p><br/><p>First it tries to seach for wormholes already added but missing a leads to system, this includes via wormhole type (B274) or with a leads to of 'High-Sec' for example.</p><br/><p>Next it searches for wormholes without any type or leads to at all.</p><br/><p>Finally if there are no wormholes or they all have a leads to system already, it will add a new wormhole.</p><br/><p>If at any time if finds multiple wormholes it can update, a dialog window will appear asking which wormhole you want to update.</p>\"\n            },\n            {\n                element: document.querySelector(\"#sigTable\"),\n                intro: \"<p>Each column can be sorted by clicking the column label, sort by multiple columns by holding the shift key.</p><br/><p>Right-click a column to change the text-alignment.</p>\"\n            }\n        ]\n    }).start();\n});\n\n// notesWidget\n$(\"#notesWidget .tutorial\").click(function(e) {\n    e.preventDefault();\n\n    tutorial = introJs().setOptions({\n        showStepNumbers: false,\n        exitOnEsc: false,\n        exitOnOverlayClick: false,\n        skipLabel: \"Abort\",\n        steps: [\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<h4>System notes widget</h4><br/><p>Displays comments based on the currently <b>selected</b> Tripwire system.</p><br/><p>The rest of this tutorial will guide you through actually adding a comment, but don't worry we will switch you to your private Tripwire mask so we don't disturb anyone else.</p><br/><p>When you finish or leave this tutorial we will switch you back to your previous Tripwire mask.</p>\"\n            },\n            {\n                element: document.querySelector(\"#add-comment\"),\n                intro: \"<p>Now click the + icon to begin adding a new comment in this system (\" + viewingSystem + \").</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>Type some basic text now and click save.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>This is our newly created comment. Hover over the comment with your mouse to see additional information and controls.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>You can click the 'pin' or 'sticky' button to toggle showing this comment for every system, not just this system.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>Use the <b>Edit</b> to modify a comment and <b>Delete</b> to remove a comment.</p><br/><p>You can also quickly edit any comment by simply doubling clicking anywhere on it.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>Click on the <b>Edit</b> now on our comment.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>The toolbar at the top allows you to customize your notes.</p><br/><p>You can also click on the <b>Maximize/Minimize</b> button (the far right toolbar icon) to edit this comment in full screen mode.</p><br/><p>In full screen mode you will see 1 new button added to the toolbar to view the source code of the comment where you can write HTML, CSS, and even Javascript in your notes!</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>This concludes the tutorial, we will now switch you back to your previous Tripwire mask and delete the comment we created.</p>\"\n            }\n        ]\n    }).start();\n\n    tutorial.onchange(function(element) {\n        switch(tutorial._currentStep) {\n            case 1:\n                $(\".introjs-prevbutton, .introjs-nextbutton\").hide();\n\n                console.log(\"switch mask to private\");\n                tutorial.previousMask = options.masks.active;\n                options.masks.active = options.character.id + \".1\";\n                options.save();\n\n                tutorial.stepFunc = function() {\n                    setTimeout(function() {\n                        tutorial._options.steps[2].element = $(\"#notesWidget\").find(\".comment:has(.cke_toolbar)\")[0];\n                        tutorial.setOption(\"steps\", tutorial._options.steps);\n\n                        tutorial.exiting = false;\n                        tutorial.exit().start().goToStep(3);\n                        tutorial.exiting = true;\n                    }, 200);\n                }\n\n                $(\"#notesWidget #add-comment\").on(\"click\", tutorial.stepFunc);\n                break;\n            case 2:\n                $(\".introjs-prevbutton, .introjs-nextbutton\").hide();\n                $(\"#notesWidget #add-comment\").off(\"click\", tutorial.stepFunc);\n\n                tutorial.stepFunc = function() {\n                    tutorial.comment = $(this).closest(\".comment\");\n                    setTimeout(function() {\n                        tutorial._options.steps[3].element = tutorial.comment[0];\n                        tutorial._options.steps[4].element = tutorial.comment.find(\".commentSticky\")[0];\n                        tutorial._options.steps[5].element = tutorial.comment.find(\".commentControls\")[0];\n                        tutorial._options.steps[6].element = tutorial.comment.find(\".commentControls\")[0];\n                        tutorial.setOption(\"steps\", tutorial._options.steps);\n\n                        tutorial.exiting = false;\n                        tutorial.exit().start().goToStep(4);\n                        tutorial.exiting = true;\n                    }, 200);\n                }\n\n                $(\"#notesWidget\").on(\"click\", \".commentSave\", tutorial.stepFunc);\n                break;\n            case 6:\n                $(\".introjs-prevbutton, .introjs-nextbutton\").hide();\n                $(\"#notesWidget\").off(\"click\", \".commentSave\", tutorial.stepFunc);\n\n                tutorial.stepFunc = function() {\n                    setTimeout(function() {\n                        tutorial._options.steps[7].element = $(\"#notesWidget\").find(\".comment:has(.cke_toolbar)\")[0];\n                        tutorial._options.steps[8].element = $(\"#notesWidget\").find(\".comment:has(.cke_toolbar)\")[0];\n                        tutorial.setOption(\"steps\", tutorial._options.steps);\n\n                        tutorial.exiting = false;\n                        tutorial.exit().start().goToStep(8);\n                        tutorial.exiting = true;\n                    }, 200);\n                }\n\n                $(\"#notesWidget\").on(\"click\", \".commentEdit\", tutorial.stepFunc);\n                break;\n        }\n    });\n\n    tutorial.onexit(function() {\n        if (tutorial.exiting) {\n            $(\".commentCancel:visible\").click();\n            // delete the tutorial comment that was created\n            if (tutorial.comment) {\n                var data = {\"mode\": \"delete\", \"commentID\": tutorial.comment.data(\"id\")};\n\n                $.ajax({\n                    url: \"comments.php\",\n                    type: \"POST\",\n                    data: data,\n                    dataType: \"JSON\"\n                }).done(function(data) {\n                    if (data && data.result == true) {\n                        tutorial.comment.remove();\n                    }\n                });\n            }\n\n            if (tutorial.previousMask) {\n                setTimeout(function() {\n                    console.log(\"change mask back, delete comment\", tutorial.previousMask);\n                    options.masks.active = tutorial.previousMask;\n                    options.save();\n                }, 200);\n            }\n\n            // remove event listeners\n            $(\"#notesWidget #add-comment\").off(\"click\", tutorial.stepFunc);\n            $(\"#notesWidget\").off(\"click\", \".commentSave\", tutorial.stepFunc);\n            $(\"#notesWidget\").off(\"click\", \".commentEdit\", tutorial.stepFunc);\n            $(\"#notesWidget\").off(\"click\", \".cke_toolgroup:has(.cke_button__toolbarswitch)\", tutorial.stepFunc);\n        }\n    });\n\n    tutorial.previousMask;\n    tutorial.comment;\n    tutorial.stepFunc;\n    tutorial.exiting = true;\n});\n","tripwire.undo = function() {\n    if (tripwire.signatures.undo[viewingSystemID].length > 0) {\n        $(\"#undo\").addClass(\"disabled\");\n        var lastIndex = tripwire.signatures.undo[viewingSystemID].length -1;\n        var data = {\"systemID\": viewingSystemID, \"signatures\": {\"add\": [], \"remove\": [], \"update\": []}};\n\n        var undoItem = tripwire.signatures.undo[viewingSystemID][lastIndex];\n        var redo = $.map(undoItem.signatures, function(signature) {\n            // grab the current signature so we can restore the way it is now\n            if (signature.wormhole && tripwire.client.wormholes[signature.wormhole.id]) {\n                // it was a wormhole and still is\n                return {\"wormhole\": tripwire.client.wormholes[signature.wormhole.id], \"signatures\": [tripwire.client.signatures[signature.signatures[0].id], tripwire.client.signatures[signature.signatures[1].id]]};\n            } else if (tripwire.client.signatures[signature.id] && tripwire.client.signatures[signature.id].type == \"wormhole\") {\n                // it was a regular signature but is now a wormhole\n                var wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n                return {\"wormhole\": wormhole, \"signatures\": [tripwire.client.signatures[wormhole.initialID], tripwire.client.signatures[wormhole.secondaryID]]};\n            } else if (signature.wormhole && tripwire.client.signatures[signature.signatures[0].id]) {\n                // it was a wormhole but is now a regular signature\n                return tripwire.client.signatures[signature.signatures[0].id];\n            } else {\n                // it was a regular signature and still is\n                return tripwire.client.signatures[signature.id];\n            }\n        });\n\n        switch(undoItem.action) {\n            case \"add\":\n                data.signatures.remove = data.signatures.remove.concat($.map(undoItem.signatures, function(signature) { return signature.wormhole ? signature.wormhole : signature.id }));\n                break;\n            case \"remove\":\n                data.signatures.add = data.signatures.add.concat(undoItem.signatures);\n                break;\n            case \"update\":\n                data.signatures.update = data.signatures.update.concat(undoItem.signatures);\n                break;\n        }\n\n        var success = function(data) {\n            if (data.resultSet && data.resultSet[0].result == true) {\n                tripwire.signatures.undo[viewingSystemID].pop();\n\n                $(\"#redo\").removeClass(\"disabled\");\n                if (viewingSystemID in tripwire.signatures.redo) {\n                    if (undoItem.action == \"remove\") {\n                        // we are adding new signatures we removed so we need the new ids\n                        tripwire.signatures.redo[viewingSystemID].push({\"action\": undoItem.action, \"signatures\": data.results});\n                    } else if (undoItem.action == \"update\") {\n                        tripwire.signatures.redo[viewingSystemID].push({\"action\": undoItem.action, \"signatures\": redo});\n                    } else {\n                        tripwire.signatures.redo[viewingSystemID].push({\"action\": undoItem.action, \"signatures\": undoItem.signatures});\n                    }\n                } else {\n                    if (undoItem.action == \"remove\") {\n                        tripwire.signatures.redo[viewingSystemID] = [{\"action\": undoItem.action, \"signatures\": data.results}];\n                    } else if (undoItem.action == \"update\") {\n                        tripwire.signatures.redo[viewingSystemID] = [{\"action\": undoItem.action, \"signatures\": redo}];\n                    } else {\n                        tripwire.signatures.redo[viewingSystemID] = [{\"action\": undoItem.action, \"signatures\": undoItem.signatures}];\n                    }\n                }\n\n                sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n                sessionStorage.setItem(\"tripwire_redo\", JSON.stringify(tripwire.signatures.redo));\n            }\n        }\n\n        var always = function(data) {\n            if (tripwire.signatures.undo[viewingSystemID].length > 0) {\n                $(\"#undo\").removeClass(\"disabled\");\n            }\n        }\n\n        tripwire.refresh('refresh', data, success, always);\n    }\n}\n","var activity = new function() {\n\tthis.graph;\n\tthis.options;\n\tthis.view;\n\tthis.span = 24;\n\tthis.columns = [\n\t\t{id: \"time\", label: \"Time\", role: \"domain\", type: \"string\", calc: function(d, r) { return d.getValue(r, 0) + \"h\"; }},\n\t\t{id: \"jumps\", label: \"Jumps\", role: \"data\", type: \"number\", sourceColumn: 1, column: 1, title: \"Jumps\"},\n\t\t{id: \"podkills\", label: \"Pod Kills\", role: \"data\", type: \"number\", sourceColumn: 2, column: 2, title: \"Pod Kills\"},\n\t\t{id: \"shipkills\", label: \"Ship Kills\", role: \"data\", type: \"number\", sourceColumn: 3, column: 3, title: \"Ship Kills\"},\n\t\t{id: \"npckills\", label: \"NPC Kills\", role: \"data\", type: \"number\", sourceColumn: 4, column: 4, title: \"NPC Kills\"},\n\t\t//{id: \"annotationLabel\", label: \"Test\", role: \"annotation\", type: \"string\", sourceColumn: 5, title: \"Test\"},\n\t\t//{id: \"annotationText\", label: \"Test\", role: \"annotationText\", type: \"string\", sourceColumn: 6, title: \"Test\"}\n\t];\n\n\tthis.getData = function(span, cache) {\n\t\tvar span = typeof(span) !== \"undefined\" ? span : this.span;\n\t\tvar cache = typeof(cache) !== \"undefined\" ? cache : true;\n\n\t\t// Google hasn't finished loading yet\n\t\tif (!activity.graph) {\n\t\t\t\tsetTimeout(function() {activity.getData(span, cache)}, 500);\n\t\t\t\treturn false;\n\t\t}\n\n\t\treturn $.ajax({\n\t\t\turl: \"activity_graph.php\",\n\t\t\tdata: {systemID: viewingSystemID, time: span},\n\t\t\ttype: \"GET\",\n\t\t\tdataType: \"JSON\",\n\t\t\tcache: cache\n\t\t}).done(function(json) {\n\t\t\tif (json) {\n\t\t\t\tjson.rows.reverse();\n\t\t\t\tactivity.view = new google.visualization.DataView(new google.visualization.DataTable(json));\n\t\t\t\tactivity.view.setColumns(activity.columns);\n\t\t\t\tactivity.graph.draw(activity.view, activity.options);\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.selectHandler = function() {\n\t\tvar selections = activity.graph.getSelection();\n\n\t\tif (selections[0] && selections[0].row == null) {\n\t\t\tvar c = selections[0].column;\n\n\t\t\tif (activity.columns[c].sourceColumn) {\n\t\t\t\t//activity.columns[c].calc = function() { return null };\n\t\t\t\tactivity.columns[c].label = activity.columns[c].title + \" (off)\";\n\t\t\t\tdelete activity.columns[c].sourceColumn;\n\t\t\t} else {\n\t\t\t\tactivity.columns[c].sourceColumn = activity.columns[c].column;\n\t\t\t\tactivity.columns[c].label = activity.columns[c].title;\n\t\t\t\t//delete activity.columns[c].calc;\n\t\t\t}\n\n\t\t\tactivity.view.setColumns(activity.columns);\n\t\t\tactivity.options.animation.duration = 0;\n\t\t\tactivity.graph.draw(activity.view, activity.options);\n\t\t\tactivity.options.animation.duration = 500;\n\t\t}\n\t}\n\n\tthis.init = function() {\n\t\tactivity.graph = new google.visualization.AreaChart(document.getElementById(\"activityGraph\"));\n\t\tactivity.options = {\n\t\t\tisStacked: false,\n\t\t\tbackgroundColor: \"transparent\",\n\t\t\thAxis: {textStyle: {color: \"#999\", fontName: \"Verdana\", fontSize: 10}, showTextEvery: 3},\n\t\t\tvAxis: {textStyle: {color: \"#666\", fontName: \"Verdana\", fontSize: 10}, viewWindowMode: \"maximized\", viewWindow: {min: 0}, maxValue: 5},\n\t\t\tgridlineColor: \"#454545\",\n\t\t\tpointSize: 2,\n\t\t\tlineWidth: 1,\n\t\t\theight: 150,\n\t\t\tchartArea: {left: \"10%\", top: \"5%\", width: \"88%\", height: \"85%\"},\n\t\t\tlegend: {position: \"in\", textStyle: {color: \"#CCC\", fontName: \"Verdana\", fontSize: 8.5}},\n\t\t\tanimation: {duration: 500, easing: \"inAndout\"},\n\t\t\ttooltip: {showColorCode: true},\n\t\t\tannotations: {style: \"line\", textStyle: {fontSize: 12, color: \"#ccc\"}, domain: 0},\n\t\t\tfocusTarget: \"category\"\n\t\t}\n\n\t\tgoogle.visualization.events.addListener(activity.graph, \"select\", activity.selectHandler);\n\n\t\tactivity.getData(activity.span);\n\t}\n\n\tthis.time = function(span) {\n\t\tswitch(span) {\n\t\t\tcase 24:\n\t\t\t\tthis.options.hAxis.showTextEvery = 3;\n\t\t\t\tbreak;\n\t\t\tcase 48:\n\t\t\t\tthis.options.hAxis.showTextEvery = 6;\n\t\t\t\tbreak;\n\t\t\tcase 168:\n\t\t\t\tthis.options.hAxis.showTextEvery = 24;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.span = span;\n\t\tthis.getData(span);\n\t}\n\n\tthis.redraw = function() {\n\t\tthis.graph.draw(this.view, this.options);\n\t}\n\n\tthis.refresh = function(cache) {\n\t\tthis.getData(this.span, cache);\n\t}\n\n\tgoogle.charts.setOnLoadCallback(this.init);\n}\n","var CKConfig = {\n\tskin: \"custom\",\n\theight: 100,\n\tallowedContent: true,\n\textraPlugins: \"toolbarswitch,autogrow,autolink\",\n\tenterMode: CKEDITOR.ENTER_BR,\n\tremoveDialogTabs: 'link:advanced',\n\tautoGrow_onStartup: true,\n\tautoGrow_minHeight: 100,\n\ttoolbar_minToolbar: [\n\t\t{name: \"basicstyles\", items: [\"Bold\", \"Italic\", \"Underline\", \"Strike\"]},\n\t\t{name: \"paragraph\", items: [\"BulletedList\", \"Outdent\", \"Indent\"]},\n\t\t{name: \"links\", items: [\"Link\"]},\n\t\t{name: \"colors\", items: [\"TextColor\", \"BGColor\"]},\n\t\t{name: \"styles\", items: [\"FontSize\"]},\n\t\t{name: \"tools\", items: [\"Toolbarswitch\"]}\n\t],\n\ttoolbar_maxToolbar: [\n\t\t{name: \"basicstyles\", items: [\"Bold\", \"Italic\", \"Underline\", \"Strike\", \"Subscript\", \"Superscript\"]},\n\t\t{name: \"paragraph\", items: [\"NumberedList\", \"BulletedList\", \"Outdent\", \"Indent\"]},\n\t\t{name: \"links\", items: [\"Link\"]},\n\t\t{name: \"colors\", items: [\"TextColor\", \"BGColor\"]},\n\t\t{name: \"styles\", items: [\"FontSize\", \"Font\"]},\n\t\t{name: \"tools\", items: [\"Source\", \"Toolbarswitch\"]}\n\t],\n\ttoolbar: \"minToolbar\",\n\tsmallToolbar: \"minToolbar\",\n\tmaximizedToolbar: \"maxToolbar\",\n\tfontSize_style: {\n\t    element:        'span',\n\t    styles:         { 'font-size': '#(size)' },\n\t    overrides:      [ { element :'font', attributes: { 'size': null } } ]\n\t}\n}\n\nCKEDITOR.on(\"instanceLoaded\", function(cke) {\n\tcke.editor.on(\"contentDom\", function() {\n\t\tcke.editor.on(\"key\", function(e) {\n\t\t\tif (e.data.keyCode == 27) {\n\t\t\t\t// escape key cancels\n\t\t\t\t$(cke.editor.element.$).closest(\".comment\").find(\".commentCancel\").click();\n\t\t\t\treturn false;\n\t\t\t} else if (e.data.domEvent.$.altKey && e.data.domEvent.$.keyCode == 83) {\n\t\t\t\t// alt+s saves\n\t\t\t\t$(cke.editor.element.$).closest(\".comment\").find(\".commentSave\").click();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t});\n\n\t$(\".cke_combo__font a\")\n\t\t.removeClass(\"cke_combo_button\")\n\t\t.addClass(\"cke_button cke_button_off\")\n\t\t.html('<span class=\"cke_button_icon\">&nbsp;</span>')\n\n\t$(\".cke_combo__fontsize a\")\n\t\t.removeClass(\"cke_combo_button\")\n\t\t.addClass(\"cke_button cke_button_off\")\n\t\t.html('<span class=\"cke_button_icon\">&nbsp;</span>')\n});\n\nCKEDITOR.on(\"instanceReady\", function(cke) {\n\t// ensure focus on init\n\tcke.editor.focus();\n\n\tvar s = cke.editor.getSelection(); // getting selection\n\tvar selected_ranges = s.getRanges(); // getting ranges\n\tvar node = selected_ranges[0].startContainer; // selecting the starting node\n\tvar parents = node.getParents(true);\n\n\tnode = parents[parents.length - 2].getFirst();\n\n\tif (!node) return false;\n\n\twhile (true) {\n\t\tvar x = node.getNext();\n\t\tif (x == null) {\n\t\t\tbreak;\n\t\t}\n\t\tnode = x;\n\t}\n\n\ts.selectElement(node);\n\tselected_ranges = s.getRanges();\n\tselected_ranges[0].collapse(false);  //  false collapses the range to the end of the selected node, true before the node.\n\ts.selectRanges(selected_ranges);  // putting the current selection there\n});\n\nCKEDITOR.on(\"dialogDefinition\", function(ev) {\n\tif (ev.data.name == 'link') {\n\t\tev.data.definition.getContents('target').get('linkTargetType')['default'] = '_blank';\n\t}\n});\n","// Firefox (and some other browsers) don't support 'zoom' CSS\n// This snippet hooks up a variant using transform(scale) to JQuery\n// See e.g. https://medium.com/@sai_prasanna/simulating-css-zoom-with-css3-transform-scale-461d1b9762d6\nif (document.createElement(\"detect\").style.zoom != \"\"){\n\t$.cssNumber.zoom = true;\n    $.cssHooks.zoom = {\n        get: function(elem, computed, extra) {\n            var value = $(elem).data('zoom');\n            return value != null ? value : 1;\n        },\n        set: function(elem, scale) {\n            var $e = $(elem);\n            var e = $e[0];\n            var data = $e.data('zoom');\n            if (data == null) {\n                $e.data('origWidth', e.clientWidth);\n                $e.data('origHeight', e.clientHeight);\n            }\n            $e.data('zoom', scale);\n            const width = $e.data('origWidth');\n            const height = $e.data('origHeight');\n            e.style.transform = 'scale(' + scale + ')';\n            e.style.transformOrigin = '0 0';\n            const bot = (height/scale - height);\n            const right = (width/scale - width);\n            e.style.marginBottom = (-bot) + 'px';\n            e.style.marginRight = (-right) + 'px';\n        }\n    };\n}","const fw = new _FactionWarfare();\n\nfunction _FactionWarfare() {\n\tconst _this = this;\n\tthis.listeners = [];\n\tthis.data = null;\n\tthis.systems = {};\n\tthis.SamanuniAthounonGateOpen = true;\n\t\n\t/** Refresh the FW data from the public ESI endpoint */\n\tthis.refresh = function() {\n\t\t$.ajax({\n\t\t\turl: 'cached_third_party.php?key=fw',\n\t\t\ttype: \"GET\",\n\t\t\tdataType: \"JSON\"\n\t\t}).done(function(data, status, xhr) {\t\n\t\t\tif(!_.isEqual(data, _this.data)) {\n\t\t\t\tconsole.info('Updating faction warfare status');\n\t\t\t\t_this.data = data;\n\t\t\t\t_this.parse(data);\n\t\t\t\ttripwire.systemChange(viewingSystemID);\n\t\t\t\tguidance.clearCache();\n\t\t\t}\n\t\t}).fail(function(xhr, status, error) {\n\t\t\tconsole.warn('Failed to fetch FW data from ESI: ' + status, error);\n\t\t});\n\t};\t\n\t\n\tthis.parse = function(data) {\n\t\tthis.systems = {};\n\t\tfor(var i = 0; i < data.length; i++) { this.systems[data[i].solar_system_id] = data[i]; }\n\t\tthis.SamanuniAthounonGateOpen = this.systems[30003856].occupier_faction_id == 500001;\n\t}\n\t\n\t// Guidance plugin\n\tthis.adjustJumpCost = function(from, to, cost) {\n\t\tconst gateOpen = this.SamanuniAthounonGateOpen || !((from == 3856 && to == 45322) || (to == 3856 && from == 45322));\n\t\treturn gateOpen ? cost : -1;\n\t}.bind(this);\t// because it's called from outside\n\tguidance.jumpCostModifiers.push(this.adjustJumpCost);\n\t\n\t/** Gets the markup for faction text for a system. If it's in FW, it will show contested status; if not it will just show the faction */\n\tthis.factionMarkup = function(system) {\n\t\treturn system.factionID ? (\n\t\t\t_this.systems[system.systemID] ? \n\t\t\t\tappData.factions[_this.systems[system.systemID].occupier_faction_id].name + ' (FW: ' + \n\t\t\t\t\t(_this.systems[system.systemID].contested == 'uncontested' ? 'uncontested' : \n\t\t\t\t\t\tMath.floor(100 * _this.systems[system.systemID].victory_points / _this.systems[system.systemID].victory_points_threshold) + '% contested') + ')'\n\t\t\t\t: appData.factions[system.factionID].name\n\t\t) : \"&nbsp;\";\n\t};\n\t\n\tsetInterval(this.refresh, 3600000);\n\tthis.refresh();\t\n}","/** Functions for rendering things relating to masks */\nconst maskRendering = new function() { \n\t/** Render a mask, as returned from masks.php */\n\tthis.renderMask = function(mask) {\n\t\tconst icons = { global: 'eye', character: 'user', corporate: 'star', alliance: 'star' };\n\n\t\treturn '<span class=\"mask\" data-mask=\"' + mask.mask + '\">'\n\t\t\t+ '<i data-icon=\"' + icons[mask.ownerType] + '\" class=\"' + mask.ownerType + '\"></i>'\n\t\t\t+ mask.label\n\t\t\t+ '</span>';\n\t}\n\t\n\tthis.update = function(masks, newActive) {\n\t\tconst activeMask = masks.find(x => newActive !== undefined ? x.mask === newActive : x.active);\n\t\tdocument.getElementById('mask').innerHTML = maskRendering.renderMask(activeMask);\n\t\tconst list = document.getElementById('mask-menu-mask-list');\n\t\tlist.innerHTML = '';\n\t\tmasks.filter(m => m.owner || (m.joined || m.joinedBy == 'alliance') || m == activeMask).map(m => {\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = '#';\n\t\t\ta.innerHTML = this.renderMask(m);\n\t\t\tif(m === activeMask) { a.className = 'active'; }\n\t\t\ta.addEventListener('click', e => {\n\t\t\t\tmaskFunctions.updateActiveMask(m.mask, () => document.getElementById('mask-menu').style.display = 'none');\n\t\t\t});\n\t\t\tlist.appendChild(a);\n\t\t});\n\t}\n};","// Model and data binding for mass related UI\ntripwire.massOptions = {\n\thiggs: false,\n\tprop: false\n}\n\t\ntripwire.resetMassOptions = function() {\n\t$(\"#hot-jump\").removeClass(\"active\");\n\ttripwire.massOptions.prop = false;\t\t\n\t$(\"#higgs-jump\").removeClass(\"active\");\n\ttripwire.massOptions.higgs = false;\n};\n\n$(\"#hot-jump\").click(function() {\n\tif ($(this).hasClass(\"active\")) {\t\t\n\t\t$(this).removeClass(\"active\");\n\t\ttripwire.massOptions.prop = false;\n\t} else {\n\t\t$(this).addClass(\"active\");\n\t\ttripwire.massOptions.prop = true;\n\t}\n});\n\n$(\"#higgs-jump\").click(function() {\n\tif ($(this).hasClass(\"active\")) {\n\t\t$(this).removeClass(\"active\");\n\t\ttripwire.massOptions.higgs = false;\n\t} else {\n\t\t$(this).addClass(\"active\");\n\t\ttripwire.massOptions.higgs = true;\n\t}\n});\n","const tracking = {\n\tremove: function(characterID) {\n\t\t$(\"#tracking .tracking-clone[data-characterid='\"+ characterID +\"']\").remove();\t\t\n\t},\n\tadd: function(character) {\n\t\tvar $clone = $(\"#tracking-clone\").clone();\n\t\t$clone.attr(\"data-characterid\", characterID);\n\t\t$clone.find(\".avatar img\").attr(\"src\", \"https://image.eveonline.com/Character/\"+ character.characterID +\"_32.jpg\");\n\t\t$clone.find(\".name\").html(character.characterName);\n\t\t$clone.removeAttr(\"id\");\n\t\t$clone.removeClass(\"hidden\");\n\t\t$clone.addClass(\"tracking-clone\");\n\n\t\t$(\"#tracking\").append($clone);\n\t\tTooltips.attach($clone.find(\".avatar [data-tooltip]\"));\n\t\t\n\t\tconst charOptions = options.tracking.characterOptions[character.characterID] || tracking.defaultCharacterOptions;\n\t\tif(charOptions.show) { $clone.find('.show').addClass('active'); }\n\t\tif(charOptions.showShip) { $clone.find('.show-ship').addClass('active'); }\n\t\t\n\t\treturn $clone;\n\t},\n\tdefaultCharacterOptions: { show: true, showShip: true }\n\t\n};\n\n$(\"#track\").on(\"click\", \".tracking-clone\", function() {\n\tvar characterID =$(this).attr(\"data-characterid\");\n\t$(\"#tracking .tracking-clone\").removeClass(\"active\");\n\n\tif (options.tracking.active == characterID) {\n\t\toptions.tracking.active = null;\n\t\ttripwire.EVE(false, true);\n\t\t$(\"#removeESI\").attr(\"disabled\", \"disabled\");\n\t} else {\n\t\toptions.tracking.active = characterID;\n\n\t\tif (tripwire.esi.characters[options.tracking.active]) {\n\t\t\t$(\"#tracking .tracking-clone[data-characterid='\"+ options.tracking.active +\"']\").addClass(\"active\");\n\t\t\ttripwire.EVE(tripwire.esi.characters[options.tracking.active], true);\n\t\t}\n\n\t\t$(\"#removeESI\").removeAttr(\"disabled\");\n\t}\n\tset_tracking_text();\n\toptions.save();\n});\n\n$(\"#track\").on(\"click\", \".tracking-clone i.interactable\", function(e) {\n\tconst elem = e.target;\n\tconst container = $(elem).closest('.tracking-clone')[0];\n\tconst characterID = container.dataset.characterid;\n\tconst wasActive = $(elem).hasClass('active');\n\tif(wasActive) {\n\t\t$(elem).removeClass('active');\n\t} else {\n\t\t$(elem).addClass('active');\n\t}\n\te.stopPropagation();\n\t\n\tif(!options.tracking.characterOptions[characterID]) { options.tracking.characterOptions[characterID] = tracking.defaultCharacterOptions; }\n\t\n\toptions.tracking.characterOptions[characterID][elem.dataset.property] = !wasActive;\n\ttripwire.esi.updateTracking(tripwire.esi.characters[characterID]);\n});\n\n$(\"#login\").on(\"click\", \"#removeESI\", function() {\n\tvar characterID = options.tracking.active;\n\n\toptions.tracking.active = null;\n\ttripwire.EVE(false, true);\n\toptions.save();\n\n\t$(\"#tracking .tracking-clone[data-characterid='\"+ characterID +\"']\").remove();\n\n\t$(\"#removeESI\").attr(\"disabled\", \"disabled\");\n\n\tif ($.isArray(tripwire.data.esi.delete)) {\n\t\ttripwire.data.esiDelete.push(characterID);\n\t} else {\n\t\ttripwire.data.esiDelete = [characterID];\n\t}\n});\n\n\n/** Set UI text based on the current tracked character */\nfunction set_tracking_text() {\n\tif(tripwire.esi.characters[options.tracking.active]) {\n\t\tdocument.getElementById('user-track-name').textContent = tripwire.esi.characters[options.tracking.active].characterName;\n\t\tdocument.getElementById('user-track').style.display = '';\n\t\tdocument.getElementById('user-no-track').style.display = 'none';\n\t} else {\n\t\tdocument.getElementById('user-track').style.display = 'none';\n\t\tdocument.getElementById('user-no-track').style.display = '';\t\n\t}\n}\n","const wormholeAnalysis = new function() {\n\t/** Finds the ID for a target system or system type for the given system name text and wormhole type.\n\t@param systemText The name of a system, or a system class from appData.genericSystemTypes, e.g. 'Low-Sec'\n\t@param wormholeType The type text of a wormhole e.g. 'U210'\n\t@return An ID - either a systemID (31001031), a system type ID (7) or null if there isn't enough information */\n\tthis.targetSystemID = function(systemText, wormholeType) {\n\t\tconst lookupText = systemText || (appData.wormholes[(wormholeType + '').toUpperCase()] || {}).leadsTo;\n\t\tif(!lookupText) { return null; }\n\t\tif (Object.index(appData.systems, \"name\", lookupText, true)) {\n\t\t\t// Leads To is a normal EVE system, so use the sytem ID\n\t\t\treturn Object.index(appData.systems, \"name\", lookupText, true)\n\t\t} else if (wormholeType && appData.wormholes[wormholeType.toUpperCase()]) {\n\t\t\t// Leads To can be determined by the wormhole type, so lets use what we know it leads to\n\t\t\tif (appData.genericSystemTypes.findIndex((item) => lookupText.replace(' ', '-').toLowerCase() === item.toLowerCase()) > -1) {\n\t\t\t\treturn appData.genericSystemTypes.findIndex((item) => lookupText.replace(' ', '-').toLowerCase() === item.toLowerCase());\n\t\t\t}\n\t\t} else if (appData.genericSystemTypes.findIndex((item) => lookupText.toLowerCase() === item.toLowerCase()) !== -1) {\n\t\t\t// Leads To is one of the valid types we allow, so use of of those indexes as reference\n\t\t\treturn appData.genericSystemTypes.findIndex((item) => systemText.toLowerCase() === item.toLowerCase());\n\t\t} else { return null; }\n\t};\n\t\n\t/** Get all the eligible wormhole types for this connection.\n\tIf both systems are known (e.g. C3 to C2) then only wormhole types matching that specific connection will be returned. If either side is unknown then all connections to/from the known side are listed, which will be quite large. If both are unknown then return null (as it could be any wormhole).\n\t@param sourceID The system ID, type ID (into genericSystemType) or chain format string (e.g. 2|1232) for the source system\n\t@param targetID As above for the target system\n\t@param dataSource A source set of wormhole types to evaluate (defaults to appData.wormholes)\n\t@return An object of the form { from: [...], to: [...] } where each list is the wormhole types (from appData.wormholes) eligible for that direction */\n\tthis.eligibleWormholeTypes = function(sourceDef, targetDef, dataSource) {\n\t\tconst coerce = function(def) { return def === undefined || def === null || def.genericSystemType ? def : systemAnalysis.analyse(def); };\n\t\tconst source = coerce(sourceDef), target = coerce(targetDef);\n\t\t\n\t\tif(!source && !target) { return null; }\n\t\t\n\t\tconst from = [], to = [];\n\t\tconst systemTypeMatch = function(possibleSystems, genericTypes) {\n\t\t\treturn genericTypes.some(genericType => possibleSystems.indexOf(genericType) >= 0 ||\n\t\t\t\t(genericType.indexOf('/') >= 0 && _.some(genericType.substring('Class-'.length).split('/'), x => possibleSystems.indexOf('Class-' + x) >= 0))\n\t\t\t);\n\t\t};\n\t\tconst matches = function(possibleSystems, exclusions, system) {\n\t\t\tif(typeof possibleSystems === 'string') { possibleSystems = [possibleSystems]; }\n\t\t\treturn (!system) || (\n\t\t\t\t((!possibleSystems) || (possibleSystems.indexOf(system.name) >= 0 || systemTypeMatch(possibleSystems, system.genericSystemType))) && \n\t\t\t\t((!exclusions) || exclusions.indexOf(system.genericSystemType) < 0)\t// no exclusion\n\t\t\t);\n\t\t}\n\t\tObject.entries(dataSource || appData.wormholes).forEach(function(e) {\n\t\t\tconst wt = e[1], key = e[0];\n\t\t\tif(matches(wt.from, wt.notFrom, source) && matches(wt.leadsTo, wt.notLeadsTo, target)) { from.push(objAndKey(wt, key)); }\n\t\t\tif(matches(wt.from, wt.notFrom, target) && matches(wt.leadsTo, wt.notLeadsTo, source)) { to.push(objAndKey(wt, key)); }\n\t\t});\n\t\treturn { from: from, to: to };\n\t}\n\t\n\tfunction objAndKey(o, k) { return o && Object.assign({key: k}, o); }\n\t\n\t/** Placeholder wormholes which don't have an exact known type, but still provide some information */\n\tthis.dummyWormholes = {\n\t\t\"GATE\": { from: [ \"Null-Sec\", \"Low-Sec\", \"High-Sec\", \"Triglavian\"], leadsTo: [ \"Null-Sec\", \"Low-Sec\", \"High-Sec\", \"Triglavian\"] },\n\t\t\"SML\": { \"key\": \"SML\", \"jump\": 5000000, \"dummy\": true },\n\t\t\"MED\": { \"key\": \"MED\", \"jump\": 62000000, \"mass\": 500000000, \"dummy\": true },\n\t\t\"LRG\": { \"key\": \"LRG\", \"jump\": 375000000, \"mass\": 2000000000, \"dummy\": true },\n\t\t\"XLG\": { \"key\": \"XLG\", \"jump\": 2000000000, \"mass\": 3300000000, \"dummy\": true },\n\t};\n\t\n\t/** Get the wormhole type object from the type names for a sig pair. One of the types is probably K162 */\n\tthis.wormholeFromTypePair = function(type1, type2) {\n\t\treturn appData.wormholes[type1] || appData.wormholes[type2] ||\n\t\t\tthis.dummyWormholes[type1] || this.dummyWormholes[type2] ||\n\t\t\tundefined;\t// we don't know anything\n\t}\n\t\n\tthis.likelyWormhole = function(system1, system2) {\n\t\tconst class1 = systemAnalysis.analyse(system1).genericSystemType,\n\t\t\tclass2 = systemAnalysis.analyse(system2).genericSystemType;\n\t\t\n\t\tfunction isHighClass(classes) { return classes && classes.some(c => ['Class-5', 'Class-6' ].indexOf(c) >= 0); }\n\t\tfunction isKSpace(classes) { return classes && classes.toString().indexOf('-Sec') >= 0; }\n\t\tfunction inferKSpace(genericTypes) {\n\t\t\treturn isHighClass(genericTypes) ? 'XLG' :\n\t\t\tgenericTypes == 'Class-1' ? 'MED' :\n\t\t\t'LRG';\n\t\t}\n\t\t\n\t\treturn this.dummyWormholes[\n\t\t\tisKSpace(class1) ? inferKSpace(class2) : isKSpace(class2) ? inferKSpace(class1) :\n\t\t\tString(class1 + '/' + class2).indexOf('-13') >= 0 ? 'SML' :\n\t\t\tclass1 == 'Class-1' || class2 == 'Class-1' ? 'MED' :\n\t\t\tisHighClass(class1) && isHighClass(class2) ? 'XLG' :\n\t\t\t'LRG'\n\t\t];\n\t}\n}","$(\"#admin\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"disabled\")) {\n\t\treturn false;\n\t}\n\n\tif (!$(\"#dialog-admin\").hasClass(\"ui-dialog-content\")) {\n\t\tvar refreshTimer = null;\n\t\tvar $total = null;\n\t\tvar $ajax = null;\n\n\t\tfunction refreshWindow() {\n\t\t\tif ($ajax) $ajax.abort();\n\t\t\t$total.html(\"Total: \" + $(\"#dialog-admin .window .hasFocus table tr[data-id]\").length);\n\n\t\t\t$ajax = $.ajax({\n\t\t\t\turl: \"admin.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: {mode: $(\"#dialog-admin .menu .active\").attr(\"data-window\")},\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(data) {\n\t\t\t\tif (data && data.results) {\n\t\t\t\t\tvar rows = data.results;\n\t\t\t\t\tvar ids = [];\n\n\t\t\t\t\tfor (var i = 0, l = rows.length; i < l; i++) {\n\t\t\t\t\t\tvar $row = $(\"#dialog-admin .window .hasFocus tbody tr[data-id='\"+ rows[i].id +\"']\");\n\t\t\t\t\t\tids.push(rows[i].id);\n\n\t\t\t\t\t\tif ($row.length) {\n\t\t\t\t\t\t\tfor (col in rows[i]) {\n\t\t\t\t\t\t\t\tvar $col = $row.find(\"[data-col='\"+col+\"']\");\n\t\t\t\t\t\t\t\t$col.html(($col.attr(\"data-format\") == \"number\" ? Intl.NumberFormat().format(rows[i][col]) : rows[i][col]) || \"&nbsp;\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$row = $(\"#dialog-admin .window .hasFocus table tr.hidden\").clone();\n\t\t\t\t\t\t\t$row.attr(\"data-id\", rows[i].id);\n\n\t\t\t\t\t\t\tfor (col in rows[i]) {\n\t\t\t\t\t\t\t\tvar $col = $row.find(\"[data-col='\"+col+\"']\");\n\t\t\t\t\t\t\t\t$col.html(($col.attr(\"data-format\") == \"number\" ? Intl.NumberFormat().format(rows[i][col]) : rows[i][col]) || \"&nbsp;\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$row.removeClass(\"hidden\");\n\n\t\t\t\t\t\t\t$(\"#dialog-admin .window .hasFocus tbody\").append($row);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$(\"#dialog-admin .window .hasFocus table tr[data-id]\").each(function() {\n\t\t\t\t\t\tif ($.inArray($(this).data(\"id\").toString(), ids) == -1) {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-admin .window .hasFocus table\").trigger(\"update\", [true]);\n\t\t\t\t} else {\n\t\t\t\t\t$(\"#dialog-admin .window .hasFocus table tr[data-id]\").remove();\n\t\t\t\t}\n\n\t\t\t\t$total.html(\"Total: \" + $(\"#dialog-admin .window .hasFocus table tr[data-id]\").length);\n\t\t\t});\n\n\t\t\tif ($(\"#dialog-admin\").dialog(\"isOpen\") && $(\"#dialog-admin .menu .active\").attr(\"data-refresh\")) {\n\t\t\t\trefreshTimer = setTimeout(refreshWindow, $(\"#dialog-admin .menu .active\").attr(\"data-refresh\"));\n\t\t\t}\n\t\t}\n\n\t\t$(\"#dialog-admin\").dialog({\n\t\t\tautoOpen: true,\n\t\t\tmodal: true,\n\t\t\theight: 350,\n\t\t\twidth: 800,\n\t\t\tbuttons: {\n\t\t\t\tClose: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreate: function() {\n\t\t\t\t// menu toggle\n\t\t\t\t$(\"#dialog-admin\").on(\"click\", \".menu li\", function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t$menuItem = $(this);\n\t\t\t\t\tclearTimeout(refreshTimer);\n\n\t\t\t\t\t$(\"#dialog-admin .menu .active\").removeClass(\"active\");\n\t\t\t\t\t$menuItem.addClass(\"active\");\n\t\t\t\t\t$(\"div.ui-dialog[aria-describedby='dialog-admin'] .ui-dialog-traypane\").html(\"\");\n\n\t\t\t\t\t$(\"#dialog-admin .window [data-window]\").removeClass(\"hasFocus\").hide();\n\t\t\t\t\t$(\"#dialog-admin .window [data-window='\"+ $menuItem.data(\"window\") +\"']\").addClass(\"hasFocus\").show();\n\n\t\t\t\t\trefreshWindow();\n\t\t\t\t});\n\n\t\t\t\t$(\"#dialog-admin [data-sortable='true']\").tablesorter({\n\t\t\t\t\tsortReset: true,\n\t\t\t\t\twidgets: ['saveSort'],\n\t\t\t\t\tsortList: [[0,0]]\n\t\t\t\t});\n\n\t\t\t\t// dialog bottom tray\n\t\t\t\t$($(this)[0].parentElement).find(\".ui-dialog-buttonpane\").append(\"<div class='ui-dialog-traypane'></div>\");\n\t\t\t\t$total = $(\"div.ui-dialog[aria-describedby='dialog-admin'] .ui-dialog-traypane\");\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\t$menuItem = $(\"#dialog-admin .menu li.active\");\n\t\t\t\trefreshWindow();\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\tclearTimeout(refreshTimer);\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-admin\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-admin\").dialog(\"open\");\n\t}\n});\n","// Dialog effects\n$(\"#wrapper\").addClass(\"transition\");\n\n$(document).on(\"dialogopen\", \".ui-dialog\", function (event, ui) {\n\t// Add additional full screen overlay for 2nd level dialog\n\tif ($(\".ui-dialog:visible\").length == 2 && $(this).hasClass(\"dialog-modal\"))\n\t\t$(\"body\").append($(\"<div id='overlay' class='overlay' />\").css(\"z-index\", $(this).css(\"z-index\") - 1));\n\telse if ($(\"#overlay\"))\n\t\t$(\"#overlay\").css(\"z-index\", $(this).css(\"z-index\") - 1);\n\n\tif (!$(this).hasClass(\"dialog-noeffect\"))\n\t\t$(\"#wrapper\").addClass(\"blur\");\n});\n\n$(document).on(\"dialogclose\", \".ui-dialog\", function (event, ui) {\n\tif (!$(\".ui-dialog\").is(\":visible\"))\n\t\t$(\"#wrapper\").removeClass(\"blur\");\n\n\tif ($(\".ui-dialog:visible\").length == 1)\n\t\t$(\"#overlay\").remove();\n\telse if ($(\"#overlay\"))\n\t\t$(\"#overlay\").css(\"z-index\", $(this).css(\"z-index\") - 2);\n\n\t//if ($(\".ui-dialog:visible\").length == 0 && options.buttons.follow && viewingSystemID != tripwire.client.EVE.systemID)\n\t//\twindow.location = \"?system=\"+tripwire.client.EVE.systemName;\n});\n\n","const maskFunctions = {\n\t\tgetMasks: function() {\n\t\t\t// Get masks\n\t\t\t$.ajax({\n\t\t\t\turl: \"masks.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(response) {\n\t\t\t\tif (response && response.masks) {\n\t\t\t\t\ttripwire.masks = response.masks;\n\t\t\t\t\tmaskRendering.update(tripwire.masks);\n\t\t\t\t\t$(\"#dialog-masks #masks #default\").html(\"\");\n\t\t\t\t\t$(\"#dialog-masks #masks #owned\").html(\"\");\n\t\t\t\t\t$(\"#dialog-masks #masks #invited\").html(\"\");\n\t\t\t\t\t\n\t\t\t\t\tconst iconBar = mask => \n\t\t\t\t\t\t'<span class=\"icon_bar\">' +\n\t\t\t\t\t\t(mask.optional ? '<a href=\"#\" class=\"icon ' + (mask.joined ? 'closeIcon' : 'joinIcon') + '\" data-tooltip=\"' + (mask.joined ? 'Remove from quick switch' : 'Add to quick switch') + '\">' +\n\t\t\t\t\t\t\t(mask.joined ? '×' : '+') + '</a>' : '')\n\t\t\t\t\t\t+ '</span>';\n\n\n\t\t\t\t\tfor (var x in response.masks) {\n\t\t\t\t\t\tvar mask = response.masks[x];\n\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t+ '<input type=\"radio\" name=\"mask\" id=\"mask'+x+'\" value=\"'+mask.mask+'\" class=\"selector\" data-owner=\"'+mask.owner+'\" data-admin=\"'+mask.admin+'\" />'\n\t\t\t\t\t\t\t+ '<label for=\"mask'+x+'\"><img src=\"'+mask.img+'\" />'\n\t\t\t\t\t\t\t+ iconBar(mask)\n\t\t\t\t\t\t\t+ '<span class=\"source_bar ' + mask.joinedBy+'\">&nbsp;</span>'\n\t\t\t\t\t\t\t+ '<span class=\"selector_label\">'+maskRendering.renderMask(mask)\n\t\t\t\t\t\t\t\t+ ((mask.joined || mask.owner) ? ' <i data-icon=\"star\" data-tooltip=\"On quick switch\"></i>' : '')\n\t\t\t\t\t\t\t+ '</span></label>');\n\n\t\t\t\t\t\t$(\"#dialog-masks #masks #\"+mask.type).append(node);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t+ '<input type=\"checkbox\" name=\"create\" id=\"create-mask\" class=\"selector\" />'\n\t\t\t\t\t\t+ '<label for=\"create-mask\"><i data-icon=\"plus\" style=\"font-size: 3em; margin-left: 16px; margin-top: 16px; display: block;\"></i>'\n\t\t\t\t\t\t+ '<span class=\"source_bar personal\">&nbsp;</span>'\n\t\t\t\t\t\t+ '<span class=\"selector_label\">Create</span></label>');\n\t\t\t\t\t\n\t\t\t\t\tnode.click(function(e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t$(\"#dialog-createMask\").dialog(\"open\");\n\t\t\t\t\t});\n\t\t\t\t\t$(\"#dialog-masks #masks #owned\").append(node);\n\t\t\t\t\t\n\t\t\t\t\tconst activeMask = response.masks.find(x => x.active);\n\t\t\t\t\t$(\"#dialog-masks input[name='mask']\").filter(\"[value='\"+activeMask.mask+\"']\").attr(\"checked\", true).trigger(\"change\");\n\n\t\t\t\t\t// toggle mask admin icon\n\t\t\t\t\tdocument.getElementById('admin').style.display = activeMask.admin ? '' : 'none';\n\t\t\t\t\t\n\t\t\t\t\t// fix tooltips for new elements\n\t\t\t\t\tTooltips.attach($(\"#dialog-masks\").find(\"[data-tooltip]\"));\n\t\t\t\t}\n\t\t\t});\n\t\t}, \n\t\tupdateActiveMask: function(newActive, afterFunction) {\n\t\t\t\tvar maskChange = false;\n\t\t\t\tif (options.masks.active != newActive) {\n\t\t\t\t\tmaskChange = true;\n\t\t\t\t\toptions.masks.active = newActive;\n\t\t\t\t\tmaskRendering.update(tripwire.masks, newActive);\n\t\t\t\t}\n\n\t\t\t\toptions.save() // Performs AJAX\n\t\t\t\t\t.done(function() {\n\t\t\t\t\t\tif (maskChange) {\n\t\t\t\t\t\t\t// Reset signatures\n\t\t\t\t\t\t\t$(\"#sigTable span[data-age]\").countdown(\"destroy\");\n\t\t\t\t\t\t\t$(\"#sigTable tbody\").empty()\n\t\t\t\t\t\t\t$(\"#signature-count\").html(0);\n\t\t\t\t\t\t\ttripwire.signatures.list = {};\n\t\t\t\t\t\t\ttripwire.client.signatures = [];\n\n\t\t\t\t\t\t\ttripwire.refresh('change');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(afterFunction) { afterFunction(); }\n\t\t\t\t\t});\t\t\n\t\t},\n};\n\n$(\"#dialog-masks\").dialog({\n\tautoOpen: false,\n\twidth: 450,\n\tminHeight: 400,\n\tmodal: true,\n\tbuttons: {\n\t\tSave: function() {\n\t\t\tmaskFunctions.updateActiveMask($(\"#dialog-masks input[name='mask']:checked\").val(), () => {\n\t\t\t\t// toggle mask admin icon\n\t\t\t\tdocument.getElementById('admin').disabled = !$(\"#dialog-masks input[name='mask']:checked\").data(\"admin\");\t\t\t\n\t\t\t\t$(this).dialog(\"close\");\n\t\t\t});\n\t\t},\n\t\tClose: function() {\n\t\t\t$(this).dialog(\"close\");\n\t\t}\t\t\n\t}, \n\n\t\topen: function() { maskFunctions.getMasks(); }\n\t\n});\n\n$(\"#mask-menu-link\").click(function(e) {\n\te.preventDefault();\n\tconst elem = document.getElementById('mask-menu');\n\telem.style.display = elem.style.display == 'none' ? '' : 'none';\n});\n\n$(\"#mask-link\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"disabled\"))\n\t\treturn false;\n\t\n\t$(\"#dialog-masks\").dialog('open');\n });\n \n// Mask selections\n$(\"#masks\").on(\"change\", \"input.selector:checked\", function() {\n\tif ($(this).data(\"owner\")) {\n\t\t$(\"#maskControls #edit\").removeAttr(\"disabled\");\n\t\t$(\"#maskControls #delete\").removeAttr(\"disabled\");\n\t} else {\n\t\t$(\"#maskControls #edit\").attr(\"disabled\", \"disabled\");\n\t\t$(\"#maskControls #delete\").attr(\"disabled\", \"disabled\");\n\t}\n\n\tif ($(this).val() != 0.0 && $(this).val().split(\".\")[1] == 0) {\n\t\t$(\"#dialog-masks #leave\").removeAttr(\"disabled\");\n\t} else {\n\t\t$(\"#dialog-masks #leave\").attr(\"disabled\", \"disabled\");\n\t}\n});\n\nconst joinMask = maskID => {\n\tconst completeFunction = () => {\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\tdata: {mask: maskID, mode: \"join\"},\n\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\tmaskFunctions.getMasks();\n\t\t\t\t\t\t\t\t$(\"#dialog-joinMask\").dialog(\"close\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\t\n\t};\n\t\n\tconst mask = tripwire.masks.find(m => m.mask === maskID);\n\tif(!mask) { throw 'unknown mask ' + maskID; }\n\t\n\tif(mask.joinedBy === 'corporate') {\n\t\t\t\t$(\"#dialog-confirm #msg\").text(\"This will add the mask '\" + mask.label + \" to the quick switch list for your whole corporation. Is that what you want?\");\n\t\t\t\t$(\"#dialog-confirm\").dialog(\"option\", {\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tConfirm: function() {\n\t\t\t\t\t\t\tcompleteFunction();\n\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).dialog(\"open\");\t\t\n\t} else { completeFunction(); }\n};\n\n\t\t\t// Mask join\n\t\t\t$(\"#dialog-masks #masks\").on(\"click\", \".joinIcon\", function() {\n\t\t\t\tvar maskElem = $(this).closest(\"input.selector+label\").prev();\n\t\t\t\tjoinMask(maskElem.val());\n\t\t\t});\n\n\t\t\t// Mask leave\n\t\t\t$(\"#dialog-masks #masks\").on(\"click\", \".closeIcon\", function() {\n\t\t\t\tvar maskElem = $(this).closest(\"input.selector+label\").prev();\n\t\t\t\tconst mask = tripwire.masks.find(m => m.mask === maskElem.val());\n\t\t\t\tif(!mask) { throw 'unexpected mask ' + maskElem.val(); }\n\t\t\t\t\n\t\t\t\tconst completeFunction = () => {\n\t\t\t\t\t\t\tvar send = {mode: \"leave\", mask: maskElem.val()};\n\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\t\tdata: send,\n\t\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\t\tmaskFunctions.getMasks();\n\n\t\t\t\t\t\t\t\t\t$(\"#dialog-confirm\").dialog(\"close\");\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(\"#dialog-confirm\").dialog(\"close\");\n\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Unable to delete\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\t\t\t\n\t\t\t\t};\n\t\t\t\tif(mask.joinedBy === 'corporate') {\n\t\t\t\t\t$(\"#dialog-confirm #msg\").text(\"This will remove the mask '\" + mask.label + \" from the quick switch list for your whole corporation. Is that what you want?\");\n\t\t\t\t\t$(\"#dialog-confirm\").dialog(\"option\", {\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\tConfirm: function() {\n\t\t\t\t\t\t\t\tcompleteFunction();\n\t\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}).dialog(\"open\");\t\t\t\t\t\t\t\n\t\t\t\t} else { completeFunction(); }\n\t\t\t\t\n\t\t\t});\n\n\t\t\t// Mask delete\n\t\t\t$(\"#maskControls #delete\").click(function() {\n\t\t\t\tvar mask = $(\"#masks input.selector:checked\");\n\t\t\t\t$(\"#dialog-confirm #msg\").text(\"Are you sure you want to delete this mask?\");\n\t\t\t\t$(\"#dialog-confirm\").dialog(\"option\", {\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tDelete: function() {\n\t\t\t\t\t\t\tvar send = {mode: \"delete\", mask: mask.val()};\n\n\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\t\tdata: send,\n\t\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\t\tmaskFunctions.getMasks();\n\t\t\t\t\t\t\t\t\t$(\"#dialog-confirm\").dialog(\"close\");\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(\"#dialog-confirm\").dialog(\"close\");\n\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Unable to delete\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).dialog(\"open\");\n\t\t\t});\n\n\t\t\t// User Create mask\n\t\t\t$(\"#dialog-createMask\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tCreate: function() {\n\t\t\t\t\t\t$(\"#dialog-createMask form\").submit();\n\t\t\t\t\t},\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreate: function() {\n\t\t\t\t\t$(\"#dialog-createMask #accessList\").on(\"click\", \"#create_add+label\", function() {\n\t\t\t\t\t\t$(\"#dialog-EVEsearch\").dialog(\"open\");\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-createMask form\").submit(function(e) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\tdata: $(this).serialize(),\n\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\tmaskFunctions.getMasks();\n\n\t\t\t\t\t\t\t\t$(\"#dialog-createMask\").dialog(\"close\");\n\t\t\t\t\t\t\t} else if (response && response.error) {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(response.error);\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Unknown error\");\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-createMask select\").selectmenu({width: 100});\n\t\t\t\t},\n\t\t\t\topen: function() {\n\t\t\t\t\t$(\"#dialog-createMask input[name='name']\").val(\"\");\n\t\t\t\t\t$(\"#dialog-createMask #accessList :not(.static)\").remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"#dialog-createMask #accessList\").on(\"click\", \".maskRemove\", function() {\n\t\t\t\t$(this).closest(\"input.selector+label\").prev().remove();\n\t\t\t\t$(this).closest(\"label\").remove();\n\t\t\t});\n\t\t\t\n\t\t\tfunction makeAccessListNode(item, prefix, name) {\n\t\t\t\tconst extraAttributes = prefix == 'edit' ? 'checked=\"checked\" onclick=\"return false\"' : '';\n\t\t\t\tconst buttons = prefix == 'edit' ? '<input type=\"button\" class=\"maskRemove\" value=\"Remove\" style=\"position: absolute; bottom: 3px; right: 3px;\" />' : '';\n\t\t\t\tif (item.category == \"character\") {\n\t\t\t\t\treturn $(''\n\t\t\t\t\t\t+ '<div class=\"maskNode\"><input type=\"checkbox\" ' + extraAttributes + ' name=\"' + name + '\" id=\"' + prefix + '_'+item.id+'_1373\" value=\"'+item.id+'_1373\" class=\"selector\" />'\n\t\t\t\t\t\t+ '<label for=\"' + prefix + '_'+item.id+'_1373\">'\n\t\t\t\t\t\t+ '\t<img src=\"https://image.eveonline.com/Character/'+item.id+'_64.jpg\" />'\n\t\t\t\t\t\t+ '\t<span class=\"selector_label\">Character</span>'\n\t\t\t\t\t\t+ '\t<div class=\"info\">'\n\t\t\t\t\t\t+ '\t\t'+item.name + '<br/>'\n\t\t\t\t\t\t+ '\t\t'+item.corporation.name+'<br/>'\n\t\t\t\t\t\t+ '\t\t'+(item.alliance ? item.alliance.name : '')+'<br/>'\n\t\t\t\t\t\t+ buttons\n\t\t\t\t\t\t+ '\t</div>'\n\t\t\t\t\t\t+ '</label></div>');\n\n\t\t\t\t} else if (item.category == \"corporation\") {\n\t\t\t\t\treturn $(''\n\t\t\t\t\t\t+ '<div class=\"maskNode\"><input type=\"checkbox\" ' + extraAttributes + ' name=\"' + name + '\" id=\"' + prefix + '_'+item.id+'_2\" value=\"'+item.id+'_2\" class=\"selector\" />'\n\t\t\t\t\t\t+ '<label for=\"' + prefix + '_'+item.id+'_2\">'\n\t\t\t\t\t\t+ '\t<img src=\"https://image.eveonline.com/Corporation/'+item.id+'_64.png\" />'\n\t\t\t\t\t\t+ '\t<span class=\"selector_label\">Corporation</span>'\n\t\t\t\t\t\t+ '\t<div class=\"info\">'\n\t\t\t\t\t\t+ '\t\t'+item.name+'<br/>'\n\t\t\t\t\t\t+ '\t\t'+(item.alliance ? item.alliance.name : '')+'<br/>'\n\t\t\t\t\t\t+ buttons\n\t\t\t\t\t\t+ '\t</div>'\n\t\t\t\t\t\t+ '</label></div>');\n\n\t\t\t\t} else if (item.category == \"alliance\") {\n\t\t\t\t\treturn $(''\n\t\t\t\t\t\t+ '<div class=\"maskNode\"><input type=\"checkbox\" ' + extraAttributes + ' name=\"' + name + '\" id=\"' + prefix + '_'+item.id+'_3\" value=\"'+item.id+'_3\" class=\"selector\" />'\n\t\t\t\t\t\t+ '<label for=\"' + prefix + '_'+item.id+'_3\">'\n\t\t\t\t\t\t+ '\t<img src=\"https://image.eveonline.com/Alliance/'+item.id+'_64.png\" />'\n\t\t\t\t\t\t+ '\t<span class=\"selector_label\">Alliance</span>'\n\t\t\t\t\t\t+ '\t<div class=\"info\">'\n\t\t\t\t\t\t+ '\t\t'+item.name+'<br/>'\n\t\t\t\t\t\t+ buttons\n\t\t\t\t\t\t+ '\t</div>'\n\t\t\t\t\t\t+ '</label></div>');\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t\t$(\"#dialog-editMask\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tSave: function() {\n\t\t\t\t\t\t$(\"#dialog-editMask form\").submit();\n\t\t\t\t\t},\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreate: function() {\n\t\t\t\t\t$(\"#dialog-editMask #accessList\").on(\"click\", \".maskRemove\", function() {\n\t\t\t\t\t\t$(this).closest(\"input.selector+label\").prev().attr(\"name\", \"deletes[]\").hide();\n\t\t\t\t\t\t$(this).closest(\"label\").hide();\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-editMask #accessList\").on(\"click\", \"#edit_add+label\", function() {\n\t\t\t\t\t\t$(\"#dialog-EVEsearch\").dialog(\"open\");\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-editMask form\").submit(function(e) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\tdata: $(this).serialize(),\n\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\t$(\"#dialog-editMask\").dialog(\"close\");\n\t\t\t\t\t\t\t} else if (response && response.error) {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(response.error);\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Unknown error\");\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\topen: function() {\n\t\t\t\t\tvar mask = $(\"#dialog-masks input[name='mask']:checked\").val();\n\t\t\t\t\t$(\"#dialog-editMask input[name='mask']\").val(mask);\n\t\t\t\t\t$(\"#dialog-editMask #accessList label.static\").hide();\n\t\t\t\t\t$(\"#dialog-editMask #loading\").show();\n\t\t\t\t\t$(\"#dialog-editMask #name\").text($(\"#dialog-masks input[name='mask']:checked+label .selector_label\").text());\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\tdata: {mode: \"edit\", mask: mask},\n\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t}).then(function(response) {\n\t\t\t\t\t\tif (response && response.results && response.results.length) {\n\t\t\t\t\t\t\treturn tripwire.esi.fullLookup(response.results)\n\t\t\t\t\t\t\t\t.done(function(results) {\n\t\t\t\t\t\t\t\t\tif (results) {\n\t\t\t\t\t\t\t\t\t\tfor (var x in results) {\n\t\t\t\t\t\t\t\t\t\t\tvar node = makeAccessListNode(results[x], 'edit', '');\n\t\t\t\t\t\t\t\t\t\t\t$(\"#dialog-editMask #accessList .static:first\").before(node);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(function(response) {\n\t\t\t\t\t\t$(\"#dialog-editMask #accessList label.static\").show();\n\t\t\t\t\t\t$(\"#dialog-editMask #loading\").hide();\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tclose: function() {\n\t\t\t\t\t$(\"#dialog-editMask #accessList :not(.static)\").remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// EVE search dialog\n\t\t\t$(\"#dialog-EVEsearch\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tAdd: function() {\n\t\t\t\t\t\tif ($(\"#accessList input[value='\"+$(\"#EVESearchResults input\").val()+\"']\").length) {\n\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Already has access\");\n\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$(\"#EVESearchResults .info\").append('<input type=\"button\" class=\"maskRemove\" value=\"Remove\" style=\"position: absolute; bottom: 3px; right: 3px;\" />');\n\t\t\t\t\t\t$(\"#EVESearchResults input:checked\").attr(\"checked\", \"checked\");\n\t\t\t\t\t\t$(\"#EVESearchResults input:checked\").attr(\"onclick\", \"return false\");\n\n\t\t\t\t\t\tvar nodes = $(\"#EVESearchResults .maskNode:has(input:checked)\");\n\n\t\t\t\t\t\tif ($(\"#dialog-createMask\").dialog(\"isOpen\"))\n\t\t\t\t\t\t\t$(\"#dialog-createMask #accessList .static:first\").before(nodes);\n\t\t\t\t\t\telse if ($(\"#dialog-editMask\").dialog(\"isOpen\"))\n\t\t\t\t\t\t\t$(\"#dialog-editMask #accessList .static:first\").before(nodes);\n\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t},\n\t\t\t\t\tClose: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreate: function() {\n\t\t\t\t\t$(\"#EVEsearch\").submit(function(e) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif ($(\"#EVEsearch input[name='name']\").val() == \"\") {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$(\"#EVESearchResults, #searchCount\").html(\"\");\n\t\t\t\t\t\t$(\"#EVEsearch #searchSpinner\").show();\n\t\t\t\t\t\t$(\"#EVEsearch input[type='submit']\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\t\t$(\"#dialog-EVEsearch\").parent().find(\".ui-dialog-buttonpane button:contains('Add')\").attr(\"disabled\", true).addClass(\"ui-state-disabled\");\n\n\t\t\t\t\t\ttripwire.esi.search($(\"#EVEsearch input[name='name']\").val(), $(\"#EVEsearch input[name='category']:checked\").map((x, e) => e.value).get().join(','), $(\"#EVEsearch input[name='exact']\")[0].checked)\n\t\t\t\t\t\t\t.done(function(results) {\n\t\t\t\t\t\t\t\tif (results && (results.character || results.corporation || results.alliance)) {\n\t\t\t\t\t\t\t\t\t// limit results\n\t\t\t\t\t\t\t\t\tresults = [].concat(results.character || [],results.corporation || [], results.alliance || []);\n\t\t\t\t\t\t\t\t\ttotal = results.length;\n\t\t\t\t\t\t\t\t\tresults = results.slice(0, 10);\n\t\t\t\t\t\t\t\t\treturn tripwire.esi.fullLookup(results)\n\t\t\t\t\t\t\t\t\t\t.done(function(results) {\n\t\t\t\t\t\t\t\t\t\t\t$(\"#EVEsearch #searchCount\").html(\"Found: \"+total+\"<br/>Showing: \"+(total<10?total:10));\n\t\t\t\t\t\t\t\t\t\t\tif (results) {\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var x in results) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar node = makeAccessListNode(results[x], 'find', 'adds[]');\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#EVESearchResults\").append(node);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}).always(function() {\n\t\t\t\t\t\t\t\t\t\t\t$(\"#EVEsearch #searchSpinner\").hide();\n\t\t\t\t\t\t\t\t\t\t\t$(\"#EVEsearch input[type='submit']\").removeAttr(\"disabled\");\n\t\t\t\t\t\t\t\t\t\t\t$(\"#dialog-EVEsearch\").parent().find(\".ui-dialog-buttonpane button:contains('Add')\").removeAttr(\"disabled\").removeClass(\"ui-state-disabled\");\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"No Results\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\n\t\t\t\t\t\t\t\t\t$(\"#EVEsearch #searchSpinner\").hide();\n\t\t\t\t\t\t\t\t\t$(\"#EVEsearch input[type='submit']\").removeAttr(\"disabled\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-EVEsearch\").parent().find(\".ui-dialog-buttonpane button:contains('Add')\").removeAttr(\"disabled\").removeClass(\"ui-state-disabled\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).fail(data => {\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Error from ESI while searching\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t$(\"#EVEsearch #searchSpinner\").hide();\n\t\t\t\t\t\t\t\t\t$(\"#EVEsearch input[type='submit']\").removeAttr(\"disabled\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-EVEsearch\").parent().find(\".ui-dialog-buttonpane button:contains('Add')\").removeAttr(\"disabled\").removeClass(\"ui-state-disabled\");\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tclose: function() {\n\t\t\t\t\t$(\"#EVEsearch input[name='name']\").val(\"\");\n\t\t\t\t\t$(\"#EVESearchResults, #searchCount\").html(\"\");\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t$(\"#maskControls #edit\").click(function() {\n\t\t\t\t$(\"#dialog-editMask\").dialog(\"open\");\n\t\t\t});\n","\n\t\t$(\"#dialog-mass\").dialog({\n\t\t\tautoOpen: false,\n\t\t\twidth: \"auto\",\n\t\t\theight: \"auto\",\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tClose: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\tvar wormholeID = $(this).data(\"id\");\n\t\t\t\tvar systemID = $(this).data(\"systemID\");\n\t\t\t\tvar wormhole = tripwire.client.wormholes[wormholeID];\n\t\t\t\tvar signature = tripwire.client.signatures[wormhole.initialID];\n\t\t\t\tvar otherSignature = tripwire.client.signatures[wormhole.secondaryID];\n\t\t\t\t\n\t\t\t\tconst fromSystem = systemAnalysis.analyse(signature.systemID), toSystem = systemAnalysis.analyse(otherSignature.systemID);\n\t\t\t\t\n\t\t\t\tconst wormholeType = wormhole.type ? tripwire.wormholes[wormhole.type] : \n\t\t\t\t\tObject.assign({from: fromSystem.genericSystemType, leadsTo: toSystem.genericSystemType }, wormholeAnalysis.likelyWormhole(signature.systemID, otherSignature.systemID));\n\n\t\t\t\t$(\"#dialog-mass\").dialog(\"option\", \"title\", \"From \"+fromSystem.name+\" to \"+toSystem.name);\n\t\t\t\tdocument.getElementById('mass-systems').innerHTML = \"From \"+systemRendering.renderSystem(fromSystem)+\n\t\t\t\t\" To \"+systemRendering.renderSystem(toSystem) +\n\t\t\t\t\" via \"+wormholeRendering.renderWormholeType(wormholeType, wormhole.type, fromSystem, toSystem);\n\n\t\t\t\t$(\"#dialog-mass #massTable tbody tr\").remove();\n\t\t\t\tdocument.getElementById('mass-jumped').innerText = '?';\n\t\t\t\tdocument.getElementById('mass-capacity').innerText = '?';\n\n\t\t\t\tvar payload = {wormholeID: wormhole.id};\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"mass.php\",\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: payload,\n\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t}).done(function(data) {\n\t\t\t\t\tif (data && data.jumps) {\n\t\t\t\t\t\tconst massData = parseMassData(data.jumps);\n\t\t\t\t\t\tdocument.getElementById('mass-jumped').innerText = wormholeRendering.renderMass(massData.totalMass);\n\t\t\t\t\t\tdocument.getElementById('mass-capacity').innerText = wormholeType.mass ? wormholeRendering.renderMass(wormholeType.mass) : 'Unknown';\n\t\t\t\t\t\tdocument.getElementById('mass-placeholder-desc').style.display = wormholeType.dummy ? '' : 'none';\n\t\t\t\t\t\tfor (x in massData.jumps) {\n\t\t\t\t\t\t\tconst j = massData.jumps[x];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst massMarkup = (j.massClass === 'Small' ? '' :\n\t\t\t\t\t\t\t\t\t'<i data-icon=\"prop-mod\" class=\"' + (j.prop ? ' active' : 'inactive') + '\"></i>' +\n\t\t\t\t\t\t\t\t\t'<i data-icon=\"anchor\" class=\"' + (j.higgs ? ' active' : 'inactive') + '\"></i> '\n\t\t\t\t\t\t\t\t) + wormholeRendering.renderMass(j.mass);\n\t\t\t\t\t\t\t$(\"#dialog-mass #massTable tbody\").append(\"<tr class='mass-\" + getMassClass(j.mass) + \"'><td>\"+j.characterName+\"</td><td>\"+(j.targetSystem == systemID ? \"Into \" + systemRendering.renderSystem(toSystem, 'span') : \"Return to \" + systemRendering.renderSystem(fromSystem, 'span'))+\"</td><td>\"+j.shipName+\"</td><td>\"+massMarkup+\"</td><td>\"+j.time+\"</td></tr>\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Summary rows\n                        $(\"#dialog-mass #massTable tbody\").append(\"<tr id='small-mass'><td></td><td></td><td>Small jumps</td><td>\"+ wormholeRendering.renderMass(massData.smallMass) +\"</td><td></td></tr>\");\n                        $(\"#dialog-mass #massTable tbody\").append(\"<tr id='medium-mass'><td></td><td></td><td>Medium jumps</td><td>\"+ wormholeRendering.renderMass(massData.mediumMass) +\"</td><td></td></tr>\");\n                        $(\"#dialog-mass #massTable tbody\").append(\"<tr id='large-mass'><td></td><td></td><td>Large jumps</td><td>\"+ wormholeRendering.renderMass(massData.largeMass) +\"</td><td></td></tr>\");\n                        $(\"#dialog-mass #massTable tbody\").append(\"<tr><td></td><td></td><td></td><th>\"+ wormholeRendering.renderMass(massData.totalMass) +\"</th><td></td></tr>\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\nfunction getMassClass(jumpMass) {\n\treturn jumpMass <= 5e6 ? 'Small' :\n\t jumpMass <= 80e6 ? 'Medium' :\n\t jumpMass <= 500e6 ? 'Large' :\n\t 'X-Large';\n}\n\nfunction parseMassData(jumps) {\n\tconst result = { totalMass: 0, smallMass: 0, mediumMass: 0, largeMass: 0, xlMass: 0, jumps: [] };\n\tfor (x in jumps) {\n\t\tconst shipData = appData.mass[jumps[x].shipTypeID];\n\t\tif(!shipData) { continue; }\t// sometimes ship is not recorded, or ship isn't in SDE dump yet\n\t\tconst originalMass = parseFloat(shipData.mass);\n\t\tconst shipFlagsText = jumps[x].shipType.split('|', 2)[1] || '';\n\t\tconst shipFlags = { higgs: shipFlagsText.indexOf('h') >= 0, prop: shipFlagsText.indexOf('p') >= 0 };\n\t\tconst massClass = getMassClass(originalMass);\n\t\tconst jumpMass = (originalMass + (shipFlags.prop ? (massClass === 'X-Large' ? 500e6 : 50e6) : 0)) * (shipFlags.higgs ? 2 : 1);\n\t\tresult.totalMass += jumpMass;\n\t\tswitch(massClass) {\n\t\t\tcase 'Small': result.smallMass += jumpMass; break;\n\t\t\tcase 'Medium': result.mediumMass += jumpMass; break;\n\t\t\tcase 'Large': result.largeMass += jumpMass; break;\n\t\t\tcase 'X-Large': result.xlMass += jumpMass; break;\n\t\t}\n\t\tresult.jumps.push( { \n\t\t\toriginalMass: originalMass, mass: jumpMass, massClass: massClass,\n\t\t\thiggs: shipFlags.higgs, prop: shipFlags.prop, shipName: shipData.typeName,\n\t\t\ttargetSystem: jumps[x].toID, \n\t\t\tcharacterName: jumps[x].characterName.split('|')[0],\n\t\t\ttime: jumps[x].time \n\t\t});\n\t}\n\treturn result;\n}","$(\".options\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"disabled\"))\n\t\treturn false;\n\n\t$(\"#dialog-options\").dialog({\n\t\tautoOpen: false,\n\t\twidth: 450,\n\t\tminHeight: 400,\n\t\tmodal: true,\n\t\tbuttons: {\n\t\t\tSave: function() {\n\t\t\t\t// Options\n\t\t\t\tvar data = {mode: \"set\", options: JSON.stringify(options)};\n\n\t\t\t\t$(\"#dialog-options\").parent().find(\".ui-dialog-buttonpane button:contains('Save')\").attr(\"disabled\", true).addClass(\"ui-state-disabled\");\n\t\t\t\t\n\t\t\t\toptions.chain.sigNameLocation = $(\"#dialog-options #chainSigNameLocation\").val();\n\t\t\t\toptions.chain.routingLimit = 1 * $(\"#dialog-options #chainRoutingLimit\").val();\n\t\t\t\toptions.chain.routeSecurity = $(\"#dialog-options #chainRouteSecurity\").val();\n\t\t\t\toptions.chain.routeIgnore.enabled = $(\"#dialog-options #route-ignore-enabled\").prop('checked');\n\t\t\t\toptions.chain.routeIgnore.systems = $(\"#dialog-options #route-ignore\").val().split(\",\").map(x => x.trim());\n\n\t\t\t\toptions.chain.gridlines = 'true' == $(\"#dialog-options input[name=gridlines]:checked\").val();\n\t\t\t\toptions.chain.aura = 'true' == $(\"#dialog-options input[name=aura]:checked\").val();\n\t\t\t\toptions.chain.scrollWithoutCtrl = 'true' == $(\"#dialog-options input[name=scrollWithoutCtrl]:checked\").val();\n\n\t\t\t\toptions.chain.nodeSpacing.x = $(\"#dialog-options #node-spacing-x-slider\").slider(\"value\");\n\t\t\t\toptions.chain.nodeSpacing.y = $(\"#dialog-options #node-spacing-y-slider\").slider(\"value\");\n\t\t\t\t\n\t\t\t\toptions.chain.lineWeight = $(\"#dialog-options #node-spacing-line-weight-slider\").slider(\"value\");\n\t\t\t\t\n\t\t\t\toptions.chain[\"node-reference\"] = $(\"#dialog-options input[name=node-reference]:checked\").val();\n\t\t\t\t\n\t\t\t\toptions.chain.renderer = $(\"#dialog-options #renderer\").val();\n\n\t\t\t\toptions.signatures.editType = $(\"#dialog-options #editType\").val();\n\n\t\t\t\toptions.signatures.pasteLife = $(\"#dialog-options #pasteLife\").val();\n\n\t\t\t\toptions.signatures.copySeparator = $(\"#dialog-options #copySeparator\").val();\n\n\t\t\t\toptions.background = $(\"#dialog-options #background-image\").val();\n\n\t\t\t\toptions.uiscale = $(\"#dialog-options #uiscale-slider\").slider(\"value\");\n\n\t\t\t\toptions.apply();\n\t\t\t\toptions.save(); // Performs AJAX\n\n\t\t\t\t$(\"#dialog-options\").dialog(\"close\");\n\t\t\t\t$(\"#dialog-options\").parent().find(\".ui-dialog-buttonpane button:contains('Save')\").attr(\"disabled\", false).removeClass(\"ui-state-disabled\");\n\n\t\t\t},\n\t\t\tReset: function() {\n\t\t\t\t$(\"#dialog-confirm #msg\").html(\"Settings will be reset to defaults temporarily.<br/><br/><p><em>Save settings to make changes permanent.</em></p>\");\n\t\t\t\t$(\"#dialog-confirm\").dialog(\"option\", {\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tReset: function() {\n\t\t\t\t\t\t\toptions.reset();\n\t\t\t\t\t\t\toptions.apply();\n\n\t\t\t\t\t\t\t$(\"#dialog-options\").dialog(\"close\");\n\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).dialog(\"open\");\n\t\t\t},\n\t\t\tClose: function() {\n\t\t\t\t$(this).dialog(\"close\");\n\t\t\t}\n\t\t},\n\t\topen: function() {\n\t\t\t// Get user stats data\n\t\t\t$.ajax({\n\t\t\t\turl: \"user_stats.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(data) {\n\t\t\t\tfor (i in data.stats) {\n\t\t\t\t\tfor (x in data.stats[i]) {\n\t\t\t\t\t\t$(\"#optionsAccordion #\"+ x).text(data.stats[i][x]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$(\"#optionsAccordion #systems_visited\").text(data.system_visits);\n\t\t\t\t$(\"#optionsAccordion #logins\").text(data.account.logins);\n\t\t\t\t$(\"#optionsAccordion #lastLogin\").text(data.account.lastLogin);\n\t\t\t\t$(\"#optionsAccordion #username\").text(data.username);\n\t\t\t});\n\n\t\t\t$(\"#dialog-options #editType\").val(options.signatures.editType);\n\t\t\t$(\"#dialog-options #pasteLife\").val(options.signatures.pasteLife);\n\t\t\t$(\"#dialog-options #copySeparator\").val(options.signatures.copySeparator);\n\t\t\t$(\"#dialog-options #chainRoutingLimit\").val(options.chain.routingLimit);\n\t\t\t$(\"#dialog-options #chainSigNameLocation\").val(options.chain.sigNameLocation);\n\t\t\t$(\"#dialog-options #chainRouteSecurity\").val(options.chain.routeSecurity);\n\t\t\t$(\"#dialog-options #route-ignore-enabled\").prop('checked', options.chain.routeIgnore.enabled);\n\t\t\t$(\"#dialog-options #route-ignore\").val(options.chain.routeIgnore.systems.join(','));\n\t\t\t$(\"#dialog-options #renderer\").val(options.chain.renderer);\n\t\t\t$(\"#dialog-options input[name='node-reference'][value='\"+options.chain[\"node-reference\"]+\"']\").prop(\"checked\", true);\n\t\t\t$(\"#dialog-options input[name='gridlines'][value='\"+options.chain.gridlines+\"']\").prop(\"checked\", true);\n\t\t\t$(\"#dialog-options input[name='aura'][value='\"+options.chain.aura+\"']\").prop(\"checked\", true);\n\t\t\t$(\"#dialog-options input[name='scrollWithoutCtrl'][value='\"+options.chain.scrollWithoutCtrl+\"']\").prop(\"checked\", true);\n\t\t\t$(\"#dialog-options #node-spacing-x-slider\").slider(\"value\", options.chain.nodeSpacing.x);\n\t\t\t$(\"#dialog-options #node-spacing-y-slider\").slider(\"value\", options.chain.nodeSpacing.y);\n\t\t\t$(\"#dialog-options #node-spacing-line-weight-slider\").slider(\"value\", options.chain.lineWeight);\n\t\t\t$(\"#dialog-options #background-image\").val(options.background);\n\t\t},\n\t\tcreate: function() {\n\t\t\t$(\"#optionsAccordion\").accordion({heightStyle: \"content\", collapsible: true, active: false});\n\t\t\tfunction setUpSlider(id, value, change, range) {\n\t\t\t\trange = Object.assign({min: 0.7, max:1.4, step:0.05}, range);\n\t\t\t\t$(\"#\" + id).slider({\n\t\t\t\t\tmin: range.min,\n\t\t\t\t\tmax: range.max,\n\t\t\t\t\tstep: range.step,\n\t\t\t\t\tvalue: value || 1.0,\n\t\t\t\t\tchange: change,\n\t\t\t\t\tslide: function(e, ui) {\n\t\t\t\t\t\t$(\"label[for='\" + id + \"']\").html(ui.value);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$(\"label[for='\" + id + \"']\").html($(\"#\" + id).slider(\"value\"));\n\t\t\t}\n\t\t\tsetUpSlider('uiscale-slider', options.uiscale, function(e, ui) {\n\t\t\t\t\t\t$(\"body\").css(\"zoom\", ui.value);\n\t\t\t\t\t});\n\t\t\tsetUpSlider('node-spacing-x-slider', options.chain.nodeSpacing.x);\n\t\t\tsetUpSlider('node-spacing-y-slider', options.chain.nodeSpacing.y);\n\t\t\tsetUpSlider('node-spacing-line-weight-slider', options.chain.lineWeight, undefined, { min: 0.5, max: 1.5 });\n\n\t\t\t$(\"#dialog-pwChange\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tresizable: false,\n\t\t\t\tminHeight: 0,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tSave: function() {\n\t\t\t\t\t\t$(\"#pwForm\").submit();\n\t\t\t\t\t},\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tclose: function() {\n\t\t\t\t\t$(\"#pwForm input[name='password'], #pwForm input[name='confirm']\").val(\"\");\n\t\t\t\t\t$(\"#pwError\").text(\"\").hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"#pwChange\").click(function() {\n\t\t\t\t$(\"#dialog-pwChange\").dialog(\"open\");\n\t\t\t});\n\n\t\t\t$(\"#pwForm\").submit(function(e) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t$(\"#pwError\").text(\"\").hide();\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"options.php\",\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: $(this).serialize(),\n\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t}).done(function(response) {\n\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t$(\"#dialog-msg #msg\").text(\"Password changed\");\n\t\t\t\t\t\t$(\"#dialog-msg\").dialog(\"open\");\n\n\t\t\t\t\t\t$(\"#dialog-pwChange\").dialog(\"close\");\n\t\t\t\t\t} else if (response && response.error) {\n\t\t\t\t\t\t$(\"#pwError\").text(response.error).show(\"slide\", {direction: \"up\"});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#pwError\").text(\"Unknown error\").show(\"slide\", {direction: \"up\"});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$(\"#dialog-usernameChange\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tresizable: false,\n\t\t\t\tminHeight: 0,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tSave: function() {\n\t\t\t\t\t\t$(\"#usernameForm\").submit();\n\t\t\t\t\t},\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\topen: function() {\n\t\t\t\t\t$(\"#usernameForm #username\").html($(\"#dialog-options #username\").html());\n\t\t\t\t},\n\t\t\t\tclose: function() {\n\t\t\t\t\t$(\"#usernameForm [name='username']\").val(\"\");\n\t\t\t\t\t$(\"#usernameError\").text(\"\").hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"#usernameChange\").click(function() {\n\t\t\t\t$(\"#dialog-usernameChange\").dialog(\"open\");\n\t\t\t});\n\n\t\t\t$(\"#usernameForm\").submit(function(e) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t$(\"#usernameError\").text(\"\").hide();\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"options.php\",\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: $(this).serialize(),\n\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t}).done(function(response) {\n\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t$(\"#dialog-msg #msg\").text(\"Username changed\");\n\t\t\t\t\t\t$(\"#dialog-msg\").dialog(\"open\");\n\n\t\t\t\t\t\t$(\"#dialog-options #username\").html(response.result);\n\n\t\t\t\t\t\t$(\"#dialog-usernameChange\").dialog(\"close\");\n\t\t\t\t\t} else if (response && response.error) {\n\t\t\t\t\t\t$(\"#usernameError\").text(response.error).show(\"slide\", {direction: \"up\"});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#usernameError\").text(\"Unknown error\").show(\"slide\", {direction: \"up\"});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\n\t\t}\n\t});\n\n\t$(\"#dialog-options\").dialog(\"open\");\n});\n","\t\t$(\"#dialog-ping\").dialog({\n\t\t\tautoOpen: false,\n\t\t\theight: \"auto\",\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tSend: function() {\n\t\t\t\t\tvar payload = {systemName: this.systemName, systemText: this.systemText, message: $('#ping-text').val() };\n\t\t\t\t\tconst _this = this;\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: \"ping.php\",\n\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\tdata: payload,\n\t\t\t\t\t\tdataType: \"text\"\n\t\t\t\t\t}).done(function(data) {\t$(_this).dialog(\"close\"); })\n\t\t\t\t\t.fail(function(xhr, status, error) { console.log(status, error); });\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t},\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\tconst wormholeID = $(this).data(\"id\");\n\t\t\t\tconst systemID = $(this).data(\"systemID\");\n\t\t\t\tconst wormhole = tripwire.client.wormholes[wormholeID];\n\t\t\t\tconst fromSignature = wormhole ? tripwire.client.signatures[wormhole.initialID] : { name: null};\n\t\t\t\t\n\t\t\t\tthis.systemName = tripwire.systems[systemID].name;\n\t\t\t\tthis.systemText = this.systemName + (fromSignature.name !== null && fromSignature.name.length ? ' (' + fromSignature.name + ')' : '');\n\t\t\t\t\n\t\t\t\t$(\"#dialog-ping\").dialog(\"option\", \"title\", \"Ping about \"+this.systemText);\n\t\t\t\t$('#ping-text').val('');\n\t\t\t\t$('#ping-text').focus();\n\t\t\t}\n\t\t});","$(\"#signaturesWidget\").on(\"click\", \"#delete-signature\", function(e) {\n\te.preventDefault();\n\n\tif ($(this).closest(\"tr\").attr(\"disabled\")) {\n\t\treturn false;\n\t} else if ($(\"#sigTable tr.selected\").length == 0) {\n\t\treturn false;\n\t} else if ($(\"#dialog-sigEdit\").hasClass(\"ui-dialog-content\") && $(\"#dialog-sigEdit\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-sigEdit\").parent().effect(\"shake\", 300);\n\t\treturn false;\n\t}\n\t\t\n\topenDeleteDialog({\n\t\tsignatures: $.map($(\"#sigTable tr.selected\"), function(n) {\n\t\t\treturn tripwire.client.signatures[$(n).data(\"id\")];\n\t\t})\n\t});\n});\n\nfunction openDeleteDialog(vm, successFunction) {\n\topenDeleteDialog.deleteDialogVM = vm;\t// outside so it's not saved in the closure first time we open the dialog\n\n\t// check if dialog is open\n\tif (!$(\"#dialog-deleteSig\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-deleteSig\").dialog({\n\t\t\tresizable: false,\n\t\t\tminHeight: 0,\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tDelete: function() {\n\t\t\t\t\t// Prevent duplicate submitting\n\t\t\t\t\t$(\"#dialog-deleteSig\").parent().find(\":button:contains('Delete')\").button(\"enable\");\n\t\t\t\t\tvar payload = {\"signatures\": {\"remove\": []}, \"systemID\": viewingSystemID};\n\t\t\t\t\tvar undo = [];\n\n\t\t\t\t\tvar signaturePayload = $.map(openDeleteDialog.deleteDialogVM.signatures, function(signature) {\n\t\t\t\t\t\tif (signature.type != \"wormhole\") {\n\t\t\t\t\t\t\tundo.push(signature);\n\t\t\t\t\t\t\treturn signature.id;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n\t\t\t\t\t\t\tundo.push({\"wormhole\": wormhole, \"signatures\": [tripwire.client.signatures[wormhole.initialID], tripwire.client.signatures[wormhole.secondaryID]]});\n\t\t\t\t\t\t\treturn wormhole;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tpayload.signatures.remove = signaturePayload;\n\n\t\t\t\t\tvar success = function(data) {\n\t\t\t\t\t\tif (data.resultSet && data.resultSet[0].result == true) {\n\t\t\t\t\t\t\t$(\"#dialog-deleteSig\").dialog(\"close\");\n\t\t\t\t\t\t\tif(successFunction) { successFunction(); }\n\n\t\t\t\t\t\t\t$(\"#undo\").removeClass(\"disabled\");\n\t\t\t\t\t\t\tif (viewingSystemID in tripwire.signatures.undo) {\n\t\t\t\t\t\t\t\ttripwire.signatures.undo[viewingSystemID].push({action: \"remove\", signatures: undo});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttripwire.signatures.undo[viewingSystemID] = [{action: \"remove\", signatures: undo}];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar always = function(data) {\n\t\t\t\t\t\t$(\"#dialog-deleteSig\").parent().find(\":button:contains('Delete')\").button(\"enable\");\n\t\t\t\t\t}\n\n\t\t\t\t\ttripwire.refresh('refresh', payload, success, always);\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\tconst sigs = openDeleteDialog.deleteDialogVM.signatures;\n\t\t\t\t$(\"#dialog-deleteSig\").dialog(\"option\", \"title\", sigs.length == 1 ? 'Delete Signature ' + formatSignatureID(sigs[0].signatureID) : 'Delete Multiple Signatures');\n\t\t\t\tdocument.getElementById('deleteSigText').innerText = sigs.length == 1 ? 'The ' + sigs[0].type + ' signature ' + formatSignatureID(sigs[0].signatureID) \n\t\t\t\t\t: 'The signatures ' + sigs.map(s => formatSignatureID(s.signatureID)).join(', ');\n\t\t\t\tdocument.getElementById('deleteSigSystem').innerHTML = systemRendering.renderSystem(systemAnalysis.analyse(sigs[0].systemID));\n\t\t\t\t\n\t\t\t\t$(\"#dialog-deleteSig\").parent().find(\".ui-dialog-buttonset button:eq(0)\").focus();\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\t$(\"#sigTable tr.selected\").removeClass(\"selected\");\n\t\t\t\t//$(\"#sigTable .sigDelete\").removeClass(\"invisible\");\n\t\t\t}\n\t\t});\t\t\n\t} else if (!$(\"#dialog-deleteSig\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-deleteSig\").dialog(\"open\");\n\t}\n}\n","const sigDialog = {};\nconst sigDialogVM = {};\n\nsigDialog.openSignatureDialog = function(e) {\n\tif(e.preventDefault) { e.preventDefault(); }\t// Allow calls with fake event-like objects too\n\tsigDialogVM.mode = e.data.mode;\n\t\n\tswitch(sigDialogVM.mode) {\n\t\tcase 'update':\n\t\t\tif (e.data.source == \"sig-row\") {\n\t\t\t\t$(\"#sigTable tr.selected\").removeClass(\"selected\");\n\t\t\t\t$(this).closest(\"tr\").addClass(\"selected\");\n\t\t\t\tsigDialogVM.sigId = $(this).data('id');\n\t\t\t} else if (e.data.source == \"edit-sig\") {\n\t\t\t\tvar elements = $(\"#sigTable tbody tr.selected\");\n\t\t\t\tif (elements.length !== 1) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tsigDialogVM.sigId = $(elements[0]).data('id');\n\t\t\t\t}\n\t\t\t} else { sigDialogVM.sigId = e.data.signature; }\n\t\t\tbreak;\n\t\tdefault: delete sigDialogVM.sigId;\n\t}\n\t\n\tsigDialogVM.viewingSystemID = ( sigDialogVM.sigId ) ? tripwire.client.signatures[sigDialogVM.sigId].systemID : viewingSystemID;\n\tsigDialogVM.viewingSystem = tripwire.systems[sigDialogVM.viewingSystemID];\n\n\n\t\n\tif (!$(\"#dialog-signature\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-signature\").dialog({\n\t\t\tautoOpen: true,\n\t\t\tresizable: false,\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tposition: {my: \"center\", at: \"center\", of: $(\"#signaturesWidget\")},\n\t\t\tbuttons: {\n\t\t\t\tDelete: function() {\n\t\t\t\t\tconst d = $(this);\n\t\t\t\t\topenDeleteDialog({ signatures: [tripwire.client.signatures[sigDialogVM.sigId]] }, () => d.dialog('close') );\n\t\t\t\t},\n\t\t\t\tSave: function() {\n\t\t\t\t\t$(\"#form-signature\").submit();\n\t\t\t\t},\n\t\t\t\tAdd: function() {\n\t\t\t\t\t$(\"#form-signature\").submit();\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreate: function() {\n\t\t\t\tvar aSigWormholes = Object.assign({}, appData.wormholes, wormholeAnalysis.dummyWormholes, { K162: {} } );\n\t\t\t\t\n\t\t\t\tfunction system_select_item_mapper(items) {\n\t\t\t\t\treturn items.concat(appData.genericSystemTypes).map(function(name) {\n\t\t\t\t\t\treturn Object.assign({name:name}, systemAnalysis.analyse(name)); \n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t$(\"#dialog-signature [name='signatureType'], #dialog-signature [name='signatureLife']\").selectmenu({width: 100});\n\t\t\t\t$(\"#dialog-signature [name='wormholeLife'], #dialog-signature [name='wormholeMass']\").selectmenu({width: 80});\n\t\t\t\t$(\"#dialog-signature [data-autocomplete='sigSystems']\").inlinecomplete({source: tripwire.aSigSystems, renderer: 'system', select_item_mapper: system_select_item_mapper, maxSize: 10, delay: 0});\n\t\t\t\t\n\t\t\t\tfunction getTargetName() { return $(\"#dialog-signature .leadsTo:visible\").val(); }\n\t\t\t\tfunction getTargetSystem() {\n\t\t\t\t\treturn wormholeAnalysis.targetSystemID(getTargetName(), undefined);\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tfunction sigTypeDropdownFiller(extractor) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tconst eligible = wormholeAnalysis.eligibleWormholeTypes(sigDialogVM.viewingSystemID, getTargetSystem());\n\t\t\t\t\t\treturn extractor(eligible);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfunction renderInbound(item) {\t// Render with the type of the systems, if we know, so we don't get \"from: [drifter wormholes]\" if we know we're in a C2\n\t\t\t\t\treturn wormholeRendering.renderWormholeType(item, item.key, getTargetName(), sigDialogVM.viewingSystem.name);\n\t\t\t\t}\n\t\t\t\tfunction renderOutbound(item) {\t// As above\n\t\t\t\t\treturn wormholeRendering.renderWormholeType(item, item.key, sigDialogVM.viewingSystem.name, getTargetName());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$(\"#dialog-signature [data-autocomplete='sigTypeFrom']\").inlinecomplete({source: aSigWormholes, renderer: renderOutbound, maxSize: 10, delay: 0, customDropdown: sigTypeDropdownFiller(function(x) { return x.from; })});\n\t\t\t\t$(\"#dialog-signature [data-autocomplete='sigTypeTo']\").inlinecomplete({source: aSigWormholes, renderer: renderInbound, maxSize: 10, delay: 0, customDropdown: sigTypeDropdownFiller(function(x) { return x.to; })});\n\n\t\t\t\t$(\"#dialog-signature #durationPicker\").durationPicker();\n\t\t\t\t$(\"#dialog-signature #durationPicker\").on(\"change\", function() {\n\t\t\t\t\t// prevent negative values\n\t\t\t\t\tif (this.value < 0) {\n\t\t\t\t\t\tthis.value = 0;\n\t\t\t\t\t\t$(this).change();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Ensure first signature ID field only accepts letters\n\t\t\t\t$(\"#dialog-signature [name='signatureID_Alpha'], #dialog-signature [name='signatureID2_Alpha']\").on(\"input\", function() {\n\t\t\t\t\twhile (!/^[a-zA-Z?]*$/g.test(this.value)) {\n\t\t\t\t\t\tthis.value = this.value.substring(0, this.value.length -1);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Move to the numeric ID after filling out alpha ID\n\t\t\t\t$(\"#dialog-signature [name='signatureID_Alpha']\").on(\"input\", function() {\n\t\t\t\t\tif (this.value.length === 3) {\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureID_Numeric']\").select();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$(\"#dialog-signature [name='signatureID2_Alpha']\").on(\"input\", function() {\n\t\t\t\t\tif (this.value.length === 3) {\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureID2_Numeric']\").select();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Ensure second signature ID field only accepts numbers\n\t\t\t\t$(\"#dialog-signature [name='signatureID_Numeric'], #dialog-signature [name='signatureID2_Numeric']\").on(\"input\", function() {\n\t\t\t\t\twhile (!/^[0-9?]*$/g.test(this.value)) {\n\t\t\t\t\t\tthis.value = this.value.substring(0, this.value.length -1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// Positioning hack to separate delete button visually\n\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Delete')\").css( { position: 'absolute', left: '30px' } );\n\n\t\t\t\t// Select value on click\n\t\t\t\t$(\"#dialog-signature .signatureID, #dialog-signature .wormholeType\").on(\"click\", function() {\n\t\t\t\t\t$(this).select();\n\t\t\t\t});\n\n\t\t\t\t// Auto fill opposite side wormhole w/ K162\n\t\t\t\t$(\"#dialog-signature .wormholeType\").on(\"input, change\", function() {\n\t\t\t\t\tif (this.value.length > 0 && aSigWormholes[this.value.toUpperCase()] != -1 && this.value.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t$(\"#dialog-signature .wormholeType\").not(this).val(\"K162\");\n\n\t\t\t\t\t\t// Also auto calculate duration\n\t\t\t\t\t\tif (appData.wormholes[this.value.toUpperCase()]) {\n\t\t\t\t\t\t\t$(\"#dialog-signature #durationPicker\").val(appData.wormholes[this.value.toUpperCase()].life.substring(0, 2) * 60 * 60).change();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (this.value.toUpperCase() === \"K162\") {\n\t\t\t\t\t\tif (aSigWormholes[$(\"#dialog-signature .wormholeType\").not(this).val().toUpperCase()] || $(\"#dialog-signature .wormholeType\").not(this).val().toUpperCase() === \"K162\") {\n\t\t\t\t\t\t\t$(\"#dialog-signature .wormholeType\").not(this).val(\"????\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (this.value == \"????\") {\n\t\t\t\t\t\t$(\"#dialog-signature .wormholeType\").not(this).val(\"K162\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Toggle between wormhole and regular signatures\n\t\t\t\t$(\"#dialog-signature\").on(\"selectmenuchange\", \"[name='signatureType']\", function() {\n\t\t\t\t\tif (this.value == \"wormhole\") {\n\t\t\t\t\t\t$(\"#dialog-signature #site\").slideUp(200, function() { $(this).hide(0); });\n\t\t\t\t\t\t$(\"#dialog-signature #wormhole\").slideDown(200, function() { $(this).show(200); });\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#dialog-signature #site\").slideDown(200, function() { $(this).show(200); });\n\t\t\t\t\t\t$(\"#dialog-signature #wormhole\").slideUp(200, function() { $(this).hide(0); });\n\t\t\t\t\t}\n\n\t\t\t\t\tValidationTooltips.close();\n\t\t\t\t});\n\n\t\t\t\t$(\"#form-signature\").submit(function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar form = $(this).serializeObject();\n\t\t\t\t\tvar valid = true;\n\t\t\t\t\tValidationTooltips.close();\n\n\t\t\t\t\t// Validate full signature ID fields (blank | 3 characters)\n\t\t\t\t\t$.each($(\"#dialog-signature .signatureID:visible\"), function() {\n\t\t\t\t\t\tif (this.value.length > 0 && this.value.length < 3) {\n\t\t\t\t\t\t\tValidationTooltips.open({target: $(this)}).setContent(\"Must be 3 characters in length!\");\n\t\t\t\t\t\t\t$(this).select();\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\t// Validate full signature ID doesn't already exist in current system\n\t\t\t\t\tif (form.signatureID_Alpha.length === 3 && form.signatureID_Numeric.length === 3) {\n\t\t\t\t\t\tfor(var sigKey in tripwire.client.signatures) {\n\t\t\t\t\t\t\tconst existing = tripwire.client.signatures[sigKey];\n\t\t\t\t\t\t\tif((existing.id != sigDialogVM.sigId) && // not the sig we are editing\n\t\t\t\t\t\t\t\t(existing.signatureID == form.signatureID_Alpha.toLowerCase() + form.signatureID_Numeric) && // same name\n\t\t\t\t\t\t\t\t(existing.systemID == sigDialogVM.viewingSystemID) // in current system\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-signature .signatureID:first\")}).setContent(\"Signature ID already exists! <input type='button' autofocus='true' id='overwrite' value='Overwrite' style='margin-bottom: -4px; margin-top: -4px; font-size: 0.8em;' data-id='\"+ sigKey +\"' />\");\n\t\t\t\t\t\t\t\t$(\"#overwrite\").focus();\n\t\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\t// Validate wormhole types (blank | wormhole)\n\t\t\t\t\t$.each($(\"#dialog-signature .wormholeType:visible\"), function() {\n\t\t\t\t\t\tif (this.value.length > 0 && !aSigWormholes[this.value.toUpperCase()] && this.value != \"????\") {\n\t\t\t\t\t\t\tValidationTooltips.open({target: $(this)}).setContent(\"Must be a valid wormhole type!\");\n\t\t\t\t\t\t\t$(this).select();\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\t// Validate leads to system (blank | system)\n\t\t\t\t\t$.each($(\"#dialog-signature .leadsTo:visible\"), function() {\n\t\t\t\t\t\tif (this.value.length > 0 && appData.genericSystemTypes.findIndex((item) => this.value.toLowerCase() === item.toLowerCase()) == -1 && !findSystemID(this.value)) {\n\t\t\t\t\t\t\tValidationTooltips.open({target: $(this)}).setContent(\"Must be a valid leads to system!\");\n\t\t\t\t\t\t\t$(this).select();\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\t// Validate leads to isn't the viewing system which causes a inner loop\n\t\t\t\t\t$.each($(\"#dialog-signature .leadsTo:visible\"), function() {\n\t\t\t\t\t\tif (this.value.length > 0 && this.value.toLowerCase() === sigDialogVM.viewingSystem.name.toLowerCase()) {\n\t\t\t\t\t\t\tValidationTooltips.open({target: $(this)}).setContent(\"Wormhole cannot lead to the same system it comes from!\");\n\t\t\t\t\t\t\t$(this).select();\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\tvar payload = {};\n\t\t\t\t\tvar undo = [];\n\t\t\t\t\tif (form.signatureType === \"wormhole\") {\n\t\t\t\t\t\tvar signature = {\n\t\t\t\t\t\t\t\"signatureID\": form.signatureID_Alpha + form.signatureID_Numeric,\n\t\t\t\t\t\t\t\"systemID\": sigDialogVM.viewingSystemID,\n\t\t\t\t\t\t\t\"type\": \"wormhole\",\n\t\t\t\t\t\t\t\"name\": form.wormholeName,\n\t\t\t\t\t\t\t\"lifeLength\": form.signatureLength\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar leadsTo = wormholeAnalysis.targetSystemID(form.leadsTo, form.wormholeType);\n\n\t\t\t\t\t\tvar signature2 = {\n\t\t\t\t\t\t\t\"signatureID\": form.signatureID2_Alpha + form.signatureID2_Numeric,\n\t\t\t\t\t\t\t\"systemID\": leadsTo,\n\t\t\t\t\t\t\t\"type\": \"wormhole\",\n\t\t\t\t\t\t\t\"name\": form.wormholeName2,\n\t\t\t\t\t\t\t\"lifeLength\": form.signatureLength\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar type = null;\n\t\t\t\t\t\tvar parent = null;\n\t\t\t\t\t\tif (form.wormholeType.length > 0 && aSigWormholes[form.wormholeType.toUpperCase()] && form.wormholeType.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t\tparent = \"initial\";\n\t\t\t\t\t\t\ttype = form.wormholeType.toUpperCase();\n\t\t\t\t\t\t} else if (form.wormholeType2.length > 0 && aSigWormholes[form.wormholeType2.toUpperCase()] && form.wormholeType2.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t\tparent = \"secondary\";\n\t\t\t\t\t\t\ttype = form.wormholeType2.toUpperCase();\n\t\t\t\t\t\t} else if (form.wormholeType.toUpperCase() == \"K162\") {\n\t\t\t\t\t\t\tparent = \"secondary\";\n\t\t\t\t\t\t\ttype = \"????\";\n\t\t\t\t\t\t} else if (form.wormholeType2.toUpperCase() == \"K162\") {\n\t\t\t\t\t\t\tparent = \"initial\";\n\t\t\t\t\t\t\ttype = \"????\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar wormhole = {\n\t\t\t\t\t\t\t\"type\": type,\n\t\t\t\t\t\t\t\"parent\": parent,\n\t\t\t\t\t\t\t\"life\": form.wormholeLife,\n\t\t\t\t\t\t\t\"mass\": form.wormholeMass\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (sigDialogVM.mode == \"update\") {\n\t\t\t\t\t\t\tsignature.id = $(\"#dialog-signature\").data(\"signatureid\");\n\t\t\t\t\t\t\tsignature2.id = $(\"#dialog-signature\").data(\"signature2id\");\n\t\t\t\t\t\t\twormhole.id = $(\"#dialog-signature\").data(\"wormholeid\");\n\n\t\t\t\t\t\t\t// Update the initial and type based on which side of the wormhole we are editing\n\t\t\t\t\t\t\tif (tripwire.client.wormholes[wormhole.id]) {\n\t\t\t\t\t\t\t\tif (form.wormholeType.length > 0 && aSigWormholes[form.wormholeType.toUpperCase()] && form.wormholeType.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t\t\t\twormhole.parent = tripwire.client.wormholes[wormhole.id].initialID == signature.id ? \"initial\" : \"secondary\";\n\t\t\t\t\t\t\t\t\twormhole.type = form.wormholeType.toUpperCase();\n\t\t\t\t\t\t\t\t} else if (form.wormholeType2.length > 0 && aSigWormholes[form.wormholeType2.toUpperCase()] && form.wormholeType2.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t\t\t\twormhole.parent = tripwire.client.wormholes[wormhole.id].initialID == signature.id ? \"secondary\" : \"initial\";\n\t\t\t\t\t\t\t\t\twormhole.type = form.wormholeType2.toUpperCase();\n\t\t\t\t\t\t\t\t} else if (form.wormholeType.toUpperCase() == \"K162\") {\n\t\t\t\t\t\t\t\t\twormhole.parent = tripwire.client.wormholes[wormhole.id].initialID == signature.id ? \"secondary\" : \"initial\";\n\t\t\t\t\t\t\t\t\twormhole.type = \"????\";\n\t\t\t\t\t\t\t\t} else if (form.wormholeType2.toUpperCase() == \"K162\") {\n\t\t\t\t\t\t\t\t\twormhole.parent = tripwire.client.wormholes[wormhole.id].initialID == signature.id ? \"initial\" : \"secondary\";\n\t\t\t\t\t\t\t\t\twormhole.type = \"????\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpayload = {\"signatures\": {\"update\": [{\"wormhole\": wormhole, \"signatures\": [signature, signature2]}]}};\n\n\t\t\t\t\t\t\tif (tripwire.client.wormholes[wormhole.id]) {\n\t\t\t\t\t\t\t\t\t//used to be a wormhole\n\t\t\t\t\t\t\t\t\tundo.push({\"wormhole\": tripwire.client.wormholes[wormhole.id], \"signatures\": [tripwire.client.signatures[signature.id], tripwire.client.signatures[signature2.id]]});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// used to be just a regular signature\n\t\t\t\t\t\t\t\t\tundo.push(tripwire.client.signatures[signature.id]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpayload = {\"signatures\": {\"add\": [{\"wormhole\": wormhole, \"signatures\": [signature, signature2]}]}};\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (sigDialogVM.mode == \"update\") {\n\t\t\t\t\t\t\tvar signature = {\n\t\t\t\t\t\t\t\t\"id\": $(\"#dialog-signature\").data(\"signatureid\"),\n\t\t\t\t\t\t\t\t\"signatureID\": form.signatureID_Alpha + form.signatureID_Numeric,\n\t\t\t\t\t\t\t\t\"systemID\": sigDialogVM.viewingSystemID,\n\t\t\t\t\t\t\t\t\"type\": form.signatureType,\n\t\t\t\t\t\t\t\t\"name\": form.signatureName,\n\t\t\t\t\t\t\t\t\"lifeLength\": form.signatureLength\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tpayload = {\"signatures\": {\"update\": [signature]}};\n\n\t\t\t\t\t\t\tif (tripwire.client.signatures[signature.id].type == \"wormhole\") {\n\t\t\t\t\t\t\t\t//used to be a wormhole\n\t\t\t\t\t\t\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n\t\t\t\t\t\t\t\tvar signature2 = signature.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t\t\t\tundo.push({\"wormhole\": tripwire.client.wormholes[wormhole.id], \"signatures\": [tripwire.client.signatures[signature.id], tripwire.client.signatures[signature2.id]]});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// used to be just a regular signature\n\t\t\t\t\t\t\t\tundo.push(tripwire.client.signatures[signature.id]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar signature = {\n\t\t\t\t\t\t\t\t\"signatureID\": form.signatureID_Alpha + form.signatureID_Numeric,\n\t\t\t\t\t\t\t\t\"systemID\": sigDialogVM.viewingSystemID,\n\t\t\t\t\t\t\t\t\"type\": form.signatureType,\n\t\t\t\t\t\t\t\t\"name\": form.signatureName,\n\t\t\t\t\t\t\t\t\"lifeLength\": form.signatureLength\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tpayload = {\"signatures\": {\"add\": [signature]}};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\":button:contains('Save')\").button(\"disable\");\n\n\t\t\t\t\tvar success = function(data) {\n\t\t\t\t\t\tif (data.resultSet && data.resultSet[0].result == true) {\n\t\t\t\t\t\t\t$(\"#dialog-signature\").dialog(\"close\");\n\n\t\t\t\t\t\t\t$(\"#undo\").removeClass(\"disabled\");\n\n\t\t\t\t\t\t\tif (sigDialogVM.mode == \"add\") {\n\t\t\t\t\t\t\t\tundo = data.results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (sigDialogVM.viewingSystemID in tripwire.signatures.undo) {\n\t\t\t\t\t\t\t\ttripwire.signatures.undo[sigDialogVM.viewingSystemID].push({action: sigDialogVM.mode, signatures: undo});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttripwire.signatures.undo[sigDialogVM.viewingSystemID] = [{action: sigDialogVM.mode, signatures: undo}];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar always = function() {\n\t\t\t\t\t\t$(\"#sigEditForm input[type=submit]\").removeAttr(\"disabled\");\n\t\t\t\t\t\t$(\"#dialog-signature\").parent().find(\":button:contains('Save')\").button(\"enable\");\n\t\t\t\t\t}\n\n\t\t\t\t\ttripwire.refresh('refresh', payload, success, always);\n\t\t\t\t});\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\t$(\"#dialog-signature\").data(\"signatureid\", \"\");\n\t\t\t\t$(\"#dialog-signature\").data(\"signature2id\", \"\");\n\t\t\t\t$(\"#dialog-signature\").data(\"wormholeid\", \"\");\n\n\t\t\t\t$(\"#dialog-signature input\").val(\"\");\n\t\t\t\t$(\"#dialog-signature [name='signatureType']\").val(\"unknown\").selectmenu(\"refresh\");\n\n\t\t\t\t$(\"#dialog-signature [name='wormholeLife']\").val(\"stable\").selectmenu(\"refresh\");\n\t\t\t\t$(\"#dialog-signature [name='wormholeMass']\").val(\"stable\").selectmenu(\"refresh\");\n\n\t\t\t\t$(\"#dialog-signature #site\").show();\n\t\t\t\t$(\"#dialog-signature #wormhole\").hide();\n\n\t\t\t\t// Side labels\n\t\t\t\t$(\"#dialog-signature .sideLabel:first\").html(sigDialogVM.viewingSystem.name + \" Side\");\n\t\t\t\t$(\"#dialog-signature .sideLabel:last\").html(\"Other Side\");\n\n\t\t\t\t// Default signature life\n\t\t\t\t$(\"#dialog-signature #durationPicker\").val(options.signatures.pasteLife * 60 * 60).change();\n\n\t\t\t\tvar id = sigDialogVM.sigId;\n\t\t\t\tif (sigDialogVM.mode == \"update\" && id && tripwire.client.signatures[id]) {\n\t\t\t\t\tvar signature = tripwire.client.signatures[id];\n\t\t\t\t\t$(\"#dialog-signature\").data(\"signatureid\", id);\n\n\t\t\t\t\t// Change the dialog buttons\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Add')\").hide();\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Save')\").show();\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Delete')\").show();\n\n\t\t\t\t\t// Change the dialog title\n\t\t\t\t\t$(\"#dialog-signature\").dialog(\"option\", \"title\", \"Edit Signature\");\n\n\t\t\t\t\tif (signature.type == \"wormhole\") {\n\t\t\t\t\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == id || wormhole.secondaryID == id) return wormhole; })[0];\n\t\t\t\t\t\tvar otherSignature = id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t\t$(\"#dialog-signature\").data(\"signature2id\", otherSignature.id);\n\t\t\t\t\t\t$(\"#dialog-signature\").data(\"wormholeid\", wormhole.id);\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst sigAlpha = signature.signatureID ? signature.signatureID.substr(0, 3) : \"???\";\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Alpha']\").val(sigAlpha);\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Numeric']\").val(signature.signatureID ? signature.signatureID.substr(3, 5) : \"\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureType']\").val(signature.type).selectmenu(\"refresh\").trigger(\"selectmenuchange\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='wormholeName']\").val(signature.name);\n\t\t\t\t\t\t$(\"#dialog-signature [name='leadsTo']\").val(tripwire.systems[otherSignature.systemID] ? tripwire.systems[otherSignature.systemID].name : (appData.genericSystemTypes[otherSignature.systemID] ? appData.genericSystemTypes[otherSignature.systemID] : \"\"));\n\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID2_Alpha']\").val(otherSignature.signatureID ? otherSignature.signatureID.substr(0, 3) : \"???\");\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID2_Numeric']\").val(otherSignature.signatureID ? otherSignature.signatureID.substr(3, 5) : \"\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='wormholeName2']\").val(otherSignature.name);\n\t\t\t\t\t\t$(\"#dialog-signature [name='wormholeLife']\").val(wormhole.life).selectmenu(\"refresh\").trigger(\"selectmenuchange\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='wormholeMass']\").val(wormhole.mass).selectmenu(\"refresh\").trigger(\"selectmenuchange\");\n\n\t\t\t\t\t\tif (wormhole[wormhole.parent+\"ID\"] == signature.id) {\n\t\t\t\t\t\t\t$(\"#dialog-signature input[name='wormholeType']\").val(wormhole.type).change();\n\t\t\t\t\t\t} else if (wormhole[wormhole.parent+\"ID\"] == otherSignature.id) {\n\t\t\t\t\t\t\t$(\"#dialog-signature input[name='wormholeType2']\").val(wormhole.type).change();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(\"#dialog-signature #durationPicker\").val(signature.lifeLength).change();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Focus the sig ID, if it isn't set, otherwise the sig name\n\t\t\t\t\t\tif(sigAlpha != '???') { $(\"#dialog-signature input[name='wormholeName']\").select(); }\n\t\t\t\t\t\telse { $(\"#dialog-signature input[name='signatureID_Alpha']\").select(); }\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Alpha']\").val(signature.signatureID ? signature.signatureID.substr(0, 3) : \"???\");\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Numeric']\").val(signature.signatureID ? signature.signatureID.substr(3, 5) : \"\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureType']\").val(signature.type).selectmenu(\"refresh\").trigger(\"selectmenuchange\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureName']\").val(signature.name);\n\t\t\t\t\t\t$(\"#dialog-signature #durationPicker\").val(signature.lifeLength).change();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Not a wormhole - always focus the sig ID\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Alpha']\").select();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Hightlight first ID section, if not set, otherwise the name\n\t\t\t\t} else {\n\t\t\t\t\t// Change the dialog buttons\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Add')\").show();\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Delete')\").hide();\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Save')\").hide();\n\n\t\t\t\t\t// Change the dialog title\n\t\t\t\t\t$(\"#dialog-signature\").dialog(\"option\", \"title\", \"Add Signature\");\n\n\t\t\t\t\t$(\"#dialog-signature [name='signatureType']\").val(options.signatures.editType || \"unknown\").selectmenu(\"refresh\")\n\t\t\t\t\tif ($(\"#dialog-signature [name='signatureType']\").val() === \"wormhole\") {\n\t\t\t\t\t\t$(\"#dialog-signature #site\").hide();\n\t\t\t\t\t\t$(\"#dialog-signature #wormhole\").show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\tValidationTooltips.close();\n\t\t\t\t$(\"#sigTable tr.selected\").removeClass(\"selected\");\n\t\t\t\t$(\"#dialog-signature\").data(\"signatureid\", \"\");\n\t\t\t\t$(\"#dialog-signature\").data(\"signature2id\", \"\");\n\t\t\t\t$(\"#dialog-signature\").data(\"wormholeid\", \"\");\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-signature\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-signature\").dialog(\"open\");\n\t}\n};\n\n$(\"#sigTable tbody\").on(\"dblclick\", \"tr\", {mode: \"update\", source:\"sig-row\"}, sigDialog.openSignatureDialog);\n$(\"#edit-signature\").on(\"click\", {mode: \"update\", source:\"edit-sig\"}, sigDialog.openSignatureDialog);\n$(\"#add-signature\").click({mode: \"add\"}, sigDialog.openSignatureDialog);\n\n// Signature overwrite. Attached to document because the element gets recreated each time\nsigDialog.overwriteSignature = function(sigToRemove, completeFunction, always) {\n\tvar payload = {\"signatures\": {\"remove\": []}, \"systemID\": viewingSystemID};\n\tvar undo = [];\n\n\tvar signature = tripwire.client.signatures[sigToRemove];\n\tif (signature.type != \"wormhole\") {\n\t\tundo.push(signature);\n\t\tpayload.signatures.remove.push(signature.id);\n\t} else {\n\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n\t\tundo.push({\"wormhole\": wormhole, \"signatures\": [tripwire.client.signatures[wormhole.initialID], tripwire.client.signatures[wormhole.secondaryID]]});\n\t\tpayload.signatures.remove.push(wormhole);\n\t}\n\n\tvar success = function(data) {\n\t\t$(\"#undo\").removeClass(\"disabled\");\n\t\tif (viewingSystemID in tripwire.signatures.undo) {\n\t\t\ttripwire.signatures.undo[viewingSystemID].push({action: \"remove\", signatures: undo});\n\t\t} else {\n\t\t\ttripwire.signatures.undo[viewingSystemID] = [{action: \"remove\", signatures: undo}];\n\t\t}\n\n\t\tsessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n\t\t\n\t\tcompleteFunction(data);\n\t}\n\n\ttripwire.refresh('refresh', payload, success, always);\n}\n\n/** Delegate the next action after sig overwrite to the save dialog */\nsigDialog.delegateSave = function(data) {\n\tif (data.resultSet && data.resultSet[0].result == true) {\n\t\tValidationTooltips.close();\n\n\t\tif ($(\"#dialog-signature\").parent().find(\":button:contains('Save')\")) {\n\t\t\t$(\"#dialog-signature\").parent().find(\":button:contains('Save')\").click();\n\t\t} else {\n\t\t\t$(\"#dialog-signature\").parent().find(\":button:contains('Add')\").click();\n\t\t}\n\t}\n}\n\n$(document).on(\"click\", \"#overwrite\", function() { \n\t$(\"#overwrite\").attr(\"disable\", true);\n\tsigDialog.overwriteSignature($(this).data(\"id\"), sigDialog.delegateSave, function() {\n\t\t$(\"#overwrite\").removeAttr(\"disable\");\n\t}); \n});\n"]}